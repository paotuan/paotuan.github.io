(function(e){function t(t){for(var n,o,a=t[0],c=t[1],u=t[2],p=0,m=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==s[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;i.push([0,"vendors~app"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0304":function(e,t,r){e.exports=r.p+"img/minacode.a2c8bc93.jpg"},"05b2":function(e,t,r){},"0716":function(e,t,r){"use strict";r("4eff")},"0c24":function(e,t,r){},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},"12a8":function(e,t,r){},"12d4":function(e,t,r){},13:function(e,t){},14:function(e,t){},"15aa":function(e,t,r){"use strict";r("8d6e")},2:function(e,t){},2054:function(e,t,r){"use strict";r("fc3e")},2158:function(e,t,r){},2425:function(e,t,r){"use strict";r("4047")},"24c8":function(e,t,r){"use strict";r("e8d4")},"25f1":function(e,t,r){"use strict";r("fd5d")},2612:function(e,t,r){"use strict";r("9016")},2747:function(e,t,r){"use strict";r("362c")},"29bd":function(e,t,r){"use strict";r("3755")},3:function(e,t){},"362c":function(e,t,r){},3755:function(e,t,r){},3763:function(e,t,r){"use strict";r("c964")},"37bd":function(e,t,r){},"3dda":function(e,t,r){"use strict";r("05b2")},"3e62":function(e,t,r){"use strict";r("37bd")},4:function(e,t){},4011:function(e,t,r){"use strict";r("7a62")},4047:function(e,t,r){},"413d":function(e,t,r){"use strict";r("824b")},"47b1":function(e,t,r){"use strict";r("9908")},"4bf3":function(e,t,r){},"4c27":function(e,t,r){"use strict";r("b322")},"4d06":function(e,t,r){"use strict";r("0c24")},"4eff":function(e,t,r){},5:function(e,t){},5316:function(e,t,r){},"53b9":function(e,t,r){},5406:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("8bbf"),s=r.n(n),i=r("5f72"),o=r.n(i),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"avatar",class:"circle"===e.shape?"shape-circle":""},[r("img",{attrs:{src:e.avatarSrc}})])},c=[],u=r("f6e3"),l=r.n(u),p={props:{src:String,type:{type:String,default:"C2C"},shape:{type:String,default:"circle"}},computed:{avatarSrc:function(){var e=this.src;return/^(https:|http:|\/\/)/.test(e)?e:this.defaultSrc},defaultSrc:function(){switch(this.type){case"C2C":return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png";case"GROUP":return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-3.png";case this.TIM.TYPES.CONV_SYSTEM:return l.a;default:return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-1.png"}}}},m=p,f=(r("691c"),r("2877")),d=Object(f["a"])(m,a,c,!1,null,"bd1b31fe",null),h=d.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":"正在拼命初始化...","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e.isLogin?r("div",{staticClass:"chat-wrapper"},[r("el-row",[r("el-col",{attrs:{span:5}},[r("profile-bar"),r("side-bar")],1),r("el-col",{attrs:{span:19}},[r("current-conversation")],1)],1)],1):r("div",{attrs:{id:"wrapper"}},[r("login",{key:e.initialAppid,attrs:{"initial-appid":e.initialAppid,"initial-secret":e.initialSecret},on:{submit:e.doLogin}}),e._m(0)],1),r("image-previewer")],1)},v=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"meta"},[e._v("意见/建议可移步 "),r("a",{attrs:{href:"https://github.com/paotuan/paotuan/issues",target:"_blank"}},[e._v("Github")]),e._v("，或加交流群：115699014")])}],b=(r("8e6e"),r("456d"),r("c5f6"),r("ac6a"),r("a481"),r("4917"),r("6762"),r("2fdb"),r("7f7f"),r("28a5"),r("768b")),y=(r("f559"),r("bd86")),O=r("2f62"),C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"current-conversation-wrapper"},[e.showCurrentConversation?r("div",{staticClass:"current-conversation",on:{scroll:e.onScroll}},[r("div",{staticClass:"header"},[r("div",{staticClass:"name"},[e._v(e._s(e.name))])]),r("div",{staticClass:"content"},[r("div",{ref:"message-list",staticClass:"message-list",on:{scroll:this.onScroll}},[e.isCompleted?r("div",{staticClass:"no-more"},[e._v("没有更多了")]):r("div",{staticClass:"more"},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$store.dispatch("getMessageList",e.currentConversation.conversationID)}}},[e._v("查看更多")])],1),e._l(e.currentMessageList,(function(e){return r("message-item",{key:e.ID,attrs:{message:e}})}))],2),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowScrollButtomTips,expression:"isShowScrollButtomTips"}],staticClass:"newMessageTips",on:{click:e.scrollMessageListToButtom}},[e._v("回到最新位置")])]),e.showMessageSendBox?r("div",{staticClass:"footer"},[r("message-send-box")],1):e._e()]):e._e(),e.showConversationProfile?r("div",{staticClass:"profile"},[e.currentConversation.type===e.TIM.TYPES.CONV_GROUP?r("right-panel"):r("conversation-profile")],1):e._e(),r("member-profile-card")],1)},w=[],P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:e.focus?{backgroundColor:"white"}:{},attrs:{id:"message-send-box-wrapper"},on:{drop:e.dropHandler}},[r("div",{staticClass:"send-header-bar"},[r("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"}},[r("div",{staticClass:"emojis"},e._l(e.emojiName,(function(t){return r("div",{key:t,staticClass:"emoji",on:{click:function(r){return e.chooseEmoji(t)}}},[r("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.emojiUrl+e.emojiMap[t]}})])})),0),r("i",{staticClass:"iconfont icon-smile",attrs:{slot:"reference",title:"发表情"},slot:"reference"})]),r("i",{staticClass:"iconfont icon-tupian",attrs:{title:"发图片"},on:{click:e.handleSendImageClick}}),r("i",{staticClass:"el-icon-camera",attrs:{title:"发视频"},on:{click:e.handleSendVideoClick}}),r("i",{staticClass:"iconfont icon-wenjian",attrs:{title:"发文件"},on:{click:e.handleSendFileClick}}),r("i",{staticClass:"el-icon-warning-outline",attrs:{title:"骰子指南"},on:{click:function(t){e.showDiceUsageVisible=!0}}})],1),r("el-dialog",{attrs:{title:"🎲 如何使用骰子",visible:e.showDiceUsageVisible,width:"40%"},on:{"update:visible":function(t){e.showDiceUsageVisible=t}}},[r("div",{staticClass:"dice-usage"},[r("div",[e._v("首先请确保群主启用了群机器人。在启用机器人后，机器人会对群里的骰子指令做出响应。")]),r("div",[e._v("骰子指令以小数点开头（中文句号亦可），接一个合法的骰子表达式。机器人支持多种常见的骰子表达式，有关表达式的细节可以\n          "),r("el-link",{staticClass:"inline-link",attrs:{type:"primary",href:"https://greenimp.github.io/rpg-dice-roller/guide/notation/",target:"_blank",underline:!1}},[e._v("参考详细文档")]),e._v("。\n        ")],1),r("div",[e._v("常用指令：")]),r("ul",[r("li",[e._v("基础骰子："),r("span",[e._v(".d6")]),e._v(" → 投掷一个六面骰（骰子面数可替换为任意数字）")]),r("li",[e._v("百分骰："),r("span",[e._v(".d%")]),e._v(" → 投掷一个百分骰，等同于 "),r("span",[e._v(".d100")])]),r("li",[e._v("骰子组合："),r("span",[e._v(".2d6+d4")]),e._v(" → 投掷两个六面骰和一个四面骰（支持同时多个骰子和基础运算）")]),r("li",[e._v("COC 奖励骰："),r("span",[e._v(".2d%kl1")]),e._v(" → 投掷两个百分骰，并保留（"),r("b",[e._v("k")]),e._v("eep）最低（"),r("b",[e._v("l")]),e._v("owest）的一个")]),r("li",[e._v("Fate 骰子："),r("span",[e._v(".4dF")]),e._v(" → 投掷四个 Fate 规则的骰子")])]),r("div",[e._v("在骰子表达式后面可以接上动作的描述，以增强指令的可读性，并可以与人物卡联动，例如 "),r("span",[e._v(".d% 聆听")]),e._v(" 。")])])]),r("el-popover",{staticStyle:{"max-height":"500px","overflow-y":"scroll"},attrs:{trigger:"manual",placement:"top"},model:{value:e.showAtGroupMember,callback:function(t){e.showAtGroupMember=t},expression:"showAtGroupMember"}},e._l(e.memberList,(function(t){return r("el-radio-group",{key:t.userID,staticStyle:{display:"flex","flex-decoration":"column"},on:{change:e.handleSelectAtUser},model:{value:e.atUserID,callback:function(t){e.atUserID=t},expression:"atUserID"}},[r("el-radio",{attrs:{label:t.userID}},[e._v(e._s(t.nameCard||t.nick||t.userID))])],1)})),1),r("div",{staticClass:"bottom"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.messageContent,expression:"messageContent"}],ref:"text-input",staticClass:"text-input",attrs:{rows:"4",resize:"false"},domProps:{value:e.messageContent},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.handleEnter(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),e.handleUp(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),e.handleDown(t))}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?(t.preventDefault(),t.shiftKey||t.altKey||t.metaKey?null:e.handleLine(t)):null},input:function(t){t.target.composing||(e.messageContent=t.target.value)}}}),r("ghost-message-send-box",{attrs:{"to-account":e.toAccount,"current-conversation-type":e.currentConversationType}}),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按Enter发送消息，Ctrl+Enter换行",placement:"left-start"}},[r("div",{staticClass:"btn-send",on:{click:e.sendTextMessage}},[r("div",{staticClass:"tim-icon-send"})])])],1),r("input",{ref:"imagePicker",staticStyle:{display:"none"},attrs:{type:"file",id:"imagePicker",accept:".jpg, .jpeg, .png, .gif, .bmp"},on:{change:e.sendImage}}),r("input",{ref:"filePicker",staticStyle:{display:"none"},attrs:{type:"file",id:"filePicker"},on:{change:e.sendFile}}),r("input",{ref:"videoPicker",staticStyle:{display:"none"},attrs:{type:"file",id:"videoPicker",accept:".mp4"},on:{change:e.sendVideo}})],1)},_=[],M=(r("20d6"),r("fe90"),"https://imgcache.qq.com/open/qcloud/tim/assets/emoji/"),I={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[下雨]":"emoji_2@2x.png","[么么哒]":"emoji_3@2x.png","[乒乓]":"emoji_4@2x.png","[便便]":"emoji_5@2x.png","[信封]":"emoji_6@2x.png","[偷笑]":"emoji_7@2x.png","[傲慢]":"emoji_8@2x.png","[再见]":"emoji_9@2x.png","[冷汗]":"emoji_10@2x.png","[凋谢]":"emoji_11@2x.png","[刀]":"emoji_12@2x.png","[删除]":"emoji_13@2x.png","[勾引]":"emoji_14@2x.png","[发呆]":"emoji_15@2x.png","[发抖]":"emoji_16@2x.png","[可怜]":"emoji_17@2x.png","[可爱]":"emoji_18@2x.png","[右哼哼]":"emoji_19@2x.png","[右太极]":"emoji_20@2x.png","[右车头]":"emoji_21@2x.png","[吐]":"emoji_22@2x.png","[吓]":"emoji_23@2x.png","[咒骂]":"emoji_24@2x.png","[咖啡]":"emoji_25@2x.png","[啤酒]":"emoji_26@2x.png","[嘘]":"emoji_27@2x.png","[回头]":"emoji_28@2x.png","[困]":"emoji_29@2x.png","[坏笑]":"emoji_30@2x.png","[多云]":"emoji_31@2x.png","[大兵]":"emoji_32@2x.png","[大哭]":"emoji_33@2x.png","[太阳]":"emoji_34@2x.png","[奋斗]":"emoji_35@2x.png","[奶瓶]":"emoji_36@2x.png","[委屈]":"emoji_37@2x.png","[害羞]":"emoji_38@2x.png","[尴尬]":"emoji_39@2x.png","[左哼哼]":"emoji_40@2x.png","[左太极]":"emoji_41@2x.png","[左车头]":"emoji_42@2x.png","[差劲]":"emoji_43@2x.png","[弱]":"emoji_44@2x.png","[强]":"emoji_45@2x.png","[彩带]":"emoji_46@2x.png","[彩球]":"emoji_47@2x.png","[得意]":"emoji_48@2x.png","[微笑]":"emoji_49@2x.png","[心碎了]":"emoji_50@2x.png","[快哭了]":"emoji_51@2x.png","[怄火]":"emoji_52@2x.png","[怒]":"emoji_53@2x.png","[惊恐]":"emoji_54@2x.png","[惊讶]":"emoji_55@2x.png","[憨笑]":"emoji_56@2x.png","[手枪]":"emoji_57@2x.png","[打哈欠]":"emoji_58@2x.png","[抓狂]":"emoji_59@2x.png","[折磨]":"emoji_60@2x.png","[抠鼻]":"emoji_61@2x.png","[抱抱]":"emoji_62@2x.png","[抱拳]":"emoji_63@2x.png","[拳头]":"emoji_64@2x.png","[挥手]":"emoji_65@2x.png","[握手]":"emoji_66@2x.png","[撇嘴]":"emoji_67@2x.png","[擦汗]":"emoji_68@2x.png","[敲打]":"emoji_69@2x.png","[晕]":"emoji_70@2x.png","[月亮]":"emoji_71@2x.png","[棒棒糖]":"emoji_72@2x.png","[汽车]":"emoji_73@2x.png","[沙发]":"emoji_74@2x.png","[流汗]":"emoji_75@2x.png","[流泪]":"emoji_76@2x.png","[激动]":"emoji_77@2x.png","[灯泡]":"emoji_78@2x.png","[炸弹]":"emoji_79@2x.png","[熊猫]":"emoji_80@2x.png","[爆筋]":"emoji_81@2x.png","[爱你]":"emoji_82@2x.png","[爱心]":"emoji_83@2x.png","[爱情]":"emoji_84@2x.png","[猪头]":"emoji_85@2x.png","[猫咪]":"emoji_86@2x.png","[献吻]":"emoji_87@2x.png","[玫瑰]":"emoji_88@2x.png","[瓢虫]":"emoji_89@2x.png","[疑问]":"emoji_90@2x.png","[白眼]":"emoji_91@2x.png","[皮球]":"emoji_92@2x.png","[睡觉]":"emoji_93@2x.png","[磕头]":"emoji_94@2x.png","[示爱]":"emoji_95@2x.png","[礼品袋]":"emoji_96@2x.png","[礼物]":"emoji_97@2x.png","[篮球]":"emoji_98@2x.png","[米饭]":"emoji_99@2x.png","[糗大了]":"emoji_100@2x.png","[红双喜]":"emoji_101@2x.png","[红灯笼]":"emoji_102@2x.png","[纸巾]":"emoji_103@2x.png","[胜利]":"emoji_104@2x.png","[色]":"emoji_105@2x.png","[药]":"emoji_106@2x.png","[菜刀]":"emoji_107@2x.png","[蛋糕]":"emoji_108@2x.png","[蜡烛]":"emoji_109@2x.png","[街舞]":"emoji_110@2x.png","[衰]":"emoji_111@2x.png","[西瓜]":"emoji_112@2x.png","[调皮]":"emoji_113@2x.png","[象棋]":"emoji_114@2x.png","[跳绳]":"emoji_115@2x.png","[跳跳]":"emoji_116@2x.png","[车厢]":"emoji_117@2x.png","[转圈]":"emoji_118@2x.png","[鄙视]":"emoji_119@2x.png","[酷]":"emoji_120@2x.png","[钞票]":"emoji_121@2x.png","[钻戒]":"emoji_122@2x.png","[闪电]":"emoji_123@2x.png","[闭嘴]":"emoji_124@2x.png","[闹钟]":"emoji_125@2x.png","[阴险]":"emoji_126@2x.png","[难过]":"emoji_127@2x.png","[雨伞]":"emoji_128@2x.png","[青蛙]":"emoji_129@2x.png","[面条]":"emoji_130@2x.png","[鞭炮]":"emoji_131@2x.png","[风车]":"emoji_132@2x.png","[飞吻]":"emoji_133@2x.png","[飞机]":"emoji_134@2x.png","[饥饿]":"emoji_135@2x.png","[香蕉]":"emoji_136@2x.png","[骷髅]":"emoji_137@2x.png","[麦克风]":"emoji_138@2x.png","[麻将]":"emoji_139@2x.png","[鼓掌]":"emoji_140@2x.png","[龇牙]":"emoji_141@2x.png"},j=["[龇牙]","[调皮]","[流汗]","[偷笑]","[再见]","[敲打]","[擦汗]","[猪头]","[玫瑰]","[流泪]","[大哭]","[嘘]","[酷]","[抓狂]","[委屈]","[便便]","[炸弹]","[菜刀]","[可爱]","[色]","[害羞]","[得意]","[吐]","[微笑]","[怒]","[尴尬]","[惊恐]","[冷汗]","[爱心]","[示爱]","[白眼]","[傲慢]","[难过]","[惊讶]","[疑问]","[困]","[么么哒]","[憨笑]","[爱情]","[衰]","[撇嘴]","[阴险]","[奋斗]","[发呆]","[右哼哼]","[抱抱]","[坏笑]","[飞吻]","[鄙视]","[晕]","[大兵]","[可怜]","[强]","[弱]","[握手]","[胜利]","[抱拳]","[凋谢]","[米饭]","[蛋糕]","[西瓜]","[啤酒]","[瓢虫]","[勾引]","[OK]","[爱你]","[咖啡]","[月亮]","[刀]","[发抖]","[差劲]","[拳头]","[心碎了]","[太阳]","[礼物]","[皮球]","[骷髅]","[挥手]","[闪电]","[饥饿]","[咒骂]","[折磨]","[抠鼻]","[鼓掌]","[糗大了]","[左哼哼]","[打哈欠]","[快哭了]","[吓]","[篮球]","[乒乓]","[NO]","[跳跳]","[怄火]","[转圈]","[磕头]","[回头]","[跳绳]","[激动]","[街舞]","[献吻]","[左太极]","[右太极]","[闭嘴]","[猫咪]","[红双喜]","[鞭炮]","[红灯笼]","[麻将]","[麦克风]","[礼品袋]","[信封]","[象棋]","[彩带]","[蜡烛]","[爆筋]","[棒棒糖]","[奶瓶]","[面条]","[香蕉]","[飞机]","[左车头]","[车厢]","[右车头]","[多云]","[下雨]","[钞票]","[熊猫]","[灯泡]","[风车]","[闹钟]","[雨伞]","[彩球]","[钻戒]","[沙发]","[纸巾]","[手枪]","[青蛙]"],T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"ghost",staticStyle:{display:"none"},attrs:{id:"ghost-message-send-box"},on:{click:e.send}})},E=[],D={props:["toAccount","currentConversationType"],methods:{send:function(){var e=this,t=this.$refs.ghost.innerText;if(0!==t.trim().length){var r=this.tim.createTextMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{text:t}});this.$store.commit("pushCurrentMessageList",r),this.$bus.$emit("scroll-bottom"),this.tim.sendMessage(r).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})),this.$refs.ghost.innerText=""}}}},S=D,k=Object(f["a"])(S,T,E,!1,null,null,null),x=k.exports;function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L={name:"message-send-box",props:["scrollMessageListToButtom"],components:{ElInput:i["Input"],ElForm:i["Form"],ElFormItem:i["FormItem"],ElDialog:i["Dialog"],ElPopover:i["Popover"],ElRadioGroup:i["RadioGroup"],ElRadio:i["Radio"],ElTooltip:i["Tooltip"],ElRate:i["Rate"],GhostMessageSendBox:x},data:function(){return{callingList:[],callingType:"",showCallingMember:!1,colors:["#99A9BF","#F7BA2A","#FF9900"],messageContent:"",isSendCustomMessage:!1,sendCustomDialogVisible:!1,surveyDialogVisible:!1,showDiceUsageVisible:!1,form:{data:"",description:"",extension:""},rate:5,suggestion:"",file:"",emojiMap:I,emojiName:j,emojiUrl:M,showAtGroupMember:!1,atUserID:"",focus:!1}},computed:G(G({},Object(O["b"])(["toAccount","currentConversationType"])),Object(O["c"])({memberList:function(e){return e.group.currentMemberList},userID:function(e){return e.user.userID},groupProfile:function(e){return e.conversation.currentConversation.groupProfile}})),mounted:function(){this.$refs["text-input"].addEventListener("paste",this.handlePaste),this.$bus.$on("reEditMessage",this.reEditMessage)},beforeDestroy:function(){this.$refs["text-input"].removeEventListener("paste",this.handlePaste)},methods:{getList:function(e){this.callingList=e},cancelCalling:function(){this.showCallingMember=!1},callingHandler:function(){if(this.callingList.length<1)this.$store.commit("showMessage",{type:"warning",message:"请选择成员"});else{this.showCallingMember=!1;var e={memberList:this.callingList,type:this.TIM.TYPES.CONV_GROUP};this.$store.commit("setCallingList",e),"video"!==this.callingType?"audio"!==this.callingType||this.$bus.$emit("audio-call"):this.$bus.$emit("video-call")}},trtcCalling:function(e){if("video"===e&&(this.callingType="video"),"audio"===e&&(this.callingType="audio"),"C2C"===this.currentConversationType){var t=[this.toAccount],r={memberList:t,type:"C2C"};return this.$store.commit("setCallingList",r),void this.$bus.$emit("".concat(e,"-call"))}this.currentConversationType===this.TIM.TYPES.CONV_GROUP&&(this.showCallingMember=!0)},audioCall:function(){this.$bus.$emit("audio-call"),this.$store.commit("showAudioCall",!0)},handleEmojiShow:function(){this.emojiShow=!0,this.bigEmojiShow=!1},handleBigEmojiShow:function(e){var t=document.getElementById("bigEmojiBox");t&&(t.scrollTop=0),this.curItemIndex=e,this.curBigEmojiItemList=this.bigEmojiList[e].list,this.emojiShow=!1,this.bigEmojiShow=!0},chooseBigEmoji:function(e){var t=this;this.popoverVisible=!1;var r=this.tim.createFaceMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{index:this.curItemIndex+1,data:"".concat(e,"@2x")}});this.$store.commit("pushCurrentMessageList",r),this.$bus.$emit("scroll-bottom"),this._sendMessage(r).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})}))},reEditMessage:function(e){this.messageContent=e},handleSelectAtUser:function(){this.messageContent+=this.atUserID+" ",this.showAtGroupMember=!1},handleUp:function(){var e=this,t=this.memberList.findIndex((function(t){return t.userID===e.atUserID}));t-1<0||(this.atUserID=this.memberList[t-1].userID)},handleDown:function(){var e=this,t=this.memberList.findIndex((function(t){return t.userID===e.atUserID}));t+1>=this.memberList.length||(this.atUserID=this.memberList[t+1].userID)},handleEnter:function(){this.showAtGroupMember?this.handleSelectAtUser():this.sendTextMessage()},handleLine:function(){this.messageContent+="\n"},handlePaste:function(e){var t,r=this,n=e.clipboardData;if(n&&n.files&&n.files.length>0&&(t=n.files[0]),"undefined"!==typeof t){var s=this.tim.createImageMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:t},onProgress:function(e){r.$set(s,"progress",e)}});this.$store.commit("pushCurrentMessageList",s);var i=this._sendMessage(s);i.catch((function(e){r.$store.commit("showMessage",{type:"error",message:e.message})}))}},dropHandler:function(e){var t=this;e.preventDefault();var r=e.dataTransfer.files[0],n={};n="video/mp4"===r.type?this.tim.createVideoMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:r},onProgress:function(e){t.$set(n,"progress",e)}}):this.tim.createFileMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:r},onProgress:function(e){t.$set(n,"progress",e)}}),this.$store.commit("pushCurrentMessageList",n),this._sendMessage(n).then((function(){t.$refs.videoPicker.value=null})).catch((function(e){t.$store.commit("showMessage",{message:e.message,type:"error"})}))},sendTextMessage:function(){var e=this;if(""===this.messageContent||0===this.messageContent.trim().length)return this.messageContent="",void this.$store.commit("showMessage",{message:"不能发送空消息哦！",type:"info"});var t=this.tim.createTextMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{text:this.messageContent}});this.$store.commit("pushCurrentMessageList",t),this.$bus.$emit("scroll-bottom"),this._sendMessage(t).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})),this.messageContent=""},sendCustomMessage:function(){var e=this;if(0!==this.form.data.length||0!==this.form.description.length||0!==this.form.extension.length){var t=this.tim.createCustomMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{data:this.form.data,description:this.form.description,extension:this.form.extension}});this.$store.commit("pushCurrentMessageList",t),this._sendMessage(t).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})),Object.assign(this.form,{data:"",description:"",extension:""}),this.sendCustomDialogVisible=!1}else this.$store.commit("showMessage",{message:"不能发送空消息",type:"info"})},random:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},sendSurvey:function(){var e=this,t=this.tim.createCustomMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{data:"survey",description:String(this.rate),extension:this.suggestion}});this.$store.commit("pushCurrentMessageList",t),Object.assign(this.form,{data:"",description:"",extension:""}),this._sendMessage(t).then((function(){Object.assign(e,{rate:5,suggestion:""})})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})),this.surveyDialogVisible=!1},chooseEmoji:function(e){this.messageContent+=e},handleSendImageClick:function(){this.$refs.imagePicker.click()},handleSendFileClick:function(){this.$refs.filePicker.click()},handleSendVideoClick:function(){this.$refs.videoPicker.click()},groupLive:function(){this.$store.commit("updateGroupLiveInfo",{groupID:this.toAccount,anchorID:this.userID}),this.$bus.$emit("open-group-live",{channel:1})},sendImage:function(){var e=this,t=this.tim.createImageMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:document.getElementById("imagePicker")},onProgress:function(r){e.$set(t,"progress",r)}});this.$store.commit("pushCurrentMessageList",t),this._sendMessage(t).then((function(){e.$refs.imagePicker.value=null})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},sendFile:function(){var e=this,t=this.tim.createFileMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:document.getElementById("filePicker")},onProgress:function(r){e.$set(t,"progress",r)}});this.$store.commit("pushCurrentMessageList",t),this._sendMessage(t).then((function(){e.$refs.filePicker.value=null})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},sendVideo:function(){var e=this,t=this.tim.createVideoMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:document.getElementById("videoPicker")},onProgress:function(r){e.$set(t,"progress",r)}});this.$store.commit("pushCurrentMessageList",t),this._sendMessage(t).then((function(){e.$refs.videoPicker.value=null})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},_sendMessage:function(e){var t=this;return this.tim.sendMessage(e).then((function(r){return t.$store.dispatch("insertGameLogs",[e]),r}))}}},R=L,N=(r("b7a8"),Object(f["a"])(R,P,_,!1,null,"2f16a6f4",null)),U=N.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"message-wrapper",class:e.messagePosition},[e.currentConversationType===e.TIM.TYPES.CONV_C2C?r("div",{staticClass:"c2c-layout",class:e.messagePosition},[e.showAvatar?r("div",{staticClass:"col-1"},[r("avatar",{attrs:{src:e.avatar}})],1):e._e(),r("div",{staticClass:"col-2"},[r("div",{staticClass:"content-wrapper"},[e.isMine?r("message-status-icon",{attrs:{message:e.message}}):e._e(),e.message.type===e.TIM.TYPES.MSG_TEXT?r("text-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_IMAGE?r("image-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_FILE?r("file-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_SOUND?r("sound-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GRP_TIP?r("group-tip-element",{attrs:{payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GRP_SYS_NOTICE?r("group-system-notice-element",{attrs:{payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_CUSTOM?r("custom-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_FACE?r("face-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_VIDEO?r("video-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GEO?r("geo-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):r("span",[e._v("暂未支持的消息类型："+e._s(e.message.type))])],1),e.showMessageHeader?r("message-footer",{attrs:{message:e.message}}):e._e()],1),r("div",{staticClass:"col-3"})]):e._e(),e.currentConversationType===e.TIM.TYPES.CONV_GROUP?r("div",{staticClass:"group-layout",class:e.messagePosition},[e.showAvatar?r("div",{staticClass:"col-1"},[r("avatar",{staticClass:"group-member-avatar",attrs:{src:e.avatar},nativeOn:{click:function(t){return e.showGroupMemberProfile(t)}}})],1):e._e(),r("div",{staticClass:"col-2"},[e.showMessageHeader?r("message-header",{attrs:{message:e.message}}):e._e(),r("div",{staticClass:"content-wrapper"},[e.isMine?r("message-status-icon",{attrs:{message:e.message}}):e._e(),e.message.type===e.TIM.TYPES.MSG_TEXT?r("text-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_IMAGE?r("image-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_FILE?r("file-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_SOUND?r("sound-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GRP_TIP?r("group-tip-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_CUSTOM?r("custom-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_FACE?r("face-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_VIDEO?r("video-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GEO?r("geo-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):r("span",[e._v("暂未支持的消息类型："+e._s(e.message.type))])],1)],1),r("div",{staticClass:"col-3"})]):e._e(),e.currentConversationType===e.TIM.TYPES.CONV_SYSTEM?r("div",{staticClass:"system-layout"},[r("div",{staticClass:"col-1"},[r("avatar",{attrs:{src:e.avatar,type:e.currentConversationType}})],1),r("div",{staticClass:"col-2"},[r("message-header",{attrs:{message:e.message}}),r("group-system-notice-element",{attrs:{payload:e.message.payload,message:e.message}})],1)]):e._e()])},B=[],Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.messageIconClass,staticStyle:{width:"16px",height:"16px"},on:{click:e.handleIconClick}},[e._v(e._s("message-send-fail"===e.messageIconClass?"!":""))])},F=[],V={name:"MessageStatusIcon",props:{message:{type:Object,required:!0}},computed:{messageIconClass:function(){switch(this.message.status){case"unSend":return"el-icon-loading";case"fail":return"message-send-fail";default:return""}}},methods:{handleIconClick:function(){var e=this;"message-send-fail"===this.messageIconClass&&this.tim.resendMessage(this.message).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))}}},q=V,H=(r("a86b"),Object(f["a"])(q,Y,F,!1,null,"97210bde",null)),K=H.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"base",class:[e.isMine?"right":"left"]},[r("div",{staticClass:"name text-ellipsis"},[e._v(e._s(e.from))]),r("div",{staticClass:"date"},[e._v(e._s(e.date))])])},J=[];function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",r=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return"".concat(r).concat(t).concat(ee(n)).concat(t).concat(ee(s))}function W(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getHours(),n=e.getMinutes(),s=e.getSeconds();return t?"".concat(ee(r),":").concat(ee(n),":").concat(ee(s)):"".concat(r,":").concat(ee(n))}function Z(e){return"".concat(Q(e)," ").concat(W(e))}function X(e){return e.toDateString()===(new Date).toDateString()}function ee(e){return e<10?"0".concat(e):e}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne={name:"MessageHeader",props:{message:{type:Object,required:!0}},computed:re(re({},Object(O["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUserProfile:function(e){return e.user.currentUserProfile},currentMemberList:function(e){return e.group.currentMemberList}})),{},{date:function(){return Z(new Date(1e3*this.message.time))},from:function(){var e=this.currentConversation.type===this.TIM.TYPES.CONV_C2C;if(this.isMine){var t=e?void 0:this.currentConversation.groupProfile.selfInfo.nameCard;return t||this.currentUserProfile.nick||this.currentUserProfile.userID}return e?this.currentConversation.userProfile.nick||this.currentConversation.userProfile.userID:this.currentConversation.type===this.TIM.TYPES.CONV_SYSTEM?this.message.type===this.TIM.TYPES.MSG_GRP_SYS_NOTICE?"群系统通知":"系统通知":this.message.nameCard||this.message.nick||this.message.from},isMine:function(){return"out"===this.message.flow}})},se=ne,ie=(r("9122"),Object(f["a"])(se,z,J,!1,null,"39b88506",null)),oe=ie.exports,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"base",class:[e.isMine?"right":"left"]},[r("div",{staticClass:"date"},[e._v(e._s(e.date))])])},ce=[];function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pe={name:"MessageFooter",props:{message:{type:Object,required:!0}},computed:le(le({},Object(O["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUserProfile:function(e){return e.user.currentUserProfile},currentMemberList:function(e){return e.group.currentMemberList}})),{},{date:function(){return Z(new Date(1e3*this.message.time))},from:function(){var e=this.currentConversation.type===this.TIM.TYPES.CONV_C2C;return this.isMine?this.currentUserProfile.nick||this.currentUserProfile.userID:e?this.currentConversation.userProfile.nick||this.currentConversation.userProfile.userID:this.message.nick||this.message.from},isMine:function(){return"out"===this.message.flow}})},me=pe,fe=(r("e017"),Object(f["a"])(me,ae,ce,!1,null,"11baf300",null)),de=fe.exports,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[r("div",{staticClass:"file-element-wrapper",attrs:{title:"单击下载"},on:{click:e.downloadFile}},[r("div",{staticClass:"header"},[r("i",{staticClass:"el-icon-document file-icon"}),r("div",{staticClass:"file-element"},[r("span",{staticClass:"file-name"},[e._v(e._s(e.fileName))]),r("span",{staticClass:"file-size"},[e._v(e._s(e.size))])])]),e.showProgressBar?r("el-progress",{attrs:{percentage:e.percentage,color:function(e){return 100===e?"#67c23a":"#409eff"}}}):e._e()],1)])},ge=[],ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"chat-bubble",on:{mousedown:function(e){e.stopPropagation()},contextmenu:function(e){e.preventDefault()}}},[e.message.isRevoked?e._e():r("el-dropdown",{ref:"dropdown",attrs:{trigger:""},on:{command:e.handleCommand}},[r("div",{staticStyle:{display:"flex"}},[e.isMine&&e.messageReadByPeer?r("div",{staticClass:"message-status"},[r("span",[e._v(e._s(e.messageReadByPeer))])]):e._e(),r("div",{staticClass:"message-content",class:e.bubbleStyle},[e._t("default")],2)]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isMine?r("el-dropdown-item",{attrs:{command:"revoke"}},[e._v("撤回")]):e._e()],1)],1),e.message.isRevoked?r("div",{staticClass:"group-tip-element-wrapper"},[e._v("\n    "+e._s(e.text)+"\n    "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"edit-button",attrs:{type:"text",size:"mini"},on:{click:e.reEdit}},[e._v(" 重新编辑")])],1):e._e()],1)},be=[],ye={name:"MessageBubble",data:function(){return{isTimeout:!1}},props:{isMine:{type:Boolean},isNew:{type:Boolean},message:{type:Object,required:!0}},created:function(){this.isTimeoutHandler()},mounted:function(){this.$refs.dropdown&&this.$refs.dropdown.$el&&this.$refs.dropdown.$el.addEventListener("mousedown",this.handleDropDownMousedown)},beforeDestroy:function(){this.$refs.dropdown&&this.$refs.dropdown.$el&&this.$refs.dropdown.$el.removeEventListener("mousedown",this.handleDropDownMousedown)},computed:{bubbleStyle:function(){var e="";return this.isMine?e+="message-send":e+="message-received",this.isNew&&(e+="new"),e},text:function(){return this.message.conversationType!==this.TIM.TYPES.CONV_C2C||this.isMine?this.message.conversationType!==this.TIM.TYPES.CONV_GROUP||this.isMine?"你撤回了一条消息":"".concat(this.message.from,"撤回了一条消息"):"对方撤回了一条消息"},messageReadByPeer:function(){return"success"===this.message.status&&(this.message.conversationType===this.TIM.TYPES.CONV_C2C&&this.message.isPeerRead?"已读":this.message.conversationType!==this.TIM.TYPES.CONV_C2C||this.message.isPeerRead?"":"未读")},isEdit:function(){return!!this.isMine&&(this.message.type===this.TIM.TYPES.MSG_TEXT&&!this.isTimeout)}},methods:{handleDropDownMousedown:function(e){this.isMine&&!this.isTimeout&&2===e.buttons&&(this.$refs.dropdown.visible?this.$refs.dropdown.hide():this.$refs.dropdown.show())},handleCommand:function(e){var t=this;switch(e){case"revoke":this.tim.revokeMessage(this.message).then((function(){t.isTimeoutHandler()})).catch((function(e){t.$store.commit("showMessage",{message:e,type:"warning"})}));break;case"delete":break;default:break}},isTimeoutHandler:function(){var e=new Date;parseInt(e.getTime()/1e3)-this.message.time>120?this.isTimeout=!0:setTimeout(this.isTimeoutHandler,1e3)},reEdit:function(){this.$bus.$emit("reEditMessage",this.message.payload.text)}}},Oe=ye,Ce=(r("c8ad"),Object(f["a"])(Oe,ve,be,!1,null,"5d538831",null)),we=Ce.exports,Pe={name:"FileElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:we,ElProgress:i["Progress"]},computed:{fileName:function(){return this.payload.fileName},fileUrl:function(){return this.payload.fileUrl},size:function(){var e=this.payload.fileSize;return e>1024?e/1024>1024?"".concat(this.toFixed(e/1024/1024)," Mb"):"".concat(this.toFixed(e/1024)," Kb"):"".concat(this.toFixed(e),"B")},showProgressBar:function(){return"unSend"===this.$parent.message.status},percentage:function(){return Math.floor(100*(this.$parent.message.progress||0))}},methods:{toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toFixed(t)},downloadFile:function(){var e=this;if(window.fetch)fetch(this.fileUrl).then((function(e){return e.blob()})).then((function(t){var r=document.createElement("a"),n=window.URL.createObjectURL(t);r.href=n,r.download=e.fileName,r.click()}));else{var t=document.createElement("a");t.href=this.fileUrl,t.target="_blank",t.download=this.filename,t.click()}}}},_e=Pe,Me=(r("4d06"),Object(f["a"])(_e,he,ge,!1,null,"96091f5a",null)),Ie=Me.exports,je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[r("div",{staticClass:"face-element-wrapper"},[r("img",{attrs:{src:e.url}})])])},Te=[],Ee={name:"FaceElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:we},computed:{url:function(){var e="";return e=this.payload.data.indexOf("@2x")>0?this.payload.data:this.payload.data+"@2x","https://webim-1252463788.file.myqcloud.com/assets/face-elem/".concat(e,".png")}}},De=Ee,Se=(r("24c8"),Object(f["a"])(De,je,Te,!1,null,"848acce2",null)),ke=Se.exports,xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[r("img",{staticClass:"image-element",attrs:{src:e.imageUrl},on:{load:e.onImageLoaded,click:e.handlePreview}}),e.showProgressBar?r("el-progress",{attrs:{percentage:e.percentage,color:function(e){return 100===e?"#67c23a":"#409eff"}}}):e._e()],1)},Ae=[];function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re={name:"ImageElemnt",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:we,ElProgress:i["Progress"]},computed:Le(Le({},Object(O["b"])(["imgUrlList"])),{},{imageUrl:function(){var e=this.payload.imageInfoArray[0].url;return"string"!==typeof e?"":"//"===e.slice(0,2)?"https:".concat(e):e},showProgressBar:function(){return"unSend"===this.$parent.message.status},percentage:function(){return Math.floor(100*(this.$parent.message.progress||0))}}),methods:{onImageLoaded:function(e){this.$bus.$emit("image-loaded",e)},handlePreview:function(){this.$bus.$emit("image-preview",{url:this.payload.imageInfoArray[0].url})}}},Ne=Re,Ue=(r("8810"),Object(f["a"])(Ne,xe,Ae,!1,null,"306e62ad",null)),$e=Ue.exports,Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[e._l(e.contentList,(function(t,n){return["text"===t.name?r("span",{key:n,domProps:{innerHTML:e._s(e.postProcess(t.text))}}):"img"===t.name?r("img",{key:n,attrs:{src:t.src,width:"20px",height:"20px"}}):e._e()]}))],2)},Ye=[];r("3b2b");function Fe(e){var t=[],r=e.text,n=-1,s=-1;while(""!==r)switch(n=r.indexOf("["),s=r.indexOf("]"),n){case 0:if(-1===s)t.push({name:"text",text:r}),r="";else{var i=r.slice(0,s+1);I[i]?(t.push({name:"img",src:M+I[i]}),r=r.substring(s+1)):(t.push({name:"text",text:"["}),r=r.slice(1))}break;case-1:t.push({name:"text",text:r}),r="";break;default:t.push({name:"text",text:r.slice(0,n)}),r=r.substring(n);break}return t}function Ve(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML}var qe="\n  力量 体质 体型 敏捷 外貌 智力 灵感 意志 教育 理智 幸运 \n".trim().split(/\s+/),He="\n  会计 人类学 估价 考古学 魅惑 攀爬 计算机 信用 克苏鲁神话 乔装 闪避 驾驶 电气维修 电子学 话术 格斗 射击\n  急救 历史 恐吓 跳跃 母语 法律 图书馆 聆听 锁匠 机械维修 医学 博物学 领航 神秘学 重型机械 说服 精神分析\n  心理学 骑术 妙手 侦查 侦察 潜行 游泳 投掷 追踪 sc SC\n".trim().split(/\s+/),Ke={basic:{},props:{},skills:{}};function ze(e){var t=JSON.parse(JSON.stringify(Ke));t.basic={name:e["D3"].v,job:e["D5"].v,age:e["D6"].v,gender:e["L6"].v,hp:e["F10"].v,san:e["N10"].v,luck:e["V10"].v,mp:(e["AD10"]||e["AF10"]).v},t.props={"力量":e["S3"].v,"体质":e["S5"].v,"体型":e["S7"].v,"敏捷":e["Y3"].v,"外貌":e["Y5"].v,"智力":e["Y7"].v,"意志":e["AE3"].v,"教育":e["AE5"].v};for(var r=[19,20,21,33,34,35,36,37,38,43,44,45],n=15;n<=46;n++){var s=e[(r.includes(n)?"E":"C")+n];s&&(t.skills[Je(s.v)]=e["P"+n].v)}for(var i=[26,30,31,32,36,40],o=15;o<=40;o++){var a=e[(i.includes(o)?"Y":"W")+o];a&&(t.skills[Je(a.v)]=e["AJ"+o].v)}return t}function Je(e){switch(e){case"计算机使用 Ω":return"计算机";case"图书馆使用":return"图书馆";case"电子学 Ω":return"电子学";case"母语:":return"母语";default:return e}}var Qe=new RegExp("(".concat(qe.concat(He).join("|"),")"),"g"),We={name:"TextElement",components:{MessageBubble:we},props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},computed:{contentList:function(){return Fe(this.payload)}},methods:{postProcess:function(e){var t=this;if(this.message.conversationType===this.TIM.TYPES.CONV_GROUP){var r=this.$store.state.group.currentMemberList.filter((function(e){return e.userID===t.message.from}));if(r.length>0&&r[0].role===this.TIM.TYPES.GRP_MBR_ROLE_OWNER){var n=e.match(/(困难|极难|极限)/);return n=n?n[0]:"",this.escape(e).replace(Qe,'<span class="underline" onclick="_onclickspan(\''.concat(n,"$1')\">$1</span>"))}}return this.escape(e)},escape:function(e){return Ve(e)}}};window._onclickspan=function(e){var t=document.getElementById("ghost-message-send-box");t.innerText=".d% "+e,t.click()};var Ze=We,Xe=(r("8e6d"),r("413d"),Object(f["a"])(Ze,Be,Ye,!1,null,"6f20670e",null)),et=Xe.exports,tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[r("div",{staticClass:"sound-element-wrapper",attrs:{title:"单击播放"},on:{click:e.play}},[r("i",{staticClass:"iconfont icon-voice"}),e._v("\n    "+e._s(e.second+'"')+"\n  ")])])},rt=[],nt={name:"SoundElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:we},data:function(){return{amr:null}},computed:{url:function(){return this.payload.url},size:function(){return this.payload.size},second:function(){return this.payload.second}},methods:{play:function(){var e=document.createElement("audio");e.addEventListener("error",this.tryPlayAMR),e.src=this.url;var t=e.play();t&&t.catch((function(){}))},tryPlayAMR:function(){try{var e=/MSIE|Trident|Edge/.test(window.navigator.userAgent);if(e)return void this.$store.commit("showMessage",{message:"您的浏览器不支持该格式的语音消息播放，请尝试更换浏览器，建议使用：谷歌浏览器",type:"warning"});if(!window.BenzAMRRecorder){var t=document.createElement("script");t.addEventListener("load",this.playAMR),t.src="./BenzAMRRecorder.js";var r=document.getElementsByTagName("script")[0];return void r.parentNode.insertBefore(t,r)}this.playAMR()}catch(n){this.$store.commit("showMessage",{message:"您的浏览器不支持该格式的语音消息播放，请尝试更换浏览器，建议使用：谷歌浏览器",type:"warning"})}},playAMR:function(){var e=this;!this.amr&&window.BenzAMRRecorder&&(this.amr=new window.BenzAMRRecorder),this.amr.isInit()?this.amr.play():this.amr.initWithUrl(this.url).then((function(){e.amr.play()}))}}},st=nt,it=(r("777c"),Object(f["a"])(st,tt,rt,!1,null,"7ab0530b",null)),ot=it.exports,at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[r("video",{staticClass:"video",attrs:{src:e.payload.videoUrl,controls:""},on:{error:e.videoError}}),e.showProgressBar?r("el-progress",{attrs:{percentage:e.percentage,color:function(e){return 100===e?"#67c23a":"#409eff"}}}):e._e()],1)},ct=[],ut={name:"VideoElement",components:{MessageBubble:we,ElProgress:i["Progress"]},props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},computed:{showProgressBar:function(){return"unSend"===this.message.status},percentage:function(){return Math.floor(100*(this.$parent.message.progress||0))}},methods:{videoError:function(e){this.$store.commit("showMessage",{type:"error",message:"视频出错，错误原因："+e.target.error.message})}}},lt=ut,pt=(r("e3ec"),Object(f["a"])(lt,at,ct,!1,null,"6237ab78",null)),mt=pt.exports,ft=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"group-tip-element-wrapper"},[e._v(e._s(e.text))])},dt=[];r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54");function ht(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=gt(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function gt(e,t){if(e){if("string"===typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(e,t):void 0}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ot={name:"GroupTipElement",data:function(){return{callTips:256}},props:{payload:{type:Object,required:!0},message:{type:Object,required:!1}},computed:yt(yt({},Object(O["c"])({currentUserProfile:function(e){return e.user.currentUserProfile},userID:function(e){return e.user.userID}})),{},{text:function(){return this.getGroupTipContent(this.message)}}),methods:{getGroupTipContent:function(e){var t=e.nick||e.from===this.userID&&this.currentUserProfile.nick||e.from,r=e.nick||e.payload.userIDList.join(",");switch(e.payload.operationType){case this.TIM.TYPES.GRP_TIP_MBR_JOIN:return"群成员：".concat(r," 加入群组");case this.TIM.TYPES.GRP_TIP_MBR_QUIT:return"群成员：".concat(r," 退出群组");case this.TIM.TYPES.GRP_TIP_MBR_KICKED_OUT:return"群成员：".concat(r," 被").concat(e.payload.operatorID,"踢出群组");case this.TIM.TYPES.GRP_TIP_MBR_SET_ADMIN:return"群成员：".concat(r," 成为管理员");case this.TIM.TYPES.GRP_TIP_MBR_CANCELED_ADMIN:return"群成员：".concat(r," 被撤销管理员");case this.TIM.TYPES.GRP_TIP_GRP_PROFILE_UPDATED:return"群资料修改";case this.callTips:return e.payload.text.indexOf("结束群聊")>-1?'"'.concat(e.payload.text,'"'):'"'.concat(t,'" ').concat(e.payload.text);case this.TIM.TYPES.GRP_TIP_MBR_PROFILE_UPDATED:var n,s=ht(e.payload.memberList);try{for(s.s();!(n=s.n()).done;){var i=n.value;return i.muteTime>0?"群成员：".concat(i.userID,"被禁言").concat(i.muteTime,"秒"):"群成员：".concat(i.userID,"被取消禁言")}}catch(o){s.e(o)}finally{s.f()}break;default:return"[群提示消息]"}}}},Ct=Ot,wt=(r("3763"),Object(f["a"])(Ct,ft,dt,!1,null,"7862d93a",null)),Pt=wt.exports,_t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-bubble",{attrs:{isMine:!1,message:e.message}},[r("div",{staticClass:"group-system-element-wrapper"},[e._v("\n    "+e._s(e.text)+"\n    "),e.isJoinGroupRequest?r("el-button",{attrs:{type:"text"},on:{click:function(t){e.showDialog=!0}}},[e._v("处理")]):e._e(),r("el-dialog",{attrs:{title:"处理加群申请",visible:e.showDialog,width:"30%"},on:{"update:visible":function(t){e.showDialog=t}}},[r("el-form",{ref:"form",attrs:{"label-width":"100px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[r("el-form-item",{attrs:{label:"处理结果："}},[r("el-radio-group",{model:{value:e.form.handleAction,callback:function(t){e.$set(e.form,"handleAction",t)},expression:"form.handleAction"}},[r("el-radio",{attrs:{label:"Agree"}},[e._v("同意")]),r("el-radio",{attrs:{label:"Reject"}},[e._v("拒绝")])],1)],1),r("el-form-item",{attrs:{label:"附言："}},[r("el-input",{attrs:{type:"textarea",resize:"none",rows:3,placeholder:"请输入附言"},model:{value:e.form.handleMessage,callback:function(t){e.$set(e.form,"handleMessage",t)},expression:"form.handleMessage"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleGroupApplication}},[e._v("确 定")])],1)],1)],1)])},Mt=[];function It(e){var t=e.payload.groupProfile.name||e.payload.groupProfile.groupID;switch(e.payload.operationType){case 1:return"".concat(e.payload.operatorID," 申请加入群组：").concat(t);case 2:return"成功加入群组：".concat(t);case 3:return"申请加入群组：".concat(t,"被拒绝");case 4:return"你被管理员".concat(e.payload.operatorID,"踢出群组：").concat(t);case 5:return"群：".concat(t," 已被").concat(e.payload.operatorID,"解散");case 6:return"".concat(e.payload.operatorID,"创建群：").concat(t);case 7:return"".concat(e.payload.operatorID,"邀请你加群：").concat(t);case 8:return"你退出群组：".concat(t);case 9:return"你被".concat(e.payload.operatorID,"设置为群：").concat(t,"的管理员");case 10:return"你被".concat(e.payload.operatorID,"撤销群：").concat(t,"的管理员身份");case 255:return"自定义群系统通知: "+e.payload.userDefinedField}}var jt={name:"GroupSystemNoticeElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!1}},components:{ElDialog:i["Dialog"],ElForm:i["Form"],ElFormItem:i["FormItem"],ElRadioGroup:i["RadioGroup"],ElRadio:i["Radio"],MessageBubble:we},data:function(){return{showDialog:!1,form:{handleAction:"Agree",handleMessage:""}}},computed:{text:function(){return It(this.message)},title:function(){return this.message.type===this.TIM.TYPES.MSG_GRP_SYS_NOTICE?"群系统通知":"系统通知"},isJoinGroupRequest:function(){return 1===this.payload.operationType}},methods:{handleGroupApplication:function(){var e=this;this.tim.handleGroupApplication({handleAction:this.form.handleAction,handleMessage:this.form.handleMessage,message:this.message}).then((function(){e.showDialog=!1,e.$store.commit("removeMessage",e.message)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message}),e.showDialog=!1}))}}},Tt=jt,Et=(r("4011"),Object(f["a"])(Tt,_t,Mt,!1,null,"8a49ee1a",null)),Dt=Et.exports,St=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"group-tip-element-wrapper"},[e._v(e._s(e.text))])},kt=[];function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Gt={name:"CustomElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:we},computed:At(At({},Object(O["c"])({currentUserProfile:function(e){return e.user.currentUserProfile}})),{},{text:function(){return this.translateCustomMessage(this.payload)}}),methods:{translateCustomMessage:function(e){return e.description}}},Lt=Gt,Rt=(r("ec25"),Object(f["a"])(Lt,St,kt,!1,null,"3a2bf9c9",null)),Nt=Rt.exports,Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[r("a",{staticClass:"geo-element",attrs:{href:e.href,target:"_blank",title:"点击查看详情"}},[r("span",{staticClass:"el-icon-location-outline"},[e._v(e._s(e.payload.description))]),r("img",{attrs:{src:e.url}})])])},$t=[],Bt={name:"GeoElement",components:{MessageBubble:we},props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},data:function(){return{url:""}},computed:{lon:function(){return this.payload.longitude.toFixed(6)},lat:function(){return this.payload.latitude.toFixed(6)},href:function(){return"https://map.qq.com/?type=marker&isopeninfowin=1&markertype=1&pointx=".concat(this.lon,"&pointy=").concat(this.lat,"&name=").concat(this.payload.description)}},mounted:function(){this.url="https://apis.map.qq.com/ws/staticmap/v2/?center=".concat(this.lat,",").concat(this.lon,"&zoom=10&size=300*150&maptype=roadmap&markers=size:large|color:0xFFCCFF|label:k|").concat(this.lat,",").concat(this.lon,"&key=UBNBZ-PTP3P-TE7DB-LHRTI-Y4YLE-VWBBD")}},Yt=Bt,Ft=(r("daca"),Object(f["a"])(Yt,Ut,$t,!1,null,"58085edc",null)),Vt=Ft.exports;function qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Kt={name:"MessageItem",props:{message:{type:Object,required:!0}},components:{MessageHeader:oe,MessageFooter:de,MessageStatusIcon:K,FileElement:Ie,FaceElement:ke,ImageElement:$e,TextElement:et,SoundElement:ot,GroupTipElement:Pt,GroupSystemNoticeElement:Dt,CustomElement:Nt,VideoElement:mt,GeoElement:Vt},data:function(){return{renderDom:[]}},computed:Ht(Ht({},Object(O["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUserProfile:function(e){return e.user.currentUserProfile}})),{},{showAvatar:function(){return"C2C"===this.currentConversation.type&&!this.message.isRevoked||"GROUP"===this.currentConversation.type&&!this.message.isRevoked&&(this.message.type!==this.TIM.TYPES.MSG_GRP_TIP&&this.message.type!==this.TIM.TYPES.MSG_CUSTOM)},avatar:function(){return"C2C"===this.currentConversation.type?this.isMine?this.currentUserProfile.avatar:this.currentConversation.userProfile.avatar:"GROUP"===this.currentConversation.type?this.isMine?this.currentUserProfile.avatar:this.message.avatar:""},currentConversationType:function(){return this.currentConversation.type},isMine:function(){return"out"===this.message.flow},messagePosition:function(){return["TIMGroupTipElem","TIMGroupSystemNoticeElem",this.TIM.TYPES.MSG_CUSTOM].includes(this.message.type)||this.message.isRevoked?"position-center":this.isMine?"position-right":"position-left"},showMessageHeader:function(){return!["TIMGroupTipElem","TIMGroupSystemNoticeElem",this.TIM.TYPES.MSG_CUSTOM].includes(this.message.type)&&!this.message.isRevoked}}),methods:{showGroupMemberProfile:function(e){var t=this;this.tim.getGroupMemberProfile({groupID:this.message.to,userIDList:[this.message.from]}).then((function(r){var n=r.data.memberList;n[0]&&t.$bus.$emit("showMemberProfile",{event:e,member:n[0]})}))}}},zt=Kt,Jt=(r("8674"),Object(f["a"])(zt,$,B,!1,null,"14ff1cbc",null)),Qt=Jt.exports,Wt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"conversation-profile-wrapper"},[e.currentConversation.type===e.TIM.TYPES.CONV_C2C?r("user-profile",{attrs:{userProfile:e.currentConversation.userProfile}}):e.currentConversation.type===e.TIM.TYPES.CONV_GROUP?r("group-profile",{attrs:{groupProfile:e.currentConversation.groupProfile}}):e._e()],1)},Zt=[],Xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("group-member-list",{attrs:{groupProfile:e.groupProfile}}),r("div",{staticClass:"group-info-content"},[r("div",{staticClass:"info-item"},[r("div",{staticClass:"label"},[e._v("\n          群头像\n          "),e.editable?r("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditFaceUrl=!0,e.inputFocus("editFaceUrl")}}}):e._e()]),e.showEditFaceUrl?r("el-input",{ref:"editFaceUrl",staticStyle:{width:"60%"},attrs:{autofocus:"",size:"mini"},on:{blur:function(t){e.showEditFaceUrl=!1}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editFaceUrl(t)}},model:{value:e.avatar,callback:function(t){e.avatar=t},expression:"avatar"}}):r("div",{staticClass:"content"},[r("avatar",{attrs:{src:e.groupProfile.avatar}})],1)],1),r("div",{staticClass:"info-item"},[r("div",{staticClass:"label"},[e._v("\n          群名称\n          "),e.editable?r("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditName=!0,e.inputFocus("editName")}}}):e._e()]),e.showEditName?r("el-input",{ref:"editName",staticStyle:{width:"60%"},attrs:{autofocus:"",size:"mini"},on:{blur:function(t){e.showEditName=!1}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editName(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):r("div",{staticClass:"content text-ellipsis",attrs:{title:e.groupProfile.name}},[e._v("\n          "+e._s(e.groupProfile.name||"暂无")+"\n        ")])],1),r("div",{staticClass:"info-item"},[r("div",{staticClass:"label"},[e._v("\n          群消息提示类型\n          "),e.editable?r("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditMessageRemindType=!0,e.inputFocus("editMessageRemindType")}}}):e._e()]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.showEditMessageRemindType,expression:"!showEditMessageRemindType"}],staticClass:"content"},[e._v("\n          "+e._s(e.messageRemindTypeMap[this.groupProfile.selfInfo.messageRemindType])+"\n        ")]),r("el-select",{directives:[{name:"show",rawName:"v-show",value:e.showEditMessageRemindType,expression:"showEditMessageRemindType"}],ref:"editMessageRemindType",attrs:{size:"mini","automatic-dropdown":""},on:{change:e.editMessageRemindType,blur:function(t){e.showEditMessageRemindType=!1}},model:{value:e.messageRemindType,callback:function(t){e.messageRemindType=t},expression:"messageRemindType"}},[r("el-option",{attrs:{label:"接收消息并提示",value:"AcceptAndNotify"}}),r("el-option",{attrs:{label:"接收消息但不提示",value:"AcceptNotNotify"}}),r("el-option",{attrs:{label:"屏蔽消息",value:"Discard"}})],1)],1),r("div",{staticClass:"info-item"},[r("div",{staticClass:"label"},[e._v("\n          我的群名片\n          "),r("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditNameCard=!0,e.inputFocus("editNameCard")}}})]),e.showEditNameCard?r("el-input",{ref:"editNameCard",staticStyle:{width:"60%"},attrs:{autofocus:"",size:"mini"},on:{blur:function(t){e.showEditNameCard=!1}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editNameCard(t)}},model:{value:e.nameCard,callback:function(t){e.nameCard=t},expression:"nameCard"}}):r("div",{staticClass:"content cursor-pointer"},[e._v("\n          "+e._s(e.groupProfile.selfInfo.nameCard||"暂无")+"\n        ")])],1),e.isOwner?r("div",{staticClass:"info-item"},[r("div",{staticClass:"label"},[e._v("全体禁言")]),r("el-switch",{on:{change:e.changeMuteStatus},model:{value:e.muteAllMembers,callback:function(t){e.muteAllMembers=t},expression:"muteAllMembers"}})],1):e._e(),e.isOwner?r("div",{staticClass:"info-item"},[r("div",{staticClass:"label"},[e._v("启用机器人")]),r("bot-switch")],1):e._e(),r("div",{staticClass:"info-item"},[r("div",{staticClass:"label"},[e._v("\n          群公告\n          "),e.editable?r("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditNotification=!0,e.inputFocus("editNotification")}}}):e._e()]),e.showEditNotification?r("el-input",{ref:"editNotification",staticStyle:{width:"60%"},attrs:{autofocus:"",size:"mini"},on:{blur:function(t){e.showEditNotification=!1}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editNotification(t)}},model:{value:e.notification,callback:function(t){e.notification=t},expression:"notification"}}):r("div",{staticClass:"long-content",attrs:{title:e.groupProfile.notification}},[e._v("\n          "+e._s(e.groupProfile.notification||"暂无")+"\n        ")])],1)]),r("div",{staticClass:"action-btns"},[e.isOwner?r("kp-actions"):e._e(),r("div",[r("div",[r("el-button",{attrs:{type:"text"},on:{click:e.quitGroup}},[e._v("退出群组")])],1),e.showDissmissGroup?r("div",[r("el-button",{attrs:{type:"text"},on:{click:e.dismissGroup}},[e._v("解散群组")])],1):e._e()])],1)],1)},er=[],tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"group-member-list-wrapper"},[r("div",{staticClass:"header"},[r("span",{staticClass:"member-count text-ellipsis"},[e._v("群成员："+e._s(e.members.length))]),r("i",{staticClass:"el-icon-link",attrs:{title:"复制邀请链接"},on:{click:function(t){e.inviteDialogShow=!0}}}),r("i",{staticClass:"el-icon-refresh",attrs:{title:"刷新群成员信息"},on:{click:e.refreshGroupMember}})]),r("div",{staticClass:"scroll-content"},[r("div",{staticClass:"group-member-list"},e._l(e.members,(function(t){return r("div",{key:t.userID},[r("div",{staticClass:"group-member",attrs:{slot:"reference"},slot:"reference"},[r("div",{staticClass:"info"},[r("avatar",{attrs:{title:e.getGroupMemberAvatarText(t.role),src:t.avatar}}),r("div",{staticClass:"names"},[r("div",{staticClass:"member-name text-ellipsis"},[e._v(e._s(e.getShowUserNick(t)))]),r("div",{staticClass:"member-id"},[e._v(e._s(e.getShowUserId(t)))])])],1),r("div",{staticClass:"actions"},[t.userID.startsWith("bot")?e._e():r("el-button",{staticClass:"action-btn",attrs:{title:"查看人物卡",icon:"el-icon-tickets",size:"mini",circle:""},on:{click:function(r){return e.openUserCard(t.userID)}}}),e.isOwner?r("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleDropdownCommand}},[r("el-button",{staticClass:"action-btn",attrs:{title:"更多操作",icon:"el-icon-more",size:"mini",circle:""}}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.userID.startsWith("bot")?e._e():r("el-dropdown-item",{attrs:{icon:"el-icon-circle-plus-outline",command:"ImportCard:"+t.userID}},[e._v("\n                      导入人物卡\n                    ")]),e.isBotOfThisGroup(t)?r("el-dropdown-item",{attrs:{icon:"el-icon-picture-outline",command:"SetAvatar:"+t.userID}},[e._v("\n                      修改头像\n                    ")]):e._e(),r("el-dropdown-item",{attrs:{icon:"el-icon-edit",command:"SetNick:"+t.userID}},[e._v("\n                      修改群名片\n                    ")]),"Owner"!==t.role?r("el-dropdown-item",{staticStyle:{color:"#F56C6C"},attrs:{icon:"el-icon-delete",command:"Kick:"+t.userID}},[e._v("\n                      踢出群聊\n                    ")]):e._e()],1)],1):e._e()],1)])])})),0)]),e.isOwner?r("card-import",{attrs:{visible:!!e.importCardMemberID,"group-id":e.groupProfile.groupID,"member-id":e.importCardMemberID},on:{"update:visible":function(t){e.importCardMemberID=null}}}):e._e(),r("el-dialog",{attrs:{title:"邀请入群",visible:e.inviteDialogShow,width:"40%"},on:{"update:visible":function(t){e.inviteDialogShow=t}}},[r("div",{staticClass:"invite-dialog"},[r("div",[r("h3",[e._v("分享给网页")]),r("el-button",{attrs:{type:"primary"},on:{click:e.copyInviteLink}},[e._v("复制邀请链接")]),r("div",{staticClass:"desc"},[e._v("复制后发给小伙伴，小伙伴点击链接在新窗口中打开，登录后即可自动进群")])],1),r("div",[r("h3",[e._v("分享给小程序")]),r("img",{attrs:{src:e.minacode}}),r("img",{attrs:{src:e.getInviteQRCodeUrl()}}),r("div",{staticClass:"desc"},[e._v("①微信扫描左边二维码打开【跑团IO】小程序"),r("br"),e._v("②在小程序登录页面扫描右边二维码，自动填充信息"),r("br"),e._v("③输入自己的QQ后登录即可自动进群")])])])])],1)},rr=[],nr=(r("7514"),r("8615"),r("d225")),sr=r("b0b4"),ir=window.TIMC,or=ir();delete window.TIMC,window.genTestUserSig=function(e,t,r){var n=604800,s=new window.LibGenerateTestUserSig(t,r,n),i=s.genTestUserSig(e);return{SDKAppID:t,userSig:i}};var ar=r("53a5");function cr(e,t){if(t.conversationType===or.TYPES.CONV_GROUP){var r=t.payload.text.trim();if(r.startsWith(".")||r.startsWith("。"))try{var n=r.substr(1).split(" "),s=Object(b["a"])(n,2),i=s[0],o=s[1],a=new ar["DiceRoll"](i),c=lr(t.to,t.from,i,o,a.total);ur(e,t.to,"".concat(t.nameCard||t.nick||t.from," 🎲 ").concat(o||""," ").concat(a.output," ").concat(c))}catch(u){}}}function ur(e,t,r){var n=e.createTextMessage({to:t,conversationType:or.TYPES.CONV_GROUP,payload:{text:r}});e.sendMessage(n)}function lr(e,t,r,n,i){if(!n)return"";var o=s.a.prototype.$store.state.game.list[e];if(!o)return"";var a=o.cards["o"+t];if(!a)return"";if("理智"===n||"sc"===n||"SC"===n)return i<=a.basic.san?"≤ ".concat(a.basic.san," 成功"):"> ".concat(a.basic.san," 失败");if("幸运"===n)return i<=a.basic.luck?"≤ ".concat(a.basic.luck," 成功"):"> ".concat(a.basic.luck," 失败");if("灵感"===n)return i<=a.props["智力"]?"≤ ".concat(a.props["智力"]," 成功"):"> ".concat(a.props["智力"]," 失败");var c=n.indexOf("困难")>=0,u=n.indexOf("极难")>=0||n.indexOf("极限")>=0;n=n.replace(/(困难|极难|极限)/g,""),"侦查"===n&&(n="侦察");var l=a.props[n]||a.skills[n];return l?1===i?"大成功":i>95?"大失败":(l=u?Math.floor(l/5):c?Math.floor(l/2):l,i<=l?"≤ ".concat(l," 成功"):"> ".concat(l," 失败")):""}var pr=r("3438"),mr=r.n(pr),fr=null,dr=null,hr=null,gr=new Proxy({},{get:function(e,t){if(fr)return fr[t];console.warn("use tim before init!!!")}}),vr=gr;function br(e,t){fr||(dr=e,hr=t,fr=or.create({SDKAppID:e}),fr.setLogLevel(4),fr.registerPlugin({"cos-js-sdk":mr.a}))}function yr(){return btoa(dr+"/"+hr.split("").reverse().join(""))}function Or(e,t,r){for(var n in t)e.off(n,t[n],r),e.on(n,t[n],r)}var Cr={},wr=function(){function e(t){Object(nr["a"])(this,e),this.bot=ir().create({SDKAppID:dr}),this.groupId=t,this.name=t.replace("@TGS#","bot_"),this.init()}return Object(sr["a"])(e,[{key:"init",value:function(){var e;this.bot.setLogLevel(4),this.bot.registerPlugin({"cos-js-sdk":mr.a}),Or(this.bot,(e={},Object(y["a"])(e,or.EVENT.SDK_READY,this.onReadyStateUpdate),Object(y["a"])(e,or.EVENT.SDK_NOT_READY,this.onReadyStateUpdate),Object(y["a"])(e,or.EVENT.KICKED_OUT,this.onKickedOut),Object(y["a"])(e,or.EVENT.ERROR,this.onSdkError),Object(y["a"])(e,or.EVENT.MESSAGE_RECEIVED,this.onMessageReceived),e),this)}},{key:"enable",value:function(){var e=this;return new Promise((function(t,r){e.bot.login({userID:e.name,userSig:window.genTestUserSig(e.name,Number(dr),hr).userSig}).then((function(){console.log("登录成功"),e.bot.joinGroup({groupID:e.groupId}).then((function(e){return t(e.data)})).catch((function(e){return r(e)}))})).catch((function(e){console.log("登录失败",e),r(e)}))}))}},{key:"disable",value:function(){return this.bot.logout()}},{key:"logout",value:function(){return this.bot.logout()}},{key:"setAvatar",value:function(e){return this.bot.updateMyProfile({avatar:e})}},{key:"onReadyStateUpdate",value:function(e){var t=e.name;console.log("[bot]"+t);var r=t===or.EVENT.SDK_READY;r&&this.bot.updateMyProfile({nick:"bot"})}},{key:"onSdkError",value:function(e){console.log(e.data)}},{key:"onKickedOut",value:function(e){console.log("sdk kick reason "+e.data.type)}},{key:"onMessageReceived",value:function(e){var t=this,r=e.data;r.forEach((function(e){return cr(t.bot,e)}))}}]),e}();function Pr(e){return Cr[e]||(Cr[e]=new wr(e)),Cr[e].enable()}function _r(e){return Cr[e]?Cr[e].disable():new Promise((function(e){return e()}))}function Mr(e,t){return Cr[e]?Cr[e].setAvatar(t):new Promise((function(e,t){return t()}))}function Ir(){Object.values(Cr).forEach((function(e){e.logout()}))}var jr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.member?r("el-dialog",{attrs:{title:"导入人物卡(beta)",visible:e.visible,width:"40%"},on:{close:e.onClose,"update:visible":function(t){return e.$emit("update:visible",t)}}},[r("input",{ref:"chooser",attrs:{type:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",value:"选择文件"},on:{change:e.handleFile}}),r("div",[e._v("当前支持的人物卡模版：COC七版人物卡v1.6.0   "),r("el-link",{attrs:{type:"primary",underline:!1,href:"/static/cocv7.xlsx"}},[e._v("点击下载")])],1),r("h3",[e._v(e._s("为玩家 "+(e.member.nameCard||e.member.nick||e.member.userID)+" 导入人物卡"))]),e.existedCard?r("el-alert",{attrs:{title:"该玩家已有人物卡，再次导入将覆盖之前的人物卡",type:"warning","show-icon":"",closable:!1}}):e._e(),e.user?r("div",{staticClass:"card-data"},[r("h3",[e._v("基本信息")]),r("div",[e._v(e._s(e.user.basic.name+" "+e.user.basic.gender+" "+e.user.basic.age+"岁 "+e.user.basic.job))]),r("div",[e._v(e._s("体力 "+e.user.basic.hp+" | 理智 "+e.user.basic.san+" | 幸运 "+e.user.basic.luck+" | 魔法 "+e.user.basic.mp))]),r("h3",[e._v("属性")]),r("div",{staticClass:"user-prop"},e._l(e.user.props,(function(t,n){return r("div",{key:n},[e._v("\n          "+e._s(n+": "+t)+"\n        ")])})),0),r("h3",[e._v("技能")]),r("div",{staticClass:"user-skill"},e._l(e.user.skills,(function(t,n){return r("div",{key:n},[e._v("\n          "+e._s(n+": "+t)+"\n        ")])})),0)]):e._e(),e.user?r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.onConfirm}},[e._v("确定导入")])],1):e._e()],1):e._e()],1)},Tr=[],Er=(r("34ef"),r("5f5c")),Dr=r.n(Er);function Sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xr={props:["groupId","memberId","visible"],data:function(){return{user:null}},computed:kr(kr({},Object(O["c"])({existedCard:function(e){return e.game.list[this.groupId]?e.game.list[this.groupId].cards["o"+this.memberId]:null},currentMemberList:function(e){return e.group.currentMemberList}})),{},{member:function(){var e=this;return this.memberId?this.currentMemberList.find((function(t){return t.userID===e.memberId})):null}}),methods:{handleFile:function(e){var t=this,r=e.target.files,n=r[0],s=new FileReader;s.onload=function(e){try{var r=new Uint8Array(e.target.result),n=Dr.a.read(r,{type:"array"}),s=n.Sheets[n.SheetNames[0]];t.user=ze(s)}catch(e){console.log(e),t.$store.commit("showMessage",{type:"error",message:"导入失败，可能是格式不正确或字段缺失"})}},s.readAsArrayBuffer(n)},onConfirm:function(){var e=this;this.$store.commit("setUserCard",{groupId:this.groupId,userId:this.member.userID,card:this.user});var t=this.tim.createCustomMessage({to:this.groupId,conversationType:this.TIM.TYPES.CONV_GROUP,priority:this.TIM.TYPES.MSG_PRIORITY_HIGH,payload:{data:JSON.stringify({mtype:"card",mdata:{userId:this.member.userID,card:this.user}}),description:"主持人为玩家“".concat(this.member.nameCard||this.member.nick||this.member.userID,"”导入了一张人物卡")}});this.$store.commit("pushCurrentMessageList",t),this.tim.sendMessage(t).then((function(){e.$store.commit("showMessage",{type:"success",message:"导入成功"})})).catch((function(){e.$store.commit("showMessage",{type:"error",message:"导入成功，但同步给其他群成员失败，可以重试"})})),this.$emit("update:visible",!1)},onClose:function(){this.$refs.chooser.value="",this.user=null}}},Ar=xr,Gr=(r("3dda"),Object(f["a"])(Ar,jr,Tr,!1,null,"483f9cbe",null)),Lr=Gr.exports,Rr=r("0304"),Nr=r.n(Rr);function Ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Br={data:function(){return{addGroupMemberVisible:!1,count:30,inviteDialogShow:!1,minacode:Nr.a,importCardMemberID:null}},props:["groupProfile"],components:{CardImport:Lr},computed:$r($r({},Object(O["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentMemberList:function(e){return e.group.currentMemberList}})),{},{showLoadMore:function(){return this.members.length<this.groupProfile.memberCount},members:function(){return this.currentMemberList},isOwner:function(){return this.groupProfile.selfInfo.role===this.TIM.TYPES.GRP_MBR_ROLE_OWNER}}),methods:{getGroupMemberAvatarText:function(e){switch(e){case"Owner":return"群主";case"Admin":return"管理员";default:return"群成员"}},getShowUserNick:function(e){return e.nameCard||e.nick||e.userID},getShowUserId:function(e){return e.userID.startsWith("bot")?"机器人":e.nameCard||e.nick?e.userID:""},isBotOfThisGroup:function(e){return this.groupProfile.groupID.replace("@TGS#","bot_")===e.userID},getInviteQRCodeUrl:function(){var e="".concat(yr(),"/").concat(this.groupProfile.groupID.replace("@TGS#",""));return"https://api.pwmqr.com/qrcode/create/?url="+e},copyInviteLink:function(){var e=this;this.$copyText("".concat(location.origin,"/#/?s=").concat(yr(),"&g=").concat(this.groupProfile.groupID.replace("@TGS#",""),"&d=\n点击链接加入群聊一起玩~")).then((function(){e.$store.commit("showMessage",{type:"success",message:"邀请链接复制成功！快发给小伙伴们一起玩吧~"})})).catch((function(t){console.log("copy link error",t),e.$store.commit("showMessage",{type:"error",message:"邀请链接复制失败"})}))},refreshGroupMember:function(){var e=this;this.$store.dispatch("getGroupMemberList",this.currentConversation.groupProfile.groupID).then((function(){e.$store.commit("showMessage",{type:"success",message:"刷新成功"})}))},setBotAvatar:function(e){var t=this;Mr(this.currentConversation.groupProfile.groupID,e).then((function(){t.$store.commit("showMessage",{message:"修改成功"})})).catch((function(e){console.log(e),t.$store.commit("showMessage",{type:"error",message:"修改头像失败，请检查是否启用机器人，未启用状态不能修改"})}))},setGroupMemberNameCard:function(e,t){var r=this;this.tim.setGroupMemberNameCard({groupID:this.currentConversation.groupProfile.groupID,userID:e,nameCard:t}).then((function(){r.$store.commit("showMessage",{message:"修改成功"})})).catch((function(e){r.$store.commit("showMessage",{type:"error",message:e.message})}))},kickoutGroupMember:function(e){var t=this;this.tim.deleteGroupMember({groupID:this.currentConversation.groupProfile.groupID,reason:"被群主踢出",userIDList:[e]}).then((function(){t.$store.commit("deleteGroupMemeber",e)})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})}))},openUserCard:function(e){var t=this;this.$store.dispatch("openUserCard",{groupId:this.currentConversation.groupProfile.groupID,userId:e}).catch((function(){t.$store.commit("showMessage",{type:"warning",message:"该成员尚未导入人物卡"})}))},handleDropdownCommand:function(e){var t=this,r=e.split(":"),n=Object(b["a"])(r,2),s=n[0],i=n[1];switch(s){case"ImportCard":this.importCardMemberID=i;break;case"SetAvatar":this.$prompt("请输入头像 URL","修改机器人头像",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"头像 URL"}).then((function(e){var r=e.value;t.setBotAvatar(r)})).catch((function(){}));break;case"SetNick":this.$prompt("请输入群名片","修改群名片",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"群名片"}).then((function(e){var r=e.value;t.setGroupMemberNameCard(i,r)})).catch((function(){}));break;case"Kick":var o=this.members.find((function(e){return e.userID===i}));this.$confirm("将".concat(this.getShowUserNick(o),"踢出群组？"),"踢出群聊",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.kickoutGroupMember(i)})).catch((function(){}));break}}}},Yr=Br,Fr=(r("69cc"),Object(f["a"])(Yr,tr,rr,!1,null,"abf188ba",null)),Vr=Fr.exports,qr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("el-button",{attrs:{type:"text"},on:{click:function(t){e.sendBgmVisible=!0}}},[e._v("设置游戏 BGM")])],1),r("div",[r("el-button",{attrs:{type:"text"},on:{click:function(t){e.sendTextVisible=!0}}},[e._v("发布文字笔记")])],1),r("div",[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$refs.noteImgPicker.click()}}},[e._v("发布图片笔记")])],1),r("input",{ref:"noteImgPicker",staticStyle:{display:"none"},attrs:{type:"file",id:"noteImgPicker",accept:".jpg, .jpeg, .png, .gif, .bmp"},on:{change:e.sendNoteImage}}),r("el-dialog",{attrs:{title:"🎵 设置 BGM",visible:e.sendBgmVisible,width:"40%"},on:{"update:visible":function(t){e.sendBgmVisible=t}}},[r("div",{staticClass:"bgm-usage"},[r("div",[e._v("设置 BGM，BGM 将对全部群员可见。如多次设置，则会覆盖之前设置的 BGM。")]),r("div",[e._v("BGM 链接需符合指定的格式。")]),r("ul",[r("li",[e._v("网易云音乐\n          "),r("ul",[r("li",[e._v("歌单："),r("span",[e._v("https://music.163.com/#/playlist?id=xxxxxxx")])]),r("li",[e._v("单曲："),r("span",[e._v("https://music.163.com/#/song?id=xxxxxxx")])]),r("li",[e._v("专辑："),r("span",[e._v("https://music.163.com/#/album?id=xxxxxxx")])])])])])]),r("el-input",{attrs:{placeholder:"请输入音乐链接"},model:{value:e.bgmLink,callback:function(t){e.bgmLink=t},expression:"bgmLink"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.sendBgmVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",disabled:0===e.bgmLink.trim().length},on:{click:e.setBgm}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"发布文字笔记",visible:e.sendTextVisible,width:"40%"},on:{"update:visible":function(t){e.sendTextVisible=t}}},[r("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.textContent,callback:function(t){e.textContent=t},expression:"textContent"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.sendTextVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",disabled:0===e.textContent.trim().length},on:{click:e.sendNoteText}},[e._v("确 定")])],1)],1)],1)},Hr=[];function Kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jr={data:function(){return{sendBgmVisible:!1,bgmLink:"",sendTextVisible:!1,textContent:""}},computed:zr({},Object(O["c"])({groupProfile:function(e){return e.conversation.currentConversation.groupProfile},currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{setBgm:function(){var e=this.bgmLink.match(/https:\/\/music\.163\.com\/#\/(playlist|song|album)\?id=(\d+)/);if(e){var t={platform:1,type:["playlist","album","song"].indexOf(e[1]),id:Number(e[2])},r=this.tim.createCustomMessage({to:this.groupProfile.groupID,conversationType:this.TIM.TYPES.CONV_GROUP,priority:this.TIM.TYPES.MSG_PRIORITY_HIGH,payload:{data:JSON.stringify({mtype:"bgm",mdata:t}),description:"主持人设置了新的 BGM，快点击右侧【重要笔记】面板查看吧"}});this._sendNoteMessage(r),this.bgmLink="",this.sendBgmVisible=!1}else this.$store.commit("showMessage",{type:"error",message:"链接格式不正确"})},sendNoteText:function(){var e=this.tim.createTextMessage({to:this.groupProfile.groupID,conversationType:this.TIM.TYPES.CONV_GROUP,priority:this.TIM.TYPES.MSG_PRIORITY_HIGH,payload:{text:this.textContent}});this._sendNoteMessage(e),this._sendGrayTipMessage("主持人发布了一条新的笔记，快点击右侧【重要笔记】面板查看吧"),this.textContent="",this.sendTextVisible=!1},sendNoteImage:function(){var e=this.tim.createImageMessage({to:this.groupProfile.groupID,conversationType:this.TIM.TYPES.CONV_GROUP,priority:this.TIM.TYPES.MSG_PRIORITY_HIGH,payload:{file:document.getElementById("noteImgPicker")}});this._sendNoteMessage(e),this._sendGrayTipMessage("主持人发布了一条新的笔记，快点击右侧【重要笔记】面板查看吧"),this.$refs.noteImgPicker.value=null},_sendNoteMessage:function(e){var t=this;this.$store.commit("pushCurrentMessageList",e),this.tim.sendMessage(e).then((function(){t.$store.dispatch("handleKPNote",[e])})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})}))},_sendGrayTipMessage:function(e){var t=this.tim.createCustomMessage({to:this.groupProfile.groupID,conversationType:this.TIM.TYPES.CONV_GROUP,payload:{data:JSON.stringify({mtype:"tip"}),description:e}});this.$store.commit("pushCurrentMessageList",t),this.tim.sendMessage(t)}}},Qr=Jr,Wr=(r("8f40"),Object(f["a"])(Qr,qr,Hr,!1,null,"2b33521c",null)),Zr=Wr.exports,Xr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-switch",{attrs:{value:e.currentGame.botEnabled,disabled:e.botSwitchLoading},on:{change:e.onBotSwitch}})},en=[];function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nn={data:function(){return{botSwitchLoading:!1}},computed:rn({},Object(O["c"])({groupID:function(e){return e.conversation.currentConversation.groupProfile.groupID},currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{onBotSwitch:function(e){var t=this;this.botSwitchLoading=!0,this.$store.dispatch("toggleBotEnabled",{groupId:this.groupID,enabled:e}).catch((function(e){t.$store.commit("showMessage",{type:"error",message:"切换机器人失败，请联系管理员"}),console.log("切换 bot 失败",e)})).finally((function(){t.botSwitchLoading=!1}))}}},sn=nn,on=Object(f["a"])(sn,Xr,en,!1,null,null,null),an=on.exports,cn={props:["groupProfile"],components:{GroupMemberList:Vr,KpActions:Zr,BotSwitch:an,ElSelect:i["Select"],ElOption:i["Option"],ElSwitch:i["Switch"]},data:function(){return{showEditName:!1,showEditFaceUrl:!1,showEditIntroduction:!1,showEditNotification:!1,showEditJoinOption:!1,showChangeGroupOwner:!1,showEditMessageRemindType:!1,showEditNameCard:!1,name:this.groupProfile.name,avatar:this.groupProfile.avatar,introduction:this.groupProfile.introduction,notification:this.groupProfile.notification,joinOption:this.groupProfile.joinOption,newOwnerUserID:"",messageRemindType:this.groupProfile.selfInfo.messageRemindType,nameCard:this.groupProfile.selfInfo.nameCard||"",muteAllMembers:this.groupProfile.muteAllMembers,messageRemindTypeMap:{AcceptAndNotify:"接收消息并提示",AcceptNotNotify:"接收消息但不提示",Discard:"屏蔽消息"},joinOptionMap:{FreeAccess:"自由加入",NeedPermission:"需要验证",DisableApply:"禁止加群"},active:!1}},computed:{editable:function(){return this.groupProfile.type===this.TIM.TYPES.GRP_WORK||[this.TIM.TYPES.GRP_MBR_ROLE_OWNER,this.TIM.TYPES.GRP_MBR_ROLE_ADMIN].includes(this.groupProfile.selfInfo.role)},isOwner:function(){return this.groupProfile.selfInfo.role===this.TIM.TYPES.GRP_MBR_ROLE_OWNER},isAdmin:function(){return this.groupProfile.selfInfo.role===this.TIM.TYPES.GRP_MBR_ROLE_ADMIN},showDissmissGroup:function(){return this.isOwner&&this.groupProfile.type!==this.TIM.TYPES.GRP_WORK},groupType:function(){switch(this.groupProfile.type){case this.TIM.TYPES.GRP_WORK:return"好友工作群（Work）";case this.TIM.TYPES.GRP_PUBLIC:return"陌生人社交群（Public）";case this.TIM.TYPES.GRP_CHATROOM:return"临时会议群（Meeting）";case this.TIM.TYPES.GRP_AVCHATROOM:return"直播群（AVChatRoom）";default:return""}}},watch:{groupProfile:function(e){Object.assign(this,{showEditName:!1,showEditFaceUrl:!1,showEditIntroduction:!1,showEditNotification:!1,showEditJoinOption:!1,showChangeGroupOwner:!1,showEditNameCard:!1,name:e.name,avatar:e.avatar,introduction:e.introduction,notification:e.notification,joinOption:e.joinOption,messageRemindType:e.messageRemindType,nameCard:e.selfInfo.nameCard||"",muteAllMembers:e.muteAllMembers})}},methods:{inputFocus:function(e){var t=this;this.$nextTick((function(){t.$refs[e].focus()}))},editName:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,name:this.name.trim()}).then((function(){e.showEditName=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editFaceUrl:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,avatar:this.avatar.trim()}).then((function(){e.showEditFaceUrl=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},changeMuteStatus:function(){var e=this;this.isOwner||this.isAdmin?this.tim.updateGroupProfile({muteAllMembers:this.muteAllMembers,groupID:this.groupProfile.groupID}).then((function(t){e.muteAllMembers=t.data.group.muteAllMembers,e.muteAllMembers?(e.active=!0,e.$store.commit("showMessage",{message:"全体禁言"})):(e.active=!1,e.$store.commit("showMessage",{message:"取消全体禁言"}))})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})):(this.muteAllMembers=this.groupProfile.muteAllMembers,this.$store.commit("showMessage",{type:"error",message:"普通群成员不能对全体禁言"}))},editIntroduction:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,introduction:this.introduction.trim()}).then((function(){e.showEditIntroduction=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editNotification:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,notification:this.notification.trim()}).then((function(){e.showEditNotification=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editJoinOption:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,joinOption:this.joinOption}).then((function(){e.showEditJoinOption=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},changeOwner:function(){var e=this;this.tim.changeGroupOwner({groupID:this.groupProfile.groupID,newOwnerID:this.newOwnerUserID}).then((function(){e.showChangeGroupOwner=!1,e.$store.commit("showMessage",{message:"转让群主成功，新群主ID：".concat(e.newOwnerUserID)}),e.newOwnerUserID=""})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},quitGroup:function(){var e=this;this.tim.quitGroup(this.groupProfile.groupID).then((function(t){var r=t.data.groupID;e.$store.commit("showMessage",{message:"退群成功"}),r===e.groupProfile.groupID&&e.$store.commit("resetCurrentConversation")})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},dismissGroup:function(){var e=this;this.tim.dismissGroup(this.groupProfile.groupID).then((function(t){var r=t.data.groupID;e.$store.commit("showMessage",{message:"群：".concat(e.groupProfile.name||e.groupProfile.groupID,"解散成功！"),type:"success"}),r===e.groupProfile.groupID&&e.$store.commit("resetCurrentConversation")})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editMessageRemindType:function(){var e=this;this.tim.setMessageRemindType({groupID:this.groupProfile.groupID,messageRemindType:this.messageRemindType}).then((function(){e.showEditMessageRemindType=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editNameCard:function(){var e=this;0!==this.nameCard.trim().length?this.tim.setGroupMemberNameCard({groupID:this.groupProfile.groupID,nameCard:this.nameCard.trim()}).then((function(){e.showEditNameCard=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})):this.$store.commit("showMessage",{message:"不能设置空的群名片",type:"warning"})}}},un=cn,ln=(r("0716"),Object(f["a"])(un,Xt,er,!1,null,null,null)),pn=ln.exports,mn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile-user"},[r("avatar",{attrs:{title:e.userProfile.userID,src:e.userProfile.avatar}}),r("div",{staticClass:"nick-name text-ellipsis"},[e.userProfile.nick?r("span",{attrs:{title:e.userProfile.nick}},[e._v("\n      "+e._s(e.userProfile.nick)+"\n    ")]):r("span",{staticClass:"anonymous",attrs:{title:"该用户未设置昵称"}},[e._v("\n      [Anonymous]\n    ")])]),e.genderClass?r("div",{staticClass:"gender"},[r("span",{staticClass:"iconfont",class:e.genderClass,attrs:{title:e.gender}})]):e._e(),e.isInBlacklist||e.userProfile.userID===e.myUserID?e.isInBlacklist?r("el-button",{attrs:{title:"将该用户移出黑名单",type:"text"},on:{click:e.removeFromBlacklist}},[e._v("移出黑名单")]):e._e():r("el-button",{staticClass:"btn-add-blacklist",attrs:{title:"将该用户加入黑名单",type:"text"},on:{click:e.addToBlackList}},[e._v("加入黑名单")])],1)},fn=[];function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gn={props:{userProfile:{type:Object,required:!0}},computed:hn(hn({},Object(O["c"])({blacklist:function(e){return e.blacklist.blacklist},myUserID:function(e){return e.user.currentUserProfile.userID}})),{},{isInBlacklist:function(){var e=this;return this.blacklist.findIndex((function(t){return t.userID===e.userProfile.userID}))>=0},gender:function(){switch(this.userProfile.gender){case this.TIM.TYPES.GENDER_MALE:return"男";case this.TIM.TYPES.GENDER_FEMALE:return"女";default:return"未设置"}},genderClass:function(){switch(this.userProfile.gender){case this.TIM.TYPES.GENDER_MALE:return"icon-male";case this.TIM.TYPES.GENDER_FEMALE:return"icon-female";default:return""}}}),methods:{addToBlackList:function(){var e=this;this.tim.addToBlacklist({userIDList:[this.userProfile.userID]}).then((function(){e.$store.dispatch("getBlacklist")})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},removeFromBlacklist:function(){var e=this;this.tim.removeFromBlacklist({userIDList:[this.userProfile.userID]}).then((function(){e.$store.commit("removeFromBlacklist",e.userProfile.userID)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))}}},vn=gn,bn=(r("873f"),Object(f["a"])(vn,mn,fn,!1,null,"f157254a",null)),yn=bn.exports;function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wn={name:"ConversationProfile",components:{GroupProfile:pn,UserProfile:yn},data:function(){return{}},computed:Cn({},Object(O["c"])({currentConversation:function(e){return e.conversation.currentConversation}}))},Pn=wn,_n=(r("a65e"),Object(f["a"])(Pn,Wt,Zt,!1,null,"7e59049a",null)),Mn=_n.exports,In=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"el-fade-in"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"member-profile-card",staticClass:"member-profile-card-wrapper",style:{top:e.y+"px",left:e.x+"px"}},[r("div",{staticClass:"profile"},[r("avatar",{staticClass:"avatar",attrs:{src:e.member.avatar}}),r("div",{staticClass:"basic"},[r("span",[e._v("ID："+e._s(e.member.userID))]),r("span",[e._v("昵称："+e._s(e.member.nick||"暂无"))])])],1),r("el-divider",{staticClass:"divider"}),r("div",{staticClass:"member-profile"},[r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("群名片")]),e._v("\n        "+e._s(e.member.nameCard||"暂无")+"\n      ")]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("入群时间")]),e._v("\n        "+e._s(e.joinTime)+"\n      ")]),e.member.muteUntil?r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("禁言至")]),e._v("\n        "+e._s(e.muteUntil)+"\n      ")]):e._e()]),r("el-button",{staticClass:"send-message-btn",attrs:{type:"primary",size:"mini",title:"发消息",icon:"el-icon-message",circle:""},on:{click:e.handleSendMessage}})],1)])},jn=[],Tn={name:"MemberProfileCard",components:{ElDivider:i["Divider"]},data:function(){return{member:{},x:0,y:0,visible:!1}},mounted:function(){this.$bus.$on("showMemberProfile",this.handleShowMemberProfile,this)},computed:{joinTime:function(){return this.member.joinTime?Z(new Date(1e3*this.member.joinTime)):""},muteUntil:function(){return this.member.muteUntil?Z(new Date(1e3*this.member.muteUntil)):""}},methods:{handleSendMessage:function(){this.$store.dispatch("checkoutConversation","C2C".concat(this.member.userID)),this.hide()},handleShowMemberProfile:function(e){var t=e.event,r=e.member;this.member=r||{},this.x=t.x,this.y=t.y,this.show()},show:function(){this.visible||(window.addEventListener("click",this.handleClick,this),this.visible=!0)},hide:function(){this.visible&&(window.removeEventListener("click",this.handleClick,this),this.visible=!1)},handleClick:function(e){e.target!==this.$refs["member-profile-card"]&&this.hide()}}},En=Tn,Dn=(r("29bd"),Object(f["a"])(En,In,jn,!1,null,"1012cb30",null)),Sn=Dn.exports,kn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-tabs",{staticClass:"group-right-panels",attrs:{value:e.currentGame.currentTab,type:"card"},on:{input:function(t){return e.$store.commit("setCurrentTab",{groupId:e.currentConversation.groupProfile.groupID,tab:t})},"tab-click":e.handleClick,"tab-remove":e.handleRemove}},[e._l(e.allTabs,(function(t){return["group"===t?r("el-tab-pane",{key:t,attrs:{label:"群信息",name:t}},[r("group-profile",{attrs:{groupProfile:e.currentConversation.groupProfile}})],1):"note"===t?r("el-tab-pane",{key:t,attrs:{name:t}},[r("el-badge",{attrs:{slot:"label","is-dot":"",hidden:!e.currentGame.noteUnread},slot:"label"},[e._v("重要笔记")]),r("note-panel",{attrs:{"group-profile":e.currentConversation.groupProfile}})],1):"log"===t?r("el-tab-pane",{key:t,attrs:{label:"Log 录制",name:t}},[r("log-panel",{attrs:{"group-profile":e.currentConversation.groupProfile}})],1):r("el-tab-pane",{key:t,attrs:{label:e.getCardName(t),name:t,closable:!0}},[r("card-panel",{attrs:{member:t}})],1)]}))],2)},xn=[],An=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"log-switch"},[r("div",{staticClass:"label"},[e._v("启用 Log")]),r("el-switch",{attrs:{value:e.currentGame.logEnabled},on:{input:function(t){return e.$store.commit("toggleLogEnabled",{groupId:e.groupProfile.groupID,enabled:t})}}})],1),r("div",{staticClass:"btn-container"},[r("el-button-group",[r("el-button",{attrs:{size:"small"},on:{click:e.exportText}},[e._v("导出为文本")]),r("el-button",{attrs:{size:"small"},on:{click:e.exportHTML}},[e._v("导出为HTML")]),r("el-button",{attrs:{size:"small"},on:{click:e.exportJson}},[e._v("导出为JSON")]),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.clearAllLogs}},[e._v("清空")])],1)],1),r("draggable",{staticClass:"log-container",attrs:{handle:".handle","ghost-class":"moving",value:e.currentGame.logs},on:{input:function(t){return e.$store.commit("updateLogs",{groupId:e.groupProfile.groupID,logs:t})}}},e._l(e.currentGame.logs,(function(t){return r("div",{key:t.id,staticClass:"log-item"},[r("div",[r("i",{staticClass:"el-icon-rank handle"}),r("div",{staticClass:"nick",attrs:{title:t.from}},[e._v(e._s(t.nick||t.from))]),r("div",{staticClass:"content",attrs:{title:e.formatTime(t.time)}},[e._v(e._s(t.content))])]),r("i",{staticClass:"el-icon-close delete",on:{click:function(r){return e.onDeleteLog(t.id)}}})])})),0)],1)},Gn=[],Ln=r("b76a"),Rn=r.n(Ln);function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $n="\n.chat-item {\n    padding: 4px;\n}\n\n.chat-item-name {\n    font-weight: bold;\n}\n\n.chat-user-bot {\n    background-color: #ffffe0;\n}\n/* xxx 替换成实际的 userid */\n.chat-user-xxx {\n    background-color: #e0ffff;\n}",Bn={props:["groupProfile"],components:{ElSwitch:i["Switch"],draggable:Rn.a},computed:Un({},Object(O["c"])({currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{formatTime:function(e){return Z(new Date(1e3*e))},onDeleteLog:function(e){this.$store.commit("updateLogs",{groupId:this.groupProfile.groupID,logs:this.currentGame.logs.filter((function(t){return t.id!==e}))})},clearAllLogs:function(){this.$store.commit("updateLogs",{groupId:this.groupProfile.groupID,logs:[]})},exportText:function(){var e=this,t="",r="";this.currentGame.logs.forEach((function(n){var s=n.nick||n.from;s!==t&&(r+="".concat(s," ").concat(e.formatTime(n.time),"\n")),r+=n.content+"\n",t=s})),this.download("text",r)},exportHTML:function(){var e=this,t="",r="";this.currentGame.logs.forEach((function(n){var s=n.nick||n.from;s!==t?(""!==r&&(r+="</div>"),r+="<div class='chat-item chat-user-".concat(n.from,"'>")+"<div class='meta'><span class='chat-item-name'>".concat(s,"</span>")+"<span class='chat-item-time'>".concat(e.formatTime(n.time),"</span>")+"</div><div class='content'>".concat(n.content,"</div>")):r+="<div class='content'>".concat(n.content,"</div>"),t=s})),""!==r&&(r+="</div>"),r+="<style>".concat($n,"</style>"),this.download("html",r)},exportJson:function(){this.download("json",JSON.stringify(this.currentGame.logs))},download:function(e,t){var r=document.createElement("a");r.setAttribute("href","data:".concat(e,"/plain;charset=utf-8,")+encodeURIComponent(t)),r.setAttribute("download","log.".concat("text"===e?"txt":e)),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}},Yn=Bn,Fn=(r("b371"),Object(f["a"])(Yn,An,Gn,!1,null,"282200b2",null)),Vn=Fn.exports,qn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-alert",{attrs:{title:"主持人发布的重要笔记将会显示在这里",type:"info",description:"你也可以把自己觉得重要的消息收藏在这里（敬请期待）","show-icon":""}}),r("bgm",{attrs:{bgm:e.currentGame.bgm}}),r("draggable",{staticClass:"card-list",attrs:{"ghost-class":"moving",value:e.currentGame.notes},on:{input:function(t){return e.$store.commit("updateNotes",{groupId:e.groupProfile.groupID,notes:t})}}},e._l(e.currentGame.notes,(function(t){return r("el-card",{key:t.id,staticClass:"card",attrs:{shadow:"hover"}},[t.type===e.TIM.TYPES.MSG_TEXT?r("div",{staticClass:"note-text"},[e._v(e._s(t.payload))]):t.type===e.TIM.TYPES.MSG_IMAGE?r("img",{staticClass:"note-img",attrs:{src:e.formatUrl(t.payload)},on:{click:function(r){return e.handlePreview(t.payload)}}}):e._e(),r("div",{staticClass:"tools"},[r("el-button",{attrs:{icon:"el-icon-copy-document",size:"mini",circle:""},on:{click:function(r){return e.handleCopyCard(t.payload)}}}),r("el-button",{attrs:{icon:"el-icon-close",size:"mini",circle:""},on:{click:function(r){return e.handleDelete(t.id)}}})],1)])})),1)],1)},Hn=[],Kn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return 1===e.bgm.platform?r("iframe",{key:e.bgm.id,staticClass:"player",attrs:{frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",height:2===e.bgm.type?110:235,src:"//music.163.com/outchain/player?type="+e.bgm.type+"&id="+e.bgm.id}}):e._e()},zn=[],Jn={props:["bgm"]},Qn=Jn,Wn=(r("831a"),Object(f["a"])(Qn,Kn,zn,!1,null,"33e8d0dc",null)),Zn=Wn.exports;function Xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ts={props:["groupProfile"],components:{bgm:Zn,draggable:Rn.a},computed:es({},Object(O["c"])({currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{formatUrl:function(e){return"//"===e.slice(0,2)?"https:".concat(e):e},handlePreview:function(e){this.$bus.$emit("image-preview",{url:e})},handleCopyCard:function(e){var t=this;this.$copyText(e).then((function(){t.$store.commit("showMessage",{type:"success",message:"复制成功"})}))},handleDelete:function(e){var t=this.currentGame.notes.filter((function(t){return t.id!==e}));this.$store.commit("updateNotes",{groupId:this.groupProfile.groupID,notes:t})}}},rs=ts,ns=(r("7f69"),Object(f["a"])(rs,qn,Hn,!1,null,"5cb73abc",null)),ss=ns.exports,is=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"20px"}},[r("div",{staticClass:"simple-info"},[r("div",[e._v(e._s(e.currentCard.basic.name))]),r("div",[e._v(e._s(e.currentCard.basic.gender))]),r("div",[e._v(e._s(e.currentCard.basic.age+"岁"))]),r("div",[e._v(e._s(e.currentCard.basic.job))])]),e._m(0),r("el-table",{attrs:{data:[e.currentCard.basic],"row-class-name":"row","header-row-class-name":"row"},on:{"cell-click":e.onBasicClick}},[r("el-table-column",{attrs:{prop:"hp",label:"体力"}}),r("el-table-column",{attrs:{prop:"san",label:"理智"}}),r("el-table-column",{attrs:{prop:"luck",label:"幸运"}}),r("el-table-column",{attrs:{prop:"mp",label:"魔法"}})],1),r("div",{staticClass:"section"},[r("h4",{staticClass:"section-title"},[e._v("基础属性")]),r("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"","prefix-icon":"el-icon-search",size:"mini"},model:{value:e.searchProp,callback:function(t){e.searchProp=t},expression:"searchProp"}})],1),r("el-table",{attrs:{data:e.filterProps(),stripe:"","row-class-name":"row","header-row-class-name":"row"},on:{"cell-click":e.onCellClick}},[r("el-table-column",{attrs:{prop:"name",label:"属性"}}),r("el-table-column",{attrs:{prop:"value",sortable:"",label:"%"}}),r("el-table-column",{attrs:{label:"半值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Math.floor(t.row.value/2)))]}}])}),r("el-table-column",{attrs:{label:"1/5值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Math.floor(t.row.value/5)))]}}])})],1),r("div",{staticClass:"section"},[r("h4",{staticClass:"section-title"},[e._v("技能表")]),r("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"","prefix-icon":"el-icon-search",size:"mini"},model:{value:e.searchSkill,callback:function(t){e.searchSkill=t},expression:"searchSkill"}})],1),r("el-table",{attrs:{data:e.filterSkills(),stripe:"","row-class-name":"row","header-row-class-name":"row"},on:{"cell-click":e.onCellClick}},[r("el-table-column",{attrs:{type:"selection",width:"30","class-name":"select-col"}}),r("el-table-column",{attrs:{prop:"name",label:"属性",width:"105"}}),r("el-table-column",{attrs:{prop:"value",sortable:"",label:"%"}}),r("el-table-column",{attrs:{label:"半值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Math.floor(t.row.value/2)))]}}])}),r("el-table-column",{attrs:{label:"1/5值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(Math.floor(t.row.value/5)))]}}])})],1)],1)},os=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tips"},[e._v("点击下方对应的数值格子可以快速投骰；\n    "),r("br"),e._v("点击属性名称可以复制；\n    "),r("br"),e._v("点击表头可以将属性和技能按成功率排序；\n    "),r("br"),e._v("可按中文或拼音首字母搜索。\n  ")])}],as=r("a095"),cs=r.n(as);function us(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ls(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?us(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):us(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ps={props:["member"],data:function(){return{searchProp:"",searchSkill:""}},computed:ls(ls({},Object(O["c"])({currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]},currentCard:function(){return this.currentGame.cards["o"+this.member]}})),{},{props:function(){var e=this;return Object.keys(this.currentCard.props).map((function(t){return{name:t,value:e.currentCard.props[t],pinyin:cs.a.spell(t,"first","low")}}))},skills:function(){var e=this;return Object.keys(this.currentCard.skills).map((function(t){return{name:t,value:e.currentCard.skills[t],pinyin:cs.a.spell(t,"first","low")}}))}}),methods:{filterProps:function(){var e=this;return""===this.searchProp?this.props:this.props.filter((function(t){return t.name.includes(e.searchProp)||t.pinyin.includes(e.searchProp.toLowerCase())}))},filterSkills:function(){var e=this;return""===this.searchSkill?this.skills:this.skills.filter((function(t){return t.name.includes(e.searchSkill)||t.pinyin.includes(e.searchSkill.toLowerCase())}))},onCellClick:function(e,t){var r=this;if("属性"!==t.label){var n="半值"===t.label?"困难":"1/5值"===t.label?"极难":"",s=document.getElementById("ghost-message-send-box");s.innerText=".d% "+n+e.name,s.click()}else this.$copyText(e.name).then((function(){r.$store.commit("showMessage",{type:"success",message:"复制成功"})}))},onBasicClick:function(e,t){if("理智"===t.label||"幸运"===t.label){var r=document.getElementById("ghost-message-send-box");r.innerText=".d% "+t.label,r.click()}}}},ms=ps,fs=(r("d2b0"),Object(f["a"])(ms,is,os,!1,null,"e8acf376",null)),ds=fs.exports,hs=r("aa47");function gs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bs={name:"RightPanel",components:{LogPanel:Vn,NotePanel:ss,CardPanel:ds,GroupProfile:pn},data:function(){return{activeName:"group"}},computed:vs({},Object(O["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]},allTabs:function(){return this.currentGame.openedCards}})),mounted:function(){var e=this,t=document.querySelector(".group-right-panels div[role=tablist]");hs["a"].create(t,{onEnd:function(t){var r=t.newIndex,n=t.oldIndex,s=e.allTabs.splice(n,1)[0];e.allTabs.splice(r,0,s),e.$store.commit("setOpenedUserCards",{groupId:e.currentConversation.groupProfile.groupID,list:e.allTabs})}})},methods:{handleClick:function(e){"note"===e.name&&this.$store.commit("setNoteUnread",{groupId:this.currentConversation.groupProfile.groupID,unread:!1})},handleRemove:function(e){this.$store.dispatch("closeUserCard",{groupId:this.currentConversation.groupProfile.groupID,userId:e})},getCardName:function(e){return this.currentGame.cards["o"+e].basic.name}}},ys=bs,Os=(r("3e62"),Object(f["a"])(ys,kn,xn,!1,null,"5f0bd0fa",null)),Cs=Os.exports;function ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ws(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _s={name:"CurrentConversation",components:{MessageSendBox:U,MessageItem:Qt,ConversationProfile:Mn,MemberProfileCard:Sn,RightPanel:Cs},data:function(){return{isShowScrollButtomTips:!1,preScrollHeight:0,showConversationProfile:!0,timeout:""}},computed:Ps(Ps(Ps({},Object(O["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUnreadCount:function(e){return e.conversation.currentConversation.unreadCount},currentMessageList:function(e){return e.conversation.currentMessageList},isCompleted:function(e){return e.conversation.isCompleted}})),Object(O["b"])(["toAccount","hidden"])),{},{showCurrentConversation:function(){return!!this.currentConversation.conversationID},name:function(){return"C2C"===this.currentConversation.type?this.currentConversation.userProfile.nick||this.toAccount:"GROUP"===this.currentConversation.type?this.currentConversation.groupProfile.name||this.toAccount:"@TIM#SYSTEM"===this.currentConversation.conversationID?"系统通知":this.toAccount},showMessageSendBox:function(){return this.currentConversation.type!==this.TIM.TYPES.CONV_SYSTEM}}),mounted:function(){if(this.$bus.$on("image-loaded",this.onImageLoaded),this.$bus.$on("scroll-bottom",this.scrollMessageListToButtom),"@TIM#SYSTEM"===this.currentConversation.conversationID)return!1},updated:function(){this.keepMessageListOnButtom()},watch:{currentUnreadCount:function(e){!this.hidden&&e>0&&this.tim.setMessageRead({conversationID:this.currentConversation.conversationID})},hidden:function(e){!e&&this.currentUnreadCount>0&&this.tim.setMessageRead({conversationID:this.currentConversation.conversationID})}},methods:{onScroll:function(e){var t=e.target.scrollTop,r=this.$refs["message-list"];r&&this.preScrollHeight-r.clientHeight-t<20&&(this.isShowScrollButtomTips=!1)},keepMessageListOnButtom:function(){var e=this.$refs["message-list"];e&&(this.preScrollHeight-e.clientHeight-e.scrollTop<20?(this.$nextTick((function(){e.scrollTop=e.scrollHeight})),this.isShowScrollButtomTips=!1):this.isShowScrollButtomTips=!0,this.preScrollHeight=e.scrollHeight)},scrollMessageListToButtom:function(){var e=this;this.$nextTick((function(){var t=e.$refs["message-list"];t&&(t.scrollTop=t.scrollHeight,e.preScrollHeight=t.scrollHeight,e.isShowScrollButtomTips=!1)}))},showMore:function(){this.showConversationProfile=!this.showConversationProfile},onImageLoaded:function(){this.keepMessageListOnButtom()}}},Ms=_s,Is=(r("4c27"),Object(f["a"])(Ms,C,w,!1,null,"44982faf",null)),js=Is.exports,Ts=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"side-bar-wrapper"},[r("div",{staticClass:"bar-left"},[r("div",{staticClass:"tab-items",on:{click:e.handleClick}},[r("div",{staticClass:"iconfont icon-conversation",class:{active:e.showConversationList},attrs:{id:"conversation-list",title:"会话列表"}},[0!==e.totalUnreadCount?r("sup",{staticClass:"unread"},[e.totalUnreadCount>99?[e._v("99+")]:[e._v(e._s(e.totalUnreadCount))]],2):e._e()]),r("div",{staticClass:"iconfont icon-group",class:{active:e.showGroupList},attrs:{id:"group-list",title:"群组列表"}}),r("div",{staticClass:"iconfont icon-blacklist",class:{active:e.showBlackList},attrs:{id:"black-list",title:"黑名单列表"}})]),r("div",{staticClass:"bottom"},[r("div",{staticClass:"iconfont icon-zidingyi",attrs:{title:"设置"},on:{click:function(t){e.globalSettingsVisible=!0}}}),r("global-setting",{attrs:{visible:e.globalSettingsVisible},on:{"update:visible":function(t){e.globalSettingsVisible=t}}}),r("div",{staticClass:"iconfont icon-tuichu",attrs:{title:"退出"},on:{click:e.handleExit}})],1)]),r("div",{staticClass:"bar-right"},[r("conversation-list",{directives:[{name:"show",rawName:"v-show",value:e.showConversationList,expression:"showConversationList"}]}),r("group-list",{directives:[{name:"show",rawName:"v-show",value:e.showGroupList,expression:"showGroupList"}]}),r("friend-list",{directives:[{name:"show",rawName:"v-show",value:e.showFriendList,expression:"showFriendList"}]}),r("black-list",{directives:[{name:"show",rawName:"v-show",value:e.showBlackList,expression:"showBlackList"}]})],1)])},Es=[],Ds=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list-container"},[r("div",{staticClass:"scroll-container"},e._l(e.conversationList,(function(e){return r("conversation-item",{key:e.conversationID,attrs:{conversation:e}})})),1)])},Ss=[],ks=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"conversation-item-container",class:{choose:e.conversation.conversationID===e.currentConversation.conversationID},on:{click:e.selectConversation}},[r("div",{staticClass:"close-btn"},[r("span",{staticClass:"tim-icon-close",attrs:{title:"删除会话"},on:{click:e.deleteConversation}})]),r("div",{staticClass:"warp"},[r("avatar",{attrs:{src:e.avatar,type:e.conversation.type}}),r("div",{staticClass:"content"},[r("div",{staticClass:"row-1"},[r("div",{staticClass:"name"},[r("div",{staticClass:"text-ellipsis"},[e.conversation.type===e.TIM.TYPES.CONV_C2C?r("span",{attrs:{title:e.conversation.userProfile.nick||e.conversation.userProfile.userID}},[e._v(e._s(e.conversation.userProfile.nick||e.conversation.userProfile.userID)+"\n            ")]):e.conversation.type===e.TIM.TYPES.CONV_GROUP?r("span",{attrs:{title:e.conversation.groupProfile.name||e.conversation.groupProfile.groupID}},[e._v(e._s(e.conversation.groupProfile.name||e.conversation.groupProfile.groupID)+"\n            ")]):e.conversation.type===e.TIM.TYPES.CONV_SYSTEM?r("span",[e._v("系统通知\n            ")]):e._e()])]),r("div",{staticClass:"unread-count"},[e.showUnreadCount?r("span",{staticClass:"badge"},[e._v("\n            "+e._s(e.conversation.unreadCount>99?"99+":e.conversation.unreadCount)+"\n          ")]):e._e()])]),r("div",{staticClass:"row-2"},[r("div",{staticClass:"summary"},[e.conversation.lastMessage?r("div",{staticClass:"text-ellipsis"},[e.hasMessageAtMe?r("span",{staticClass:"remind",staticStyle:{color:"red"}},[e._v("[有人提到我]")]):e._e(),r("span",{staticClass:"text",attrs:{title:e.conversation.lastMessage.messageForShow}},[e._v("\n              "+e._s(e.messageForShow)+"\n            ")])]):e._e()]),r("div",{staticClass:"date"},[e._v("\n          "+e._s(e.date)+"\n        ")])])])],1)])},xs=[];function As(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?As(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):As(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ls={name:"conversation-item",props:["conversation"],data:function(){return{popoverVisible:!1,hasMessageAtMe:!1}},computed:Gs(Gs({showUnreadCount:function(){return(this.$store.getters.hidden||this.currentConversation.conversationID!==this.conversation.conversationID)&&this.conversation.unreadCount>0},date:function(){if(!this.conversation.lastMessage||!this.conversation.lastMessage.lastTime)return"";var e=new Date(1e3*this.conversation.lastMessage.lastTime);return X(e)?W(e):Q(e)},avatar:function(){switch(this.conversation.type){case"GROUP":return this.conversation.groupProfile.avatar;case"C2C":return this.conversation.userProfile.avatar;default:return""}},conversationName:function(){return this.conversation.type===this.TIM.TYPES.CONV_C2C?this.conversation.userProfile.nick||this.conversation.userProfile.userID:this.conversation.type===this.TIM.TYPES.CONV_GROUP?this.conversation.groupProfile.name||this.conversation.groupProfile.groupID:this.conversation.type===this.TIM.TYPES.CONV_SYSTEM?"系统通知":""},showGrayBadge:function(){return this.conversation.type===this.TIM.TYPES.CONV_GROUP&&"AcceptNotNotify"===this.conversation.groupProfile.selfInfo.messageRemindType},messageForShow:function(){return this.conversation.lastMessage.isRevoked?this.conversation.lastMessage.fromAccount===this.currentUserProfile.userID?"你撤回了一条消息":this.conversation.type===this.TIM.TYPES.CONV_C2C?"对方撤回了一条消息":"".concat(this.conversation.lastMessage.fromAccount,"撤回了一条消息"):this.conversation.lastMessage.messageForShow}},Object(O["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUserProfile:function(e){return e.user.currentUserProfile}})),Object(O["b"])(["toAccount"])),mounted:function(){var e=this;this.$bus.$on("new-messsage-at-me",(function(t){t.data.conversationID===e.conversation.conversationID&&e.conversation.conversationID!==e.currentConversation.conversationID&&(e.hasMessageAtMe=!0)}))},methods:{selectConversation:function(){this.conversation.conversationID!==this.currentConversation.conversationID&&this.$store.dispatch("checkoutConversation",this.conversation.conversationID)},deleteConversation:function(e){var t=this;e.stopPropagation(),this.tim.deleteConversation(this.conversation.conversationID).then((function(){t.$store.commit("showMessage",{message:"会话【".concat(t.conversationName,"】删除成功!"),type:"success"}),t.popoverVisible=!1,t.$store.commit("resetCurrentConversation")})).catch((function(e){t.$store.commit("showMessage",{message:"会话【".concat(t.conversationName,"】删除失败!, error=").concat(e.message),type:"error"}),t.popoverVisible=!1}))},showContextMenu:function(){this.popoverVisible=!0}},watch:{currentConversation:function(e){e.conversationID===this.conversation.conversationID&&(this.hasMessageAtMe=!1)}}},Rs=Ls,Ns=(r("15aa"),Object(f["a"])(Rs,ks,xs,!1,null,"1e828726",null)),Us=Ns.exports;function $s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$s(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ys={name:"ConversationList",components:{ConversationItem:Us},data:function(){return{showDialog:!1,userID:"",isCheckouting:!1,timeout:null}},computed:Bs({},Object(O["c"])({conversationList:function(e){return e.conversation.conversationList},currentConversation:function(e){return e.conversation.currentConversation}})),mounted:function(){window.addEventListener("keydown",this.handleKeydown)},destroyed:function(){window.removeEventListener("keydown",this.handleKeydown)},methods:{handleRefresh:function(){this.refreshConversation()()},refreshConversation:function(){var e=this;return function(){e.timeout||(e.timeout=setTimeout((function(){e.timeout=null,e.tim.getConversationList().then((function(){e.$store.commit("showMessage",{message:"刷新成功",type:"success"})}))}),1e3))}},handleAddButtonClick:function(){this.showDialog=!0},handleKeydown:function(e){var t=this;if(!(38!==e.keyCode&&40!==e.keyCode||this.isCheckouting)){var r=this.conversationList.findIndex((function(e){return e.conversationID===t.currentConversation.conversationID}));38===e.keyCode&&r-1>=0&&this.checkoutPrev(r),40===e.keyCode&&r+1<this.conversationList.length&&this.checkoutNext(r)}},checkoutPrev:function(e){var t=this;this.isCheckouting=!0,this.$store.dispatch("checkoutConversation",this.conversationList[e-1].conversationID).then((function(){t.isCheckouting=!1})).catch((function(){t.isCheckouting=!1}))},checkoutNext:function(e){var t=this;this.isCheckouting=!0,this.$store.dispatch("checkoutConversation",this.conversationList[e+1].conversationID).then((function(){t.isCheckouting=!1})).catch((function(){t.isCheckouting=!1}))}}},Fs=Ys,Vs=(r("c16a"),Object(f["a"])(Fs,Ds,Ss,!1,null,"ce3bcfe8",null)),qs=Vs.exports,Hs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list-container"},[r("div",{staticClass:"group-container"},e._l(e.groupList,(function(e){return r("group-item",{key:e.groupID,attrs:{group:e}})})),1)])},Ks=[],zs=(r("96cf"),r("3b8d")),Js=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"createGroupForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"群名称",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"群头像地址"}},[r("el-input",{model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1)],1),r("div",{staticClass:"dialog-footer",style:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeCreateGroupModel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("createGroupForm")}}},[e._v("立即创建")])],1)],1)},Qs=[];function Ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ws(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xs={components:{ElForm:i["Form"],ElFormItem:i["FormItem"],ElInput:i["Input"],ElSelect:i["Select"],ElOption:i["Option"],ElRadioGroup:i["RadioGroup"],ElRadio:i["Radio"]},data:function(){return{form:{groupID:"",name:"",type:this.TIM.TYPES.GRP_PUBLIC,avatar:"",introduction:"",notification:"",joinOption:"FreeAccess",memberList:[]},options:[],loading:!1,rules:{name:[{required:!0,message:"请输入群名称",trigger:"blur"}]}}},computed:{joinOptionDisabled:function(){return[this.TIM.TYPES.GRP_WORK,this.TIM.TYPES.GRP_MEETING,this.TIM.TYPES.GRP_AVCHATROOM].includes(this.form.type)}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.createGroup()}))},closeCreateGroupModel:function(){this.$store.commit("updateCreateGroupModelVisible",!1)},createGroup:function(){var e=this;this.tim.createGroup(this.getOptions()).then((function(t){e.$store.commit("showMessage",{message:"群组：【".concat(t.data.group.name,"】创建成功"),type:"success"}),e.closeCreateGroupModel()})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},getOptions:function(){var e=Zs(Zs({},this.form),{},{memberList:this.form.memberList.map((function(e){return{userID:e}}))});return[this.TIM.TYPES.GRP_WORK,this.TIM.TYPES.GRP_AVCHATROOM].includes(this.form.type)&&delete e.joinOption,e},handleSearchUser:function(e){var t=this;""!==e&&(this.loading=!0,this.tim.getUserProfile({userIDList:[e]}).then((function(e){var r=e.data;t.options=r.map((function(e){return e.userID})),t.loading=!1})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})})))}}},ei=Xs,ti=Object(f["a"])(ei,Js,Qs,!1,null,"50ee1526",null),ri=ti.exports,ni=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"scroll-container",on:{click:e.handleGroupClick}},[r("div",{staticClass:"group-item"},[r("avatar",{attrs:{src:e.group.avatar}}),r("div",{staticClass:"group-name text-ellipsis"},[e._v(e._s(e.group.name))])],1)])},si=[],ii={props:["group"],data:function(){return{visible:!1,options:[{text:"退出群组",handler:this.quitGroup}]}},methods:{handleGroupClick:function(){var e="GROUP".concat(this.group.groupID);this.$store.dispatch("checkoutConversation",e)},quitGroup:function(){var e=this;this.tim.quitGroup(this.group.groupID).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))}}},oi=ii,ai=(r("2054"),Object(f["a"])(oi,ni,si,!1,null,"64a02b1a",null)),ci=ai.exports;function ui(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function li(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ui(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pi={data:function(){return{groupID:"",hideSearchLoading:!0}},components:{GroupItem:ci,ElDialog:i["Dialog"],CreateGroup:ri,ElAutocomplete:i["Autocomplete"]},computed:li({groupList:function(){return this.$store.state.group.groupList}},Object(O["c"])({createGroupModelVisible:function(e){return e.group.createGroupModelVisible}})),methods:{onGroupUpdated:function(e){this.$store.dispatch("updateGroupList",e)},createGroup:function(){},closeCreateGroupModel:function(){this.$store.commit("updateCreateGroupModelVisible",!1)},searchGroupByID:function(e,t){var r=this;e.trim().length>0?(this.hideSearchLoading=!1,this.tim.searchGroupByID(e).then((function(e){var r=e.data.group;t([r])})).catch((function(){r.$store.commit("showMessage",{message:"没有找到该群",type:"error"})}))):this.hideSearchLoading=!0},showCreateGroupModel:function(){this.$store.commit("updateCreateGroupModelVisible",!0)},applyJoinGroup:function(e){var t=this;this.tim.joinGroup({groupID:e.groupID}).then(function(){var e=Object(zs["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=r.data.status,e.next=e.t0===t.TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL?3:e.t0===t.TIM.TYPES.JOIN_STATUS_SUCCESS?5:e.t0===t.TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP?9:11;break;case 3:return t.$store.commit("showMessage",{message:"申请成功，等待群管理员确认。",type:"info"}),e.abrupt("break",12);case 5:return e.next=7,t.$store.dispatch("checkoutConversation","GROUP".concat(r.data.group.groupID));case 7:return t.$store.commit("showMessage",{message:"加群成功",type:"success"}),e.abrupt("break",12);case 9:return t.$store.commit("showMessage",{message:"您已经是群成员了，请勿重复加群哦！",type:"info"}),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$store.commit("showMessage",{message:e.message,type:"error"})}))}}},mi=pi,fi=(r("7ba6"),Object(f["a"])(mi,Hs,Ks,!1,null,"4dedbdfc",null)),di=fi.exports,hi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"friend-list-container",class:{default:!e.hasFriend}},[e.hasFriend?r("div",e._l(e.friendList,(function(e){return r("friend-item",{key:e.userID,attrs:{friend:e}})})),1):r("div",{staticStyle:{color:"gray"}},[e._v("暂无好友")])])},gi=[],vi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{staticClass:"friend-item-container"},[r("el-col",{attrs:{span:6}},[r("avatar",{attrs:{src:e.friend.profile.avatar}})],1),r("el-col",{attrs:{span:18}},[r("div",{staticClass:"friend-name"},[e._v(e._s(e.friend.profile.nick||e.friend.userID))])])],1)],1)},bi=[],yi={props:{friend:{type:Object,required:!0}},methods:{handleFriendClick:function(){var e=this;this.tim.getConversationProfile("C2C".concat(this.friend.userID)).then((function(t){var r=t.data;e.$store.commit("updateCurrentConversation",r)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))}}},Oi=yi,Ci=Object(f["a"])(Oi,vi,bi,!1,null,"0e5cffba",null),wi=Ci.exports;function Pi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mi={components:{FriendItem:wi},computed:_i(_i({},Object(O["c"])({friendList:function(e){return e.friend.friendList}})),{},{hasFriend:function(){return this.friendList.length>0}})},Ii=Mi,ji=(r("47b1"),Object(f["a"])(Ii,hi,gi,!1,null,null,null)),Ti=ji.exports,Ei=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"blacklist-wrapper",class:{default:!e.hasBlacklist}},[e.hasBlacklist?r("div",e._l(e.blacklist,(function(e){return r("blacklist-item",{key:e.userID,attrs:{profile:e}})})),1):r("span",{staticStyle:{color:"gray"}},[e._v("黑名单还是空的")])])},Di=[],Si=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"blacklist-item-wrapper"},[r("img",{staticClass:"avatar",attrs:{src:e.profile.avatar?e.profile.avatar:"http://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png"}}),r("div",{staticClass:"item"},[e._v(e._s(e.profile.nick||e.profile.userID))]),r("el-button",{attrs:{type:"text"},on:{click:e.removeFromBlacklist}},[e._v("取消拉黑")])],1)},ki=[],xi={name:"BlacklistItem",props:{profile:{type:Object,required:!0}},methods:{removeFromBlacklist:function(){var e=this;this.tim.removeFromBlacklist({userIDList:[this.profile.userID]}).then((function(){e.$store.commit("removeFromBlacklist",e.profile.userID)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))}}},Ai=xi,Gi=(r("b849"),Object(f["a"])(Ai,Si,ki,!1,null,"6763cfe2",null)),Li=Gi.exports;function Ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ri(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ui={name:"Blacklist",components:{BlacklistItem:Li},computed:Ni(Ni({},Object(O["c"])({blacklist:function(e){return e.blacklist.blacklist}})),{},{hasBlacklist:function(){return this.blacklist.length>0}})},$i=Ui,Bi=(r("86b5"),Object(f["a"])($i,Ei,Di,!1,null,"00ad617d",null)),Yi=Bi.exports,Fi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"全局设置",width:"40%",visible:e.visible},on:{close:function(t){return e.$emit("update:visible",!1)}}},[r("div",{staticClass:"settings-content"},[r("div",[e._v("【重要笔记】/【Log】/【人物卡】的内容，会缓存在本地，这样在下次打开时也不会丢失。")]),r("div",[e._v("如果你已经不需要这些缓存了，可以将其清除，以释放存储空间、提升初始化速度。")]),r("div",{staticClass:"btn",staticStyle:{"margin-top":"20px"}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clearLocalStorage("paotuannote-")}}},[e._v("清除所有【重要笔记】缓存")])],1),r("div",{staticClass:"btn"},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clearLocalStorage("paotuanlog-")}}},[e._v("清除所有【Log 录制】缓存")])],1),r("div",{staticClass:"btn"},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clearLocalStorage("paotuancard-")}}},[e._v("清除所有【人物卡】缓存")])],1)])])},Vi=[],qi={props:["visible"],methods:{clearLocalStorage:function(e){for(var t=[],r=localStorage.length,n=0;n<r;n++){var s=localStorage.key(n);s.startsWith(e)&&t.push(s)}t.forEach((function(e){return localStorage.removeItem(e)})),this.$store.commit("showMessage",{type:"success",message:"清除缓存成功"})}}},Hi=qi,Ki=(r("7028"),Object(f["a"])(Hi,Fi,Vi,!1,null,"1631b65b",null)),zi=Ki.exports;function Ji(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ji(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Wi={CONVERSATION_LIST:"conversation-list",GROUP_LIST:"group-list",FRIEND_LIST:"friend-list",BLACK_LIST:"black-list"},Zi={name:"SideBar",components:{ConversationList:qs,GroupList:di,FriendList:Ti,BlackList:Yi,GlobalSetting:zi},data:function(){return{active:Wi.CONVERSATION_LIST,activeName:Wi,globalSettingsVisible:!1}},computed:Qi(Qi(Qi({},Object(O["b"])(["totalUnreadCount"])),Object(O["c"])({userID:function(e){return e.user.userID}})),{},{showConversationList:function(){return this.active===Wi.CONVERSATION_LIST},showGroupList:function(){return this.active===Wi.GROUP_LIST},showFriendList:function(){return this.active===Wi.FRIEND_LIST},showBlackList:function(){return this.active===Wi.BLACK_LIST},showAddButton:function(){return[Wi.CONVERSATION_LIST,Wi.GROUP_LIST].includes(this.active)}}),methods:{checkoutActive:function(e){this.active=e},handleClick:function(e){switch(e.target.id){case Wi.CONVERSATION_LIST:this.checkoutActive(Wi.CONVERSATION_LIST);break;case Wi.GROUP_LIST:this.checkoutActive(Wi.GROUP_LIST);break;case Wi.FRIEND_LIST:this.checkoutActive(Wi.FRIEND_LIST);break;case Wi.BLACK_LIST:this.checkoutActive(Wi.BLACK_LIST);break}},handleRefresh:function(){var e=this;switch(this.active){case Wi.CONVERSATION_LIST:this.tim.getConversationList().catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}));break;case Wi.GROUP_LIST:this.getGroupList();break;case Wi.FRIEND_LIST:this.getFriendList();break;case Wi.BLACK_LIST:this.$store.dispatch("getBlacklist");break}},getGroupList:function(){var e=this;this.tim.getGroupList().then((function(t){var r=t.data;e.$store.dispatch("updateGroupList",r)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},getFriendList:function(){var e=this;this.tim.getFriendList().then((function(t){var r=t.data;e.$store.commit("upadteFriendList",r)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},handleExit:function(){var e=this;this.$confirm("确定要退出登录吗？").then((function(){e.$store.dispatch("logout"),Ir()}))}}},Xi=Zi,eo=(r("2612"),Object(f["a"])(Xi,Ts,Es,!1,null,"3457d13e",null)),to=eo.exports,ro=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile-container"},[r("my-profile"),r("div",{staticClass:"base-info"},[r("div",{staticClass:"nick"},[e._v(e._s(e.currentUserProfile.nick||e.currentUserProfile.userID))]),r("div",{staticClass:"uid"},[e._v(e._s(e.currentUserProfile.userID))])]),r("div",{staticClass:"header-bar"},[r("button",{attrs:{title:"刷新列表"},on:{click:e.handleRefresh}},[r("i",{staticClass:"tim-icon-refresh"})]),r("el-dropdown",{on:{command:e.handleCreateChat}},[r("button",{staticClass:"btn2",attrs:{title:"创建会话"}},[r("i",{staticClass:"tim-icon-add"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"group"}},[e._v("创建群聊")]),r("el-dropdown-item",{attrs:{command:"c2c"}},[e._v("发起单聊")])],1)],1)],1),r("div",{staticClass:"appid-prefix"},[e._v("PID "+e._s(e.currentAppid))]),r("el-dialog",{attrs:{title:"发起会话",visible:e.showC2CDialog,width:"40%"},on:{"update:visible":function(t){e.showC2CDialog=t}}},[r("el-input",{attrs:{placeholder:"请输入用户ID(QQ号)"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleCreateC2C(t)}},model:{value:e.userID,callback:function(t){e.userID=t},expression:"userID"}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showC2CDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateC2C}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"创建群组",visible:e.createGroupModelVisible,width:"40%"},on:{close:function(t){return e.$store.commit("updateCreateGroupModelVisible",!1)}}},[r("create-group")],1)],1)},no=[],so=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-profile-wrapper"},[r("el-dialog",{attrs:{title:"编辑个人资料",visible:e.showEditMyProfile,width:"40%"},on:{"update:visible":function(t){e.showEditMyProfile=t}}},[r("el-form",{attrs:{"label-width":"60px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[r("el-form-item",{staticClass:"avatar-edit",attrs:{label:"头像"}},[r("el-input",{attrs:{placeholder:"头像地址(URL)"},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}}),r("el-button",{attrs:{type:"primary"},on:{click:e.useQQAvatar}},[e._v("使用我的QQ头像")])],1),r("el-form-item",{attrs:{label:"昵称"}},[r("el-input",{attrs:{placeholder:"昵称"},model:{value:e.form.nick,callback:function(t){e.$set(e.form,"nick",t)},expression:"form.nick"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[r("el-radio",{attrs:{label:e.TIM.TYPES.GENDER_MALE}},[e._v("男")]),r("el-radio",{attrs:{label:e.TIM.TYPES.GENDER_FEMALE}},[e._v("女")]),r("el-radio",{attrs:{label:e.TIM.TYPES.GENDER_UNKNOWN}},[e._v("不显示")])],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showEditMyProfile=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editMyProfile}},[e._v("确 定")])],1)],1),r("div",{on:{click:e.handleEdit}},[r("avatar",{staticClass:"my-avatar",attrs:{src:e.currentUserProfile.avatar}})],1)],1)},io=[],oo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"profile-card-wrapper"},[r("div",{staticClass:"content"},[r("avatar",{attrs:{src:e.profile.avatar}}),r("div",{staticClass:"basic"},[r("span",{staticClass:"nick text-ellipsis"},[e._v(e._s(e.profile.nick||e.profile.userID))]),r("span",{staticClass:"iconfont",class:e.genderClass})])],1)])},ao=[],co={name:"ProfileCard",props:{profile:{type:Object,required:!0}},computed:{genderClass:function(){switch(this.profile.gender){case this.TIM.TYPES.GENDER_MALE:return"icon-male";case this.TIM.TYPES.GENDER_FEMALE:return"icon-female";default:return"暂无"}}}},uo=co,lo=(r("8127"),Object(f["a"])(uo,oo,ao,!1,null,null,null)),po=lo.exports;function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ho={name:"MyProfile",components:{ElPopover:i["Popover"],ProfileCard:po,ElForm:i["Form"],ElFormItem:i["FormItem"],ElRadioGroup:i["RadioGroup"],ElRadio:i["Radio"]},data:function(){return{showEditMyProfile:!1,form:{avatar:"",nick:"",gender:""}}},computed:fo(fo({},Object(O["c"])({currentUserId:function(e){return e.user.userID},currentUserProfile:function(e){return e.user.currentUserProfile},currentConversation:function(e){return e.conversation.currentConversation}})),{},{gender:function(){switch(this.currentUserProfile.gender){case this.TIM.TYPES.GENDER_MALE:return"男";case this.TIM.TYPES.GENDER_FEMALE:return"女";default:return"暂无"}}}),methods:{editMyProfile:function(){var e=this;if(this.form.avatar&&-1===this.form.avatar.indexOf("http"))return this.$store.commit("showMessage",{message:"头像应该是 Url 地址",type:"warning"}),void(this.form.avatar="");var t={};Object.keys(this.form).forEach((function(r){e.form[r]&&(t[r]=e.form[r])})),this.tim.updateMyProfile(t).then((function(){e.$store.commit("showMessage",{message:"修改成功"}),e.showEditMyProfile=!1})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},handleEdit:function(){var e=this.currentUserProfile,t=e.avatar,r=e.nick,n=e.gender;Object.assign(this.form,{avatar:t,nick:r,gender:n}),this.showEditMyProfile=!0},useQQAvatar:function(){this.form.avatar="https://q.qlogo.cn/g?b=qq&nk=".concat(this.currentUserId,"&s=100")}}},go=ho,vo=(r("96b9"),Object(f["a"])(go,so,io,!1,null,"680fcfff",null)),bo=vo.exports;function yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Co={components:{MyProfile:bo,CreateGroup:ri},data:function(){return{showC2CDialog:!1,userID:"",timeout:null}},computed:Oo({},Object(O["c"])({currentUserId:function(e){return e.user.userID},currentAppid:function(e){return e.user.sdkAppID},currentUserProfile:function(e){return e.user.currentUserProfile},createGroupModelVisible:function(e){return e.group.createGroupModelVisible}})),methods:{handleRefresh:function(){this.refreshConversation()()},refreshConversation:function(){var e=this;return function(){e.timeout||(e.timeout=setTimeout((function(){e.timeout=null,e.tim.getConversationList().then((function(){e.$store.commit("showMessage",{message:"刷新成功",type:"success"})}))}),1e3))}},handleCreateChat:function(e){"c2c"===e?this.showC2CDialog=!0:this.$store.commit("updateCreateGroupModelVisible",!0)},handleCreateC2C:function(){var e=this;"@TIM#SYSTEM"!==this.userID?this.$store.dispatch("checkoutConversation","C2C".concat(this.userID)).then((function(){e.showC2CDialog=!1})).catch((function(){e.$store.commit("showMessage",{message:"没有找到该用户",type:"warning"})})):this.$store.commit("showMessage",{message:"没有找到该用户",type:"warning"}),this.userID=""}}},wo=Co,Po=(r("985b"),Object(f["a"])(wo,ro,no,!1,null,"0aa28a56",null)),_o=Po.exports,Mo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-wrapper"},[r("img",{staticClass:"logo",attrs:{src:e.logo}}),r("el-form",{ref:"login",staticStyle:{width:"100%"},attrs:{"label-position":"left","label-width":"80px",rules:e.rules,model:e.form},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}}},[r("el-form-item",{attrs:{label:"平台ID",prop:"appid"}},[r("el-input",{attrs:{placeholder:"请输入平台ID",type:"text",clearable:""},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),r("el-form-item",{attrs:{label:"Secret",prop:"secret"}},[r("el-input",{attrs:{placeholder:"请输入secret","show-password":""},model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)},expression:"form.secret"}})],1),r("el-form-item",{attrs:{label:"QQ",prop:"userID"}},[r("el-input",{attrs:{placeholder:"请输入QQ号，请勿冒用",type:"text",clearable:""},model:{value:e.form.userID,callback:function(t){e.$set(e.form,"userID",t)},expression:"form.userID"}})],1)],1),r("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[r("el-checkbox",{model:{value:e.form.isRememberUin,callback:function(t){e.$set(e.form,"isRememberUin",t)},expression:"form.isRememberUin"}},[e._v("记住帐号")]),r("el-checkbox",{model:{value:e.form.isAutoLogin,callback:function(t){e.$set(e.form,"isAutoLogin",t)},expression:"form.isAutoLogin"}},[e._v("自动登录")])],1),r("el-button",{staticStyle:{width:"100%","margin-top":"6px"},attrs:{plain:"",type:"info"},on:{click:e.submit}},[e._v("登录\n  ")]),r("a",{attrs:{href:"https://docs.qq.com/doc/DSW1TdXhhSmdpamRX",target:"_blank"}},[e._v("使用指南与常见问题")]),r("el-popover",{attrs:{trigger:"click"}},[r("img",{attrs:{src:e.minacode}}),r("a",{attrs:{slot:"reference",href:"#"},slot:"reference"},[e._v("小程序版本")])])],1)},Io=[],jo=r("a1d8"),To=r.n(jo),Eo=r("a78e"),Do=r.n(Eo),So={name:"Login",components:{ElForm:i["Form"],ElFormItem:i["FormItem"],ElPopover:i["Popover"]},props:["initialAppid","initialSecret"],data:function(){var e=function(e,t,r){/^[0-9]{5,15}$/.test(t)?r():r(new Error("格式不正确"))};return{form:{appid:this.initialAppid,secret:this.initialSecret,userID:Do.a.get("uin"),isRememberUin:!!Do.a.get("uin"),isAutoLogin:"true"===Do.a.get("autologin")},rules:{userID:[{required:!0,message:"请输入 QQ",trigger:"blur"},{validator:e,trigger:"blur"}],appid:[{required:!0,message:"请输入 APPID",trigger:"blur"}],secret:[{required:!0,message:"请输入 secret",trigger:"blur"}]},logo:To.a,minacode:Nr.a}},methods:{submit:function(){var e=this;this.$refs["login"].validate((function(t){t&&e.$emit("submit",e.form)}))}}},ko=So,xo=(r("25f1"),Object(f["a"])(ko,Mo,Io,!1,null,"ffd3440e",null)),Ao=xo.exports,Go=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreviewer,expression:"showPreviewer"}],staticClass:"image-previewer-wrapper",on:{mousewheel:e.handleMouseWheel}},[r("div",{staticClass:"image-wrapper"},[r("img",{staticClass:"image-preview",style:{transform:"scale("+e.zoom+") rotate("+e.rotate+"deg)"},attrs:{src:e.previewUrl},on:{click:e.close}})]),r("i",{staticClass:"el-icon-close close-button",on:{click:e.close}}),r("i",{staticClass:"el-icon-back prev-button",on:{click:e.goPrev}}),r("i",{staticClass:"el-icon-right next-button",on:{click:e.goNext}}),r("div",{staticClass:"actions-bar"},[r("i",{staticClass:"el-icon-zoom-out",on:{click:e.zoomOut}}),r("i",{staticClass:"el-icon-zoom-in",on:{click:e.zoomIn}}),r("i",{staticClass:"el-icon-refresh-left",on:{click:e.rotateLeft}}),r("i",{staticClass:"el-icon-refresh-right",on:{click:e.rotateRight}}),r("span",{staticClass:"image-counter"},[e._v(e._s(e.index+1)+" / "+e._s(e.imgUrlList.length))])])])},Lo=[];function Ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function No(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Uo={name:"ImagePreviewer",data:function(){return{url:"",index:0,visible:!1,zoom:1,rotate:0,minZoom:.1}},computed:No(No({},Object(O["b"])(["imgUrlList"])),{},{showPreviewer:function(){return this.url.length>0&&this.visible},imageStyle:function(){return{transform:"scale(".concat(this.zoom,");")}},previewUrl:function(){return this.formatUrl(this.imgUrlList[this.index])}}),mounted:function(){this.$bus.$on("image-preview",this.handlePreview)},methods:{handlePreview:function(e){var t=e.url;this.url=t,this.index=this.imgUrlList.findIndex((function(e){return e===t})),this.visible=!0},handleMouseWheel:function(e){e.wheelDelta>0?this.zoomIn():this.zoomOut()},zoomIn:function(){this.zoom+=.1},zoomOut:function(){this.zoom=this.zoom-.1>this.minZoom?this.zoom-.1:this.minZoom},close:function(){Object.assign(this,{zoom:1}),this.visible=!1},rotateLeft:function(){this.rotate-=90},rotateRight:function(){this.rotate+=90},goNext:function(){this.index=(this.index+1)%this.imgUrlList.length},goPrev:function(){this.index=this.index-1>=0?this.index-1:this.imgUrlList.length-1},formatUrl:function(e){return e?"//"===e.slice(0,2)?"https:".concat(e):e:""}}},$o=Uo,Bo=(r("2425"),Object(f["a"])($o,Go,Lo,!1,null,"c65b876c",null)),Yo=Bo.exports;function Fo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qo={title:"paotuan",data:function(){return{loading:!0,initialAppid:"",initialSecret:"",invitedGroup:""}},components:{Login:Ao,SideBar:to,CurrentConversation:js,ImagePreviewer:Yo,ProfileBar:_o},computed:Vo({},Object(O["c"])({currentUserProfile:function(e){return e.user.currentUserProfile},currentConversation:function(e){return e.conversation.currentConversation},videoCall:function(e){return e.conversation.videoCall},audioCall:function(e){return e.conversation.audioCall},isLogin:function(e){return e.user.isLogin},isSDKReady:function(e){return e.user.isSDKReady},isBusy:function(e){return e.video.isBusy},userID:function(e){return e.user.userID},userSig:function(e){return e.user.userSig},sdkAppID:function(e){return e.user.sdkAppID}})),mounted:function(){var e=new URLSearchParams(location.hash.startsWith("#/")?location.hash.substr(2):""),t=e.get("s")||Do.a.get("s");this.invitedGroup=e.get("g")||"";var r=Do.a.get("uin"),n="true"===Do.a.get("autologin");try{var s=atob(t).split("/").map((function(e,t){return 0===t?e:e.split("").reverse().join("")})),i=Object(b["a"])(s,2);this.initialAppid=i[0],this.initialSecret=i[1]}catch(o){console.log("invalid sig",t)}n&&this.initialAppid&&this.initialSecret&&r?this.doLogin({appid:this.initialAppid,secret:this.initialSecret,userID:r}):this.loading=!1,location.hash=""},methods:{initListener:function(){var e;Or(this.tim,(e={},Object(y["a"])(e,this.TIM.EVENT.SDK_READY,this.onReadyStateUpdate),Object(y["a"])(e,this.TIM.EVENT.SDK_NOT_READY,this.onReadyStateUpdate),Object(y["a"])(e,this.TIM.EVENT.KICKED_OUT,this.onKickOut),Object(y["a"])(e,this.TIM.EVENT.ERROR,this.onError),Object(y["a"])(e,this.TIM.EVENT.MESSAGE_RECEIVED,this.onReceiveMessage),Object(y["a"])(e,this.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.onUpdateConversationList),Object(y["a"])(e,this.TIM.EVENT.GROUP_LIST_UPDATED,this.onUpdateGroupList),Object(y["a"])(e,this.TIM.EVENT.NET_STATE_CHANGE,this.onNetStateChange),Object(y["a"])(e,this.TIM.EVENT.MESSAGE_READ_BY_PEER,this.onMessageReadByPeer),e),this)},onReceiveMessage:function(e){var t=e.data;this.handleAt(t),this.handleAddGroupTip(t),this.handleQuitGroupTip(t),this.$store.commit("pushCurrentMessageList",t),this.$store.dispatch("insertGameLogs",t),this.$store.dispatch("handleKPNote",t)},onError:function(e){var t=e.data;"Network Error"!==t.message&&this.$store.commit("showMessage",{message:t.message,type:"error"})},onMessageReadByPeer:function(){},onReadyStateUpdate:function(e){var t=this,r=e.name,n=r===this.TIM.EVENT.SDK_READY;this.$store.commit("toggleIsSDKReady",n),n&&(this.tim.getMyProfile().then((function(e){var r=e.data;t.$store.commit("updateCurrentUserProfile",r)})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})})),this.$store.dispatch("getBlacklist"),this.invitedGroup?this.tim.joinGroup({groupID:"@TGS#"+this.invitedGroup}).then((function(){t.$store.commit("showMessage",{type:"success",message:"邀请入群成功"})})).catch((function(e){console.log("invited failed",e),t.$store.commit("showMessage",{type:"error",message:"邀请入群失败"})})).finally((function(){t.loading=!1})):this.loading=!1)},kickedOutReason:function(e){switch(e){case this.TIM.TYPES.KICKED_OUT_MULT_ACCOUNT:return"由于多实例登录";case this.TIM.TYPES.KICKED_OUT_MULT_DEVICE:return"由于多设备登录";case this.TIM.TYPES.KICKED_OUT_USERSIG_EXPIRED:return"由于 userSig 过期";default:return""}},checkoutNetState:function(e){switch(e){case this.TIM.TYPES.NET_STATE_CONNECTED:return{message:"已接入网络",type:"success"};case this.TIM.TYPES.NET_STATE_CONNECTING:return{message:"当前网络不稳定",type:"warning"};case this.TIM.TYPES.NET_STATE_DISCONNECTED:return{message:"当前网络不可用",type:"error"};default:return""}},onNetStateChange:function(e){this.$store.commit("showMessage",this.checkoutNetState(e.data.state))},onKickOut:function(e){this.$store.commit("showMessage",{message:"".concat(this.kickedOutReason(e.data.type),"被踢出，请重新登录。"),type:"error"}),this.$store.commit("reset"),Ir()},onUpdateConversationList:function(e){this.$store.commit("updateConversationList",e.data)},onUpdateGroupList:function(e){this.$store.commit("updateGroupList",e.data)},onReceiveGroupSystemNotice:function(e){var t=this,r=4===e.data.type,n="GROUP".concat(e.data.message.payload.groupProfile.groupID)===this.currentConversation.conversationID;r&&n&&this.$store.commit("resetCurrentConversation"),Object(i["Notification"])({title:"新系统通知",message:It(e.data.message),duration:3e3,onClick:function(){var e="@TIM#SYSTEM";t.$store.dispatch("checkoutConversation",e)}})},handleAt:function(e){for(var t=this,r=e.filter((function(e){return e.type===t.TIM.TYPES.MSG_TEXT&&e.payload.text.includes("@")})),n=0;n<r.length;n++){var s=r[n],o=s.payload.text.match(/@\w+/g);o&&(o.includes("@".concat(this.currentUserProfile.userID))&&(this.$store.getters.hidden&&this.notifyMe(s),Object(i["Notification"])({title:"有人在群".concat(s.conversationID.slice(5),"提到了你"),message:s.payload.text,duration:3e3}),this.$bus.$emit("new-messsage-at-me",{data:{conversationID:s.conversationID}})))}},selectConversation:function(e){e!==this.currentConversation.conversationID&&this.$store.dispatch("checkoutConversation",e)},isJsonStr:function(e){try{return JSON.parse(e),!0}catch(t){return!1}},notifyMe:function(e){var t=this;"Notification"in window&&("granted"===window.Notification.permission?this.handleNotify(e):"denied"!==window.Notification.permission&&window.Notification.requestPermission().then((function(r){"granted"===r&&t.handleNotify(e)})))},handleNotify:function(e){var t=this,r=new window.Notification("有人提到了你",{icon:"https://webim-1252463788.file.myqcloud.com/demo/img/logo.dc3be0d4.png",body:e.payload.text});r.onclick=function(){window.focus(),t.$store.dispatch("checkoutConversation",e.conversationID),r.close()}},handleAddGroupTip:function(e){var t=this,r=e.filter((function(e){return t.currentConversation.conversationID===e.conversationID&&e.type===t.TIM.TYPES.MSG_GRP_TIP&&e.payload.operationType===t.TIM.TYPES.GRP_TIP_MBR_JOIN}));r.length>0&&this.$store.dispatch("getGroupMemberList",this.currentConversation.conversationID.replace("GROUP",""))},handleQuitGroupTip:function(e){var t=this,r=e.filter((function(e){return t.currentConversation.conversationID===e.conversationID&&e.type===t.TIM.TYPES.MSG_GRP_TIP&&(e.payload.operationType===t.TIM.TYPES.GRP_TIP_MBR_QUIT||e.payload.operationType===t.TIM.TYPES.GRP_TIP_MBR_KICKED_OUT)}));r.length>0&&r.forEach((function(e){(Array.isArray(e.payload.userIDList)||e.payload.userIDList.length>0)&&t.$store.commit("deleteGroupMemberList",e.payload.userIDList)}))},doLogin:function(e){var t=this,r=e.appid,n=e.secret,s=e.userID,i=e.isRememberUin,o=void 0===i||i,a=e.isAutoLogin,c=void 0===a||a;br(r,n),this.initListener();var u=Number(r);if(u>0){this.loading=!0;var l=window.genTestUserSig(s,u,n).userSig;this.tim.login({userID:s,userSig:l}).then((function(){t.$store.commit("toggleIsLogin",!0),t.$store.commit("startComputeCurrent"),t.$store.commit({type:"GET_USER_INFO",userID:s,userSig:l,sdkAppID:r}),t.$store.commit("showMessage",{type:"success",message:"登录成功"}),Do.a.set("s",btoa(r+"/"+n.split("").reverse().join("")),{expires:7}),Do.a.set("autologin",c),o?Do.a.set("uin",s,{expires:7}):Do.a.remove("uin")})).catch((function(e){t.loading=!1,t.$store.commit("showMessage",{message:"登录失败："+e.message,type:"error"})}))}else this.$store.commit("showMessage",{message:"登录失败：参数不合法",type:"error"})}}},Ho=qo,Ko=(r("2747"),r("f849"),Object(f["a"])(Ho,g,v,!1,null,"4d1525ca",null)),zo=Ko.exports,Jo=r("75fc");r("386d");function Qo(e){var t=e>0;t?document.title.search(/\((.*?)\)/)>=0?document.title=document.title.replace(/\((.*?)\)/,"(".concat(e>99?"99+":e,")")):document.title="(".concat(e,")").concat(document.title):document.title=document.title.replace(/\((.*?)\)/,"")}var Wo={state:{currentConversation:{},currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[],callingInfo:{memberList:[],type:"C2C"},audioCall:!1},getters:{toAccount:function(e){if(!e.currentConversation||!e.currentConversation.conversationID)return"";switch(e.currentConversation.type){case"C2C":return e.currentConversation.conversationID.replace("C2C","");case"GROUP":return e.currentConversation.conversationID.replace("GROUP","");default:return e.currentConversation.conversationID}},currentConversationType:function(e){return e.currentConversation&&e.currentConversation.type?e.currentConversation.type:""},totalUnreadCount:function(e){var t=e.conversationList.reduce((function(t,r){return ha.getters.hidden||e.currentConversation.conversationID!==r.conversationID?t+r.unreadCount:t}),0);return Qo(t),t},imgUrlList:function(e){return e.currentMessageList.filter((function(e){return e.type===or.TYPES.MSG_IMAGE&&!e.isRevoked})).map((function(e){return e.payload.imageInfoArray[0].url}))}},mutations:{setCallingList:function(e,t){e.callingInfo.memberList=t.memberList,e.callingInfo.type=t.type},showAudioCall:function(e,t){e.audioCall=t},updateCurrentConversation:function(e,t){e.currentConversation=t,e.currentMessageList=[],e.nextReqMessageID="",e.isCompleted=!1},updateConversationList:function(e,t){e.conversationList=t},resetCurrentConversation:function(e){e.currentConversation={}},pushCurrentMessageList:function(e,t){if(e.currentConversation.conversationID)if(Array.isArray(t)){var r=t.filter((function(t){return t.conversationID===e.currentConversation.conversationID}));e.currentMessageList=[].concat(Object(Jo["a"])(e.currentMessageList),Object(Jo["a"])(r))}else t.conversationID===e.currentConversation.conversationID&&(e.currentMessageList=[].concat(Object(Jo["a"])(e.currentMessageList),[t]))},removeMessage:function(e,t){var r=e.currentMessageList.findIndex((function(e){var r=e.ID;return r===t.ID}));r>=0&&e.currentMessageList.splice(r,1)},reset:function(e){Object.assign(e,{currentConversation:{},currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[]})}},actions:{getMessageList:function(e,t){if(e.state.isCompleted)e.commit("showMessage",{message:"已经没有更多的历史消息了哦",type:"info"});else{var r=e.state,n=r.nextReqMessageID,s=r.currentMessageList;vr.getMessageList({conversationID:t,nextReqMessageID:n,count:15}).then((function(t){e.state.nextReqMessageID=t.data.nextReqMessageID,e.state.isCompleted=t.data.isCompleted,e.state.currentMessageList=[].concat(Object(Jo["a"])(t.data.messageList),Object(Jo["a"])(s))}))}},checkoutConversation:function(e,t){if(e.commit("resetCurrentMemberList"),e.state.currentConversation.conversationID){var r=e.state.currentConversation.conversationID;vr.setMessageRead({conversationID:r})}return vr.setMessageRead({conversationID:t}),vr.getConversationProfile(t).then((function(r){var n=r.data;return e.commit("updateCurrentConversation",n.conversation),e.dispatch("getMessageList",t),n.conversation.type===or.TYPES.CONV_GROUP?(e.dispatch("initGame",n.conversation.groupProfile.groupID),e.dispatch("getGroupMemberList",n.conversation.groupProfile.groupID)):Promise.resolve()}))}}},Zo=Wo,Xo={state:{groupList:[],currentMemberList:[],createGroupModelVisible:!1},getters:{hasGroupList:function(e){return e.groupList.length>0}},mutations:{updateGroupList:function(e,t){e.groupList=t},updateCreateGroupModelVisible:function(e,t){e.createGroupModelVisible=t},updateCurrentMemberList:function(e,t){e.currentMemberList=t},deleteGroupMemeber:function(e,t){e.currentMemberList=e.currentMemberList.filter((function(e){return e.userID!==t}))},deleteGroupMemberList:function(e,t){e.currentMemberList=e.currentMemberList.filter((function(e){return!t.includes(e.userID)}))},resetCurrentMemberList:function(e){e.currentMemberList=[]},reset:function(e){Object.assign(e,{groupList:[],currentMemberList:[],createGroupModelVisible:!1})}},actions:{updateGroupList:function(e,t){e.commit("updateGroupList",t)},getGroupMemberList:function(e,t){return vr.getGroupMemberList({groupID:t,offset:0,count:30}).then((function(t){return e.commit("updateCurrentMemberList",t.data.memberList),t}))}}},ea=Xo,ta={state:{currentUserProfile:{},isLogin:!1,isSDKReady:!1,userID:0,userSig:"",sdkAppID:0},mutations:{updateCurrentUserProfile:function(e,t){e.currentUserProfile=t},toggleIsLogin:function(e,t){e.isLogin="undefined"===typeof t?!e.isLogin:t},toggleIsSDKReady:function(e,t){e.isSDKReady="undefined"===typeof t?!e.isSDKReady:t},reset:function(e){Object.assign(e,{currentUserProfile:{},isLogin:!1,isSDKReady:!1})},GET_USER_INFO:function(e,t){e.userID=t.userID,e.userSig=t.userSig,e.sdkAppID=t.sdkAppID}},actions:{logout:function(e){e.rootState.conversation.currentConversation.conversationID&&vr.setMessageRead({conversationID:e.rootState.conversation.currentConversation.conversationID}),vr.logout().then((function(){e.commit("stopComputeCurrent"),e.commit("reset")}))}}},ra=ta,na={state:{friendList:[],createGroupModelVisible:!1},mutations:{upadteFriendList:function(e,t){e.friendList=t},reset:function(e){Object.assign(e,{friendList:[],createGroupModelVisible:!1})}}},sa=na,ia={state:{blacklist:[]},mutations:{updateBlacklist:function(e,t){e.blacklist=t},removeFromBlacklist:function(e,t){e.blacklist=e.blacklist.filter((function(e){return e.userID!==t}))},reset:function(e){Object.assign(e,{blacklist:[]})}},actions:{getBlacklist:function(e){vr.getBlacklist().then((function(t){var r=t.data;r.length>0&&vr.getUserProfile({userIDList:r}).then((function(t){var r=t.data;e.commit("updateBlacklist",r)}))}))}}},oa=ia;function aa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ua={currentTab:"group",botEnabled:!1,logEnabled:!1,logs:[],bgm:{},notes:[],noteUnread:!1,cards:{},openedCards:["group","note","log"]},la=function(e){return fa.state.list[e]||s.a.set(fa.state.list,e,JSON.parse(JSON.stringify(ua))),fa.state.list[e]},pa=function(e,t,r){localStorage.setItem("paotuan".concat(e,"-").concat(t),JSON.stringify(r))},ma=function(e,t){var r=localStorage.getItem("paotuan".concat(e,"-").concat(t));return r?JSON.parse(r):[]},fa={state:{list:{}},mutations:{initGame:function(e,t){s.a.set(e.list,t,JSON.parse(JSON.stringify(ua))),e.list[t].notes=ma("note",t),e.list[t].logs=ma("log",t),e.list[t].cards=ma("card",t)},toggleBotEnabled:function(e,t){var r=t.groupId,n=t.enabled;la(r).botEnabled=n},toggleLogEnabled:function(e,t){var r=t.groupId,n=t.enabled;la(r).logEnabled=n},insertLog:function(e,t){var r=t.groupId,n=t.log;la(r).logs.push(n),pa("log",r,la(r).logs)},updateLogs:function(e,t){var r=t.groupId,n=t.logs;la(r).logs=n,pa("log",r,n)},setGameBgm:function(e,t){var r=t.groupId,n=t.bgm;la(r).bgm=n},addNote:function(e,t){var r=t.groupId,n=t.note;la(r).notes.push(n),pa("note",r,la(r).notes)},updateNotes:function(e,t){var r=t.groupId,n=t.notes;la(r).notes=n,pa("note",r,n)},setNoteUnread:function(e,t){var r=t.groupId,n=t.unread;la(r).noteUnread=n},setCurrentTab:function(e,t){var r=t.groupId,n=t.tab;la(r).currentTab=n},setUserCard:function(e,t){var r=t.groupId,n=t.userId,i=t.card;s.a.set(la(r).cards,"o"+n,i),pa("card",r,ca(ca({},la(r).cards),{},Object(y["a"])({},"o".concat(n),i)))},setOpenedUserCards:function(e,t){var r=t.groupId,n=t.list;la(r).openedCards=n},reset:function(e){Object.assign(e,{list:{}})}},actions:{initGame:function(e,t){e.state.list[t]||e.commit("initGame",t)},toggleBotEnabled:function(e,t){var r=t.groupId,n=t.enabled;return new Promise((function(t,s){(n?Pr:_r)(r).then((function(){e.commit("toggleBotEnabled",{groupId:r,enabled:n}),t()})).catch((function(i){i.toString().includes("被邀请加入的用户已经是群成员")?(console.log("[bot.switch]already in group"),e.commit("toggleBotEnabled",{groupId:r,enabled:n}),t()):s(i)}))}))},insertGameLogs:function(e,t){t.filter((function(t){return t.conversationType===or.TYPES.CONV_GROUP&&t.type===or.TYPES.MSG_TEXT&&e.state.list[t.to]&&e.state.list[t.to].logEnabled})).forEach((function(t){var r={id:t.ID,from:t.from,nick:t.nameCard||t.nick,time:t.time,content:t.payload.text};r.content.startsWith(".")||r.content.startsWith("。")||e.commit("insertLog",{groupId:t.to,log:r})}))},handleKPNote:function(e,t){t.filter((function(e){return e.conversationType===or.TYPES.CONV_GROUP&&e.priority===or.TYPES.MSG_PRIORITY_HIGH})).forEach((function(t){if(t.type===or.TYPES.MSG_CUSTOM){var r=JSON.parse(t.payload.data);"bgm"===r.mtype?(e.commit("setGameBgm",{groupId:t.to,bgm:r.mdata}),e.dispatch("handleNoteUnread",t.to)):"card"===r.mtype&&e.commit("setUserCard",{groupId:t.to,userId:r.mdata.userId,card:r.mdata.card})}else t.type===or.TYPES.MSG_TEXT?(e.commit("addNote",{groupId:t.to,note:{id:t.ID,type:t.type,payload:t.payload.text}}),e.dispatch("handleNoteUnread",t.to)):t.type===or.TYPES.MSG_IMAGE&&(e.commit("addNote",{groupId:t.to,note:{id:t.ID,type:t.type,payload:t.payload.imageInfoArray[0].imageUrl}}),e.dispatch("handleNoteUnread",t.to))}))},handleNoteUnread:function(e,t){"note"!==la(t).currentTab&&e.commit("setNoteUnread",{groupId:t,unread:!0})},openUserCard:function(e,t){var r=t.groupId,n=t.userId,s=la(r);return s.cards["o"+n]?(s.openedCards.includes(n)||e.commit("setOpenedUserCards",{groupId:r,list:[].concat(Object(Jo["a"])(s.openedCards),[n])}),e.commit("setCurrentTab",{groupId:r,tab:n}),new Promise((function(e){return e()}))):new Promise((function(e,t){return t()}))},closeUserCard:function(e,t){var r=t.groupId,n=t.userId,s=la(r);e.commit("setOpenedUserCards",{groupId:r,list:s.openedCards.filter((function(e){return e!==n}))}),s.currentTab===n&&e.commit("setCurrentTab",{groupId:r,tab:"group"})}}},da=fa;s.a.use(O["a"]);var ha=new O["a"].Store({state:{current:Date.now(),intervalID:0,message:void 0},getters:{hidden:function(e){e.current;return"function"!==typeof document.hasFocus?document.hidden:!document.hasFocus()}},mutations:{startComputeCurrent:function(e){e.intervalID=setInterval((function(){e.current=Date.now()}),500)},stopComputeCurrent:function(e){clearInterval(e.intervalID),e.intervalID=0},showMessage:function(e,t){e.message&&e.message.close(),e.message=Object(i["Message"])({message:t.message,type:t.type||"success",duration:t.duration||2e3,offset:40})}},modules:{conversation:Zo,group:ea,friend:sa,blacklist:oa,user:ra,game:da}}),ga=r("4eb5"),va=r.n(ga);r("ed2c"),r("8e84");s.a.prototype.$bus=new s.a,s.a.prototype.tim=vr,s.a.prototype.TIM=or,s.a.prototype.$store=ha,s.a.use(o.a),s.a.use(va.a),s.a.component("avatar",h),new s.a({render:function(e){return e(zo)}}).$mount("#app")},"5bcc":function(e,t,r){},"5f5c":function(e,t){e.exports=XLSX},"5f72":function(e,t){e.exports=ELEMENT},6:function(e,t){},6044:function(e,t,r){},"691c":function(e,t,r){"use strict";r("5406")},"69cc":function(e,t,r){"use strict";r("e5a1")},"6d42":function(e,t,r){},7:function(e,t){},7028:function(e,t,r){"use strict";r("9290")},"76e5":function(e,t,r){},"777c":function(e,t,r){"use strict";r("c1f9")},"78e0":function(e,t,r){},7982:function(e,t,r){},"7a62":function(e,t,r){},"7ba6":function(e,t,r){"use strict";r("5bcc")},"7f69":function(e,t,r){"use strict";r("eca0")},8:function(e,t){},8127:function(e,t,r){"use strict";r("12d4")},"824b":function(e,t,r){},"831a":function(e,t,r){"use strict";r("12a8")},"852a":function(e,t,r){},"854e":function(e,t,r){},8674:function(e,t,r){"use strict";r("78e0")},"86b5":function(e,t,r){"use strict";r("b8dc")},"873f":function(e,t,r){"use strict";r("a396")},8810:function(e,t,r){"use strict";r("2158")},"8aaf":function(e,t,r){},"8bbf":function(e,t){e.exports=Vue},"8d6e":function(e,t,r){},"8e6d":function(e,t,r){"use strict";r("6d42")},"8e84":function(e,t,r){},"8f40":function(e,t,r){"use strict";r("8aaf")},9:function(e,t){},9016:function(e,t,r){},9122:function(e,t,r){"use strict";r("7982")},9290:function(e,t,r){},"96b9":function(e,t,r){"use strict";r("a7a6")},"985b":function(e,t,r){"use strict";r("e292")},9908:function(e,t,r){},"9c8e":function(e,t,r){},a1d8:function(e,t,r){e.exports=r.p+"img/logo.7ea2a7d2.png"},a396:function(e,t,r){},a65e:function(e,t,r){"use strict";r("e78d")},a7a6:function(e,t,r){},a86b:function(e,t,r){"use strict";r("854e")},b322:function(e,t,r){},b371:function(e,t,r){"use strict";r("5316")},b7a8:function(e,t,r){"use strict";r("c980")},b849:function(e,t,r){"use strict";r("fbe1")},b8dc:function(e,t,r){},c16a:function(e,t,r){"use strict";r("9c8e")},c1f9:function(e,t,r){},c8ad:function(e,t,r){"use strict";r("852a")},c964:function(e,t,r){},c980:function(e,t,r){},d2b0:function(e,t,r){"use strict";r("4bf3")},d4e4:function(e,t,r){},daca:function(e,t,r){"use strict";r("d4e4")},e017:function(e,t,r){"use strict";r("76e5")},e292:function(e,t,r){},e3ec:function(e,t,r){"use strict";r("53b9")},e5a1:function(e,t,r){},e78d:function(e,t,r){},e8d4:function(e,t,r){},ec25:function(e,t,r){"use strict";r("6044")},eca0:function(e,t,r){},ed2c:function(e,t,r){},f6e3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACpCAMAAAHy0MbyAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJYUExURQrBYAvBYRPDZhzGbCXIcSrJdSHHbxjFaQ7CYwzBYSnJdEzSi3bcpqLnw87z3+X47uj58Ov68uz68+n58ef579/36rzu05Djt2TYmz7OghnFai/KeIHfrcPw2OP47fz+/f////P8+Nb15K7ry1vVlBrFaw7CYlDTjqrqyPP899j15YrhsxDCZFfUksDv1vr+/C7KdyzKdq3qynLbo2HXmf7//rTszhTDZo/jtk7SjCjJc7nt0fX9+THLes3y3/3//oXgsA3CYjTMe5HjuA/CY8/z4IDfrRbEaLft0GbYnO779Pb9+cLv1x3GbNL04ub575zmv5flvEDPgzDLeaXoxIzitPD79TXMfB7GbeL47F7WlhLDZavqyfj9+03SjN326YvitEbQh3jdqO/79CLHcLHrzE/TjSPHcOT47vH79rHrzUvSivf9+vn++8zy3lXUkdf15SDHblnVk+D36ybIclrVlGfZnHjdpznNf1HTjhfEadv26I3itUfRiMfx26Pow0HPhJPkuZjlvMHv1zjNfkTQhWnZnhvFa8ry3TLLepXkurbt0Gvan4LfrknRiV/Wl9X05HHbo7/v1Z3mv8jx24jhskjRiTrNf8nx3Mvy3WLXmUfQh0XQhu3681LTj9n15ljVk2XYm6/ry+H37Or68bXsz2PYmjfMfW3aoLvu0zbMfTPLe77u1S7KeErRirDrzNr253fcpkPPhSvJdafpxr3u1N736n/frPL89o7itW/boWDXl3ndqJvmvvv+/Xveqsbx2tz26fT8+BHDZD3OgYTgr4fhsQAAAKRC35oAAADIdFJOU/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8A9ppxxwAAAAlwSFlzAAAXEQAAFxEByibzPwAABVpJREFUaEPt2zuP2koUB3BaN1dCLikwols5fVb5Cim3QaxEtNomDdJKaHWbbaBASPcTUKVBShv6NNH6e2Uefxs/5u0H7NX5NXiOzwwjY+yxPR4N422MhYqEw/KFiDbiZ3UY0V7D1ThizDMiAmIcIkIURaycxlGEQCFLRvUvlDJ8/j+MP2OhTGymxoqxCDc2ioz6/mgo5hB1C39BtBZGkEFAQIiLERKiKN2xtc0ffpSkD1MsVhzxSZxgoydLlA2QKfyLmA7S4Buiaitk5RBWQ04BYTXkFBBWQ04BYTXkFA6IqyCl5AvWNGB9DVbWYW3NGWvVZGOZsb8X8i+MAiHe5rOFeYfMbcSuliQzlA3WSGUQ0fqGPAExHWRJvxFUwzk2h6gacnKIqiEnt0VYCTm5FcJKyMlVzrB1yMl9tFzTBn5ASgFxFWRc6I+YSCjDmoZGDzisq8PaKuWQR52qaTi/BKjB2jo28mZjb7k2TkRRLGv9lCcgTUdrkiQbpbZTVk5003VYH2X3lo4SQkiAN3EokhYbBNuqDFWkN6xqoTRWKmt5d2SJZhSQESQfAyohJwRa0ECSvzka0LhHmrcZGtBYI80b6usYR1kG7ARuRO1KH63d0D8GausFdfiAykbI9fAdNS0+Id2RU2cl1HCivHrQ8bgPihpuvqOSi/RxFRd4XSwyU1bEIndKUcVbym8fYplhBeNlswfWVIJuTXh35WIH7lhjvEHhAcEuRO9/ZKOrPSKEEEIIIVey+e+f8Wy8e3V4yuxuWb4AV02QCFO/rH9CvB3FLRPlbB5P6lsmWBnuBQ3VYXUwNNPg8NTPhA+o1Vr9eKb7UUgJUnt8WDFHTgDDXTkGSQHM97ncHt6ooAGN4NtctstZZHnbo74O0rxpHsgVkObtHvV1Qq+4be2G3hCndiVqV6J2pb7afUJ9HbcpYk316Xx15smAeqiuhzxPW9TWq8xQdmW9u+53J7VQ3Dc0CJgCa98KHJLd2c5tOaQ7QzUr46yoJpeNK3ndY85QyYXPcApV3KCOA9cfTZqglp1fu+7/utT9Z9NNoFJLj2s8nuBYZSxx1dKd919OTKxixLOiNC+OnnkJBdtUKzN+ALo8gub/byy2xVq6bMRKoR3WxekjllfsJw1+fl7H+pjEfHd65ztKV90did/q8hynw+lmomEIfi6mdEKr284nx02y7GlPU+4IIYQQQgghhBBisVxuNptOp4j0YpOt60/wF/MfN9nvHzt0UGH2OfTJUT9eTdMipPmt9Hhj2K4Vr6hwTYcFOuOiu3lUYZauWzZ31S3s90hD2F3vQKF4xdBudq3/3G90wFfoc+t2grYtN75Gf1/x5QEWaGJAL7YpBSah0w3C2SZWGI0HPzzoJ0+66GZ2rDuPV+tUWkyvDGKbvGOx7vbxn9UnfG+g1cDnirbdfUE7A6Hu9om62yfqbp+ou336YN1tMTjn4oFPwm5TR/U6m+flJOCKvSr8vZQA5ZlggQa8/jn7TMTU8ZpZ20ary7SLfMpiv9J2V2klsfuE3WBHfFcnMjTal32buwsKcfgbcQ463bRSfxeZ6Rpf0a2A9xtcTLo4fKn0soH3fAp6P/o4xfWw3+amPfzhetpzuR2+olv3fMp89+56HJ1F+4kCdpQTihVnuc/HB5TLDpOB75VJE9GjZKX6cow1Bx0xWkR4A+AB5ZIU58Gejq5hnnGUaxxCMdacnlC+EZP8qHwqvwyB/ZZF0xt7RSJdF4eN6Wl7PP7asoHmFNv2J5JuyVk3Wnu8yt/fKkq32Jwlq/tbflMmet/e/ZEdncZfj0Gvvw4s35ztXpkjhBBCCCGkrdHoLzv9X1u4OdoGAAAAAElFTkSuQmCC"},f849:function(e,t,r){"use strict";r("f955")},f955:function(e,t,r){},fbe1:function(e,t,r){},fc3e:function(e,t,r){},fd5d:function(e,t,r){},fe90:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAAHfgQuIAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAOKADAAQAAAABAAAAOAAAAAAun0ppAAAG3UlEQVRoBdWav4tcVRTHJ667EIkiK1opDLFQEWxCUoQ0FissgnYWYhO2sVibNOIfsEGwNRbaWWxhUkQhVUBIsBDBRlglNltEFxYWIqwgwR/x+3n7vi9n7tz3Y+bNTJIDZ++5556f98e5d14yGIzCTXU/H2UNBvspQ/1h5H0cOiumMZWFx8W9VY7cSySOxT6Dxp/iwDB2cvSSmHdzAxcTZuXfhMN3SuYnekfdtcdKtqOM7cuMWT0OwP+NP4AFjnrj/YK/XgquWapsL5X8hD0YoJCmOiZUMqoImLTogQFPg5VTXqGcnWlr1LSe5wE5AD8IsVaH3hmFRxSA2Hmr7NtAIVD+iXKRX3kjb0LaFCJcrY/oWrigkQPhrvB0rVQYwPLt0IdcFsLfoZMDBpuAiRmTGWM0WKhkP5LQ8SC4F2iTkVelUlkopdI+7JT3R45Z6jc293zoGqVyg1HxfQkQUhNWNjzF2T1YSd0nLHcZFjP6YTn2lNo6j6XI6ESls/ZPMHDDGmrfFW6FfkGivJoyQ/9r0SN1NYwNNtTBwLbwGeFJIWsGj0oxEbCzUOyCnKi4Czs7ulo6uDOFARbIwZ1o82hHZ9sEO47/VTr3thlRIyoymjWwMbDNOlcAozrVFfeI8PTECpCIFN0mOU4g428jSfmkM29gBxd+2FmLcMhxKarUYSa1b8sgCKQPRtNPu8MthFEulQh9HKF7LRoT7UJQsOumdVqnnyXOzqs/lhTXJcz0zFCaujr+RLIpUBPRz5Y4KgODHNi+QMXG1kgBjjcUDv4UkuETQmfF+UzlxMqCpw7dV4XYei0r2cLkwHrRHUjaXpFMuvFazDYPs5v5MbIr5I3JRrsppHBk10f8iYGrxjs4zSjX5yqbGrxrMXxJ2DRdaxpnrR3EuujO4J2Ksh8fXZWZEW4cdLnqWmEoCUeZnsdW5SBwsbSzH3hjJA5wNosziHEu8cZMnRnCswJnOramG/KAQ27nWYPXdMQuzthlKayIsSdMfwBOIsdGwn51ZKgiMHLlC2eMgU3QJucjU9hwycoZJLMuDtvkOKfYWcIJxDbEnAE/lMHCIRHMG3BI7S0c8sCZN+CQulw4XJm3t9LPXe/M5xOHRNMXefmlsGeHb6YjM+h/lbFxHR6ZcDQiXFOnb4bRHlcb9rjEB1fKDrTBhXxap3wwisB9iq0C7P28GWXL23Jah4mpwk6xQz3AR6MqAjPV8sSb1ClfCiJwiWODmloBJQcmj9YUeNx2dVqUrmDAS7MTeBW5VRrmAZuDG2LmHPPpgm90ObB8bqzgeQrrnNYqZgZ4OeCQN1Ij2GluehsVy8FVtc5s2EUBGU8viunurbNBEfG9hx7rNxGwAbx7MUBx2BSeFFJ7KfhrQq42Z0S7IewFnFMXh2g40gTDy2FhQFA4vCz0CyIG1JVGFxvYwuYDA5aXpYpLHJMgUJb2A+EbQpadJWfpQegXhYwhsy2smxh84AufcwU2+ZYwJgJ9W8jB8c0qsjdgC5vYTv0Rw8QHTjq1MNSIS4+dUYIoJ4sCfPlTiGMgpmGfACi4MTEK8SwKep+Y0CUGXwokS4ytl4NkRiDdig9DYiMBqkNMXk1aYm4FDjIPASuyLWa631sjmEyAsxq3LrHXFiOeU7Eq8sx6VIBYvSjkMPI0JIll4YHQQlSwLhB/8Vq37TtAk90+9ojZMZALOVVwRZQHP6247cRe0LM+vGmhrz3/dCEWHgwFnNFfB8dlO5L5kUjt3xWNMOsEBkLDmxb62iP2+GA4TSBfCJ3gJoxHHMjB+ZBb8d3aDJ5UjzqQg/PZJRk+ypvRZ3th62EAcnA+xaegwxDVk4FOyd+Dog08qJZY6iDmcMhF+XOQPBXolPwmZTzAflMsMYcitwsK1Cux3RD0cxr7O8haZ9EtMTzbECc5OCZyK542sbSuNSi/E5RtZNEtMdQBsTsecqqebf6HAwb5DcbWrYMzGvhPaEOLavGJ7zogZmJ3PGOfNPhnEg8iOPaeE8+wLOK60PLzbvGFzzog1phc9U8+qcKGGA72jujVVCDpcxZm9V8m7De22G46b4RDjMRqPXJohHWNWpj2YqP0/cHXRX4vjLrT0NjAVhcgtuiD2DvBMUldFVqZX9BnO2neF+LD0nvCL4U3hL8KuXNBaHiMIYPsJEAs8Vc9sRLzxDCUxr7QidIya1MZk14fwGe6YsQ27GPUuidExBUlUfY9PzSPC+cF2MZHPGP4JhZimgusy+qOMK4qNFWM35LcRU0VT8NZQAddbMSKaD/4xPdCgRmmJB8IHcisWmxiGx9TwzzO0pKiOSU8J3xF+JLwBSGPYD+EXWxYqVvCX4TfCX8U/iucGfwPlkqurjfJdY8AAAAASUVORK5CYII="}});