(function(e){function t(t){for(var s,o,a=t[0],c=t[1],u=t[2],p=0,m=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var s={},r={app:0},i=[];function o(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;i.push([0,"vendors~app"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01d9":function(e,t,n){"use strict";n("f293")},"0510":function(e,t,n){"use strict";n("eeff")},"0716":function(e,t,n){"use strict";n("4eff")},"0c24":function(e,t,n){},"0e7c":function(e,t,n){"use strict";n("1d4d")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},"12a8":function(e,t,n){},"12d4":function(e,t,n){},13:function(e,t){},14:function(e,t){},"15aa":function(e,t,n){"use strict";n("8d6e")},"1d4d":function(e,t,n){},2:function(e,t){},2054:function(e,t,n){"use strict";n("fc3e")},2158:function(e,t,n){},2425:function(e,t,n){"use strict";n("4047")},"24c8":function(e,t,n){"use strict";n("e8d4")},"29bd":function(e,t,n){"use strict";n("3755")},3:function(e,t){},3755:function(e,t,n){},3763:function(e,t,n){"use strict";n("c964")},4:function(e,t){},4011:function(e,t,n){"use strict";n("7a62")},4047:function(e,t,n){},"47b1":function(e,t,n){"use strict";n("9908")},"4b30":function(e,t,n){},"4c27":function(e,t,n){"use strict";n("b322")},"4d06":function(e,t,n){"use strict";n("0c24")},"4eff":function(e,t,n){},5:function(e,t){},"53b9":function(e,t,n){},5406:function(e,t,n){},"54c0":function(e,t,n){},"54dd":function(e,t,n){"use strict";n("bec9")},"56d7":function(e,t,n){"use strict";n.r(t);n("fd71"),n("450d");var s=n("a447"),r=n.n(s),i=(n("4fdb"),n("b076")),o=n.n(i),a=(n("06f1"),n("6ac9")),c=n.n(a),u=(n("e960"),n("b35b")),l=n.n(u),p=(n("ae26"),n("845f")),m=n.n(p),f=(n("b8e0"),n("a4c4")),d=n.n(f),h=(n("915d"),n("e04d")),g=n.n(h),v=(n("e2f3"),n("06f9")),b=n.n(v),y=(n("e612"),n("dd87")),O=n.n(y),C=(n("075a"),n("72aa")),P=n.n(C),w=(n("d4df"),n("7fc1")),M=n.n(w),_=(n("560b"),n("dcdc")),j=n.n(_),I=(n("bd49"),n("18ff")),E=n.n(I),T=(n("960d"),n("defb")),D=n.n(T),S=(n("cb70"),n("b370")),x=n.n(S),k=(n("a7cc"),n("df33")),A=n.n(k),G=(n("be4f"),n("896a")),L=n.n(G),R=(n("10cb"),n("f3ad")),N=n.n(R),U=(n("f4f9"),n("c2cc")),$=n.n(U),B=(n("7a0f"),n("0f6c")),Y=n.n(B),F=(n("1951"),n("eedf")),V=n.n(F),q=(n("9e1f"),n("6ed5")),H=n.n(q),z=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"avatar",class:"circle"===e.shape?"shape-circle":""},[n("img",{attrs:{src:e.avatarSrc}})])},J=[],Q=n("f6e3"),W=n.n(Q),Z={props:{src:String,type:{type:String,default:"C2C"},shape:{type:String,default:"circle"}},computed:{avatarSrc:function(){var e=this.src;return/^(https:|http:|\/\/)/.test(e)?e:this.defaultSrc},defaultSrc:function(){switch(this.type){case"C2C":return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png";case"GROUP":return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-3.png";case this.TIM.TYPES.CONV_SYSTEM:return W.a;default:return"https://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-1.png"}}}},X=Z,ee=(n("691c"),n("2877")),te=Object(ee["a"])(X,K,J,!1,null,"bd1b31fe",null),ne=te.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":"æ­£åœ¨æ‹¼å‘½åˆå§‹åŒ–...","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e.isLogin?n("div",{staticClass:"chat-wrapper"},[n("el-row",[n("el-col",{attrs:{span:5}},[n("profile-bar"),n("side-bar")],1),n("el-col",{attrs:{span:19}},[n("current-conversation")],1)],1)],1):n("div",{attrs:{id:"wrapper"}},[n("login",{key:e.initialAppid,attrs:{"initial-appid":e.initialAppid,"initial-secret":e.initialSecret},on:{submit:e.doLogin}}),e._m(0)],1),n("image-previewer")],1)},re=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meta"},[e._v("æ„è§/å»ºè®®å¯ç§»æ­¥ "),n("a",{attrs:{href:"https://github.com/paotuan/paotuan/issues",target:"_blank"}},[e._v("Github")]),e._v("ï¼Œæˆ–åŠ äº¤æµç¾¤ï¼š115699014")])}],ie=(n("8e6e"),n("456d"),n("c5f6"),n("ac6a"),n("a481"),n("4917"),n("6762"),n("2fdb"),n("46a1"),n("e5f2")),oe=n.n(ie),ae=(n("7f7f"),n("28a5"),n("768b")),ce=(n("f559"),n("bd86")),ue=n("2f62"),le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"current-conversation-wrapper"},[e.showCurrentConversation?n("div",{staticClass:"current-conversation",on:{scroll:e.onScroll}},[n("div",{staticClass:"header"},[n("div",{staticClass:"name"},[e._v(e._s(e.name))])]),n("div",{staticClass:"content"},[n("div",{ref:"message-list",staticClass:"message-list",on:{scroll:this.onScroll}},[e.isCompleted?n("div",{staticClass:"no-more"},[e._v("æ²¡æœ‰æ›´å¤šäº†")]):n("div",{staticClass:"more"},[n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$store.dispatch("getMessageList",e.currentConversation.conversationID)}}},[e._v("æŸ¥çœ‹æ›´å¤š")])],1),e._l(e.currentMessageList,(function(e){return n("message-item",{key:e.ID,attrs:{message:e}})}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowScrollButtomTips,expression:"isShowScrollButtomTips"}],staticClass:"newMessageTips",on:{click:e.scrollMessageListToButtom}},[e._v("å›åˆ°æœ€æ–°ä½ç½®")])]),e.showMessageSendBox?n("div",{staticClass:"footer"},[n("message-send-box")],1):e._e()]):e._e(),e.showConversationProfile?n("div",{staticClass:"profile"},[e.currentConversation.type===e.TIM.TYPES.CONV_GROUP?n("right-panel"):n("conversation-profile")],1):e._e(),n("member-profile-card")],1)},pe=[],me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.focus?{backgroundColor:"white"}:{},attrs:{id:"message-send-box-wrapper"},on:{drop:e.dropHandler}},[n("div",{staticClass:"send-header-bar"},[n("el-popover",{attrs:{placement:"top",width:"400",trigger:"click"}},[n("div",{staticClass:"emojis"},e._l(e.emojiName,(function(t){return n("div",{key:t,staticClass:"emoji",on:{click:function(n){return e.chooseEmoji(t)}}},[n("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.emojiUrl+e.emojiMap[t]}})])})),0),n("i",{staticClass:"iconfont icon-smile",attrs:{slot:"reference",title:"å‘è¡¨æƒ…"},slot:"reference"})]),n("i",{staticClass:"iconfont icon-tupian",attrs:{title:"å‘å›¾ç‰‡"},on:{click:e.handleSendImageClick}}),n("i",{staticClass:"el-icon-camera",attrs:{title:"å‘è§†é¢‘"},on:{click:e.handleSendVideoClick}}),n("i",{staticClass:"iconfont icon-wenjian",attrs:{title:"å‘æ–‡ä»¶"},on:{click:e.handleSendFileClick}}),n("i",{staticClass:"el-icon-warning-outline",attrs:{title:"éª°å­æŒ‡å—"},on:{click:function(t){e.showDiceUsageVisible=!0}}})],1),n("el-dialog",{attrs:{title:"ğŸ² å¦‚ä½•ä½¿ç”¨éª°å­",visible:e.showDiceUsageVisible,width:"40%"},on:{"update:visible":function(t){e.showDiceUsageVisible=t}}},[n("div",{staticClass:"dice-usage"},[n("div",[e._v("é¦–å…ˆè¯·ç¡®ä¿ç¾¤ä¸»å¯ç”¨äº†ç¾¤æœºå™¨äººã€‚åœ¨å¯ç”¨æœºå™¨äººåï¼Œæœºå™¨äººä¼šå¯¹ç¾¤é‡Œçš„éª°å­æŒ‡ä»¤åšå‡ºå“åº”ã€‚")]),n("div",[e._v("éª°å­æŒ‡ä»¤ä»¥å°æ•°ç‚¹å¼€å¤´ï¼ˆä¸­æ–‡å¥å·äº¦å¯ï¼‰ï¼Œæ¥ä¸€ä¸ªåˆæ³•çš„éª°å­è¡¨è¾¾å¼ã€‚æœºå™¨äººæ”¯æŒå¤šç§å¸¸è§çš„éª°å­è¡¨è¾¾å¼ï¼Œæœ‰å…³è¡¨è¾¾å¼çš„ç»†èŠ‚å¯ä»¥\n          "),n("el-link",{staticClass:"inline-link",attrs:{type:"primary",href:"https://greenimp.github.io/rpg-dice-roller/guide/notation/",target:"_blank",underline:!1}},[e._v("å‚è€ƒè¯¦ç»†æ–‡æ¡£")]),e._v("ã€‚\n        ")],1),n("div",[e._v("å¸¸ç”¨æŒ‡ä»¤ï¼š")]),n("ul",[n("li",[e._v("åŸºç¡€éª°å­ï¼š"),n("span",[e._v(".d6")]),e._v(" â†’ æŠ•æ·ä¸€ä¸ªå…­é¢éª°ï¼ˆéª°å­é¢æ•°å¯æ›¿æ¢ä¸ºä»»æ„æ•°å­—ï¼‰")]),n("li",[e._v("ç™¾åˆ†éª°ï¼š"),n("span",[e._v(".d%")]),e._v(" â†’ æŠ•æ·ä¸€ä¸ªç™¾åˆ†éª°ï¼Œç­‰åŒäº "),n("span",[e._v(".d100")])]),n("li",[e._v("éª°å­ç»„åˆï¼š"),n("span",[e._v(".2d6+d4")]),e._v(" â†’ æŠ•æ·ä¸¤ä¸ªå…­é¢éª°å’Œä¸€ä¸ªå››é¢éª°ï¼ˆæ”¯æŒåŒæ—¶å¤šä¸ªéª°å­å’ŒåŸºç¡€è¿ç®—ï¼‰")]),n("li",[e._v("COC å¥–åŠ±éª°ï¼š"),n("span",[e._v(".2d%kl1")]),e._v(" â†’ æŠ•æ·ä¸¤ä¸ªç™¾åˆ†éª°ï¼Œå¹¶ä¿ç•™ï¼ˆ"),n("b",[e._v("k")]),e._v("eepï¼‰æœ€ä½ï¼ˆ"),n("b",[e._v("l")]),e._v("owestï¼‰çš„ä¸€ä¸ª")]),n("li",[e._v("Fate éª°å­ï¼š"),n("span",[e._v(".4dF")]),e._v(" â†’ æŠ•æ·å››ä¸ª Fate è§„åˆ™çš„éª°å­")])]),n("div",[e._v("åœ¨éª°å­è¡¨è¾¾å¼åé¢å¯ä»¥æ¥ä¸ŠåŠ¨ä½œçš„æè¿°ï¼Œä»¥å¢å¼ºæŒ‡ä»¤çš„å¯è¯»æ€§ï¼Œä¾‹å¦‚ "),n("span",[e._v(".d% è†å¬")]),e._v(" ã€‚åç»­ä¹Ÿå°†å¢åŠ æŠ•éª°ä¸äººç‰©å¡çš„è”åŠ¨æ•ˆæœã€‚")])])]),n("el-popover",{staticStyle:{"max-height":"500px","overflow-y":"scroll"},attrs:{trigger:"manual",placement:"top"},model:{value:e.showAtGroupMember,callback:function(t){e.showAtGroupMember=t},expression:"showAtGroupMember"}},e._l(e.memberList,(function(t){return n("el-radio-group",{key:t.userID,staticStyle:{display:"flex","flex-decoration":"column"},on:{change:e.handleSelectAtUser},model:{value:e.atUserID,callback:function(t){e.atUserID=t},expression:"atUserID"}},[n("el-radio",{attrs:{label:t.userID}},[e._v(e._s(t.nameCard||t.nick||t.userID))])],1)})),1),n("div",{staticClass:"bottom"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.messageContent,expression:"messageContent"}],ref:"text-input",staticClass:"text-input",attrs:{rows:"4",resize:"false"},domProps:{value:e.messageContent},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.handleEnter(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),e.handleUp(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),e.handleDown(t))}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?(t.preventDefault(),t.shiftKey||t.altKey||t.metaKey?null:e.handleLine(t)):null},input:function(t){t.target.composing||(e.messageContent=t.target.value)}}}),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"æŒ‰Enterå‘é€æ¶ˆæ¯ï¼ŒCtrl+Enteræ¢è¡Œ",placement:"left-start"}},[n("div",{staticClass:"btn-send",on:{click:e.sendTextMessage}},[n("div",{staticClass:"tim-icon-send"})])])],1),n("input",{ref:"imagePicker",staticStyle:{display:"none"},attrs:{type:"file",id:"imagePicker",accept:".jpg, .jpeg, .png, .gif, .bmp"},on:{change:e.sendImage}}),n("input",{ref:"filePicker",staticStyle:{display:"none"},attrs:{type:"file",id:"filePicker"},on:{change:e.sendFile}}),n("input",{ref:"videoPicker",staticStyle:{display:"none"},attrs:{type:"file",id:"videoPicker",accept:".mp4"},on:{change:e.sendVideo}})],1)},fe=[],de=(n("20d6"),n("78a7"),n("33ca")),he=n.n(de),ge=(n("0c67"),n("299c")),ve=n.n(ge),be=(n("b5d8"),n("f494")),ye=n.n(be),Oe=(n("fe07"),n("6ac5")),Ce=n.n(Oe),Pe=(n("eca7"),n("3787")),we=n.n(Pe),Me=(n("425f"),n("4105")),_e=n.n(Me),je=(n("fe90"),"https://imgcache.qq.com/open/qcloud/tim/assets/emoji/"),Ie={"[NO]":"emoji_0@2x.png","[OK]":"emoji_1@2x.png","[ä¸‹é›¨]":"emoji_2@2x.png","[ä¹ˆä¹ˆå“’]":"emoji_3@2x.png","[ä¹’ä¹“]":"emoji_4@2x.png","[ä¾¿ä¾¿]":"emoji_5@2x.png","[ä¿¡å°]":"emoji_6@2x.png","[å·ç¬‘]":"emoji_7@2x.png","[å‚²æ…¢]":"emoji_8@2x.png","[å†è§]":"emoji_9@2x.png","[å†·æ±—]":"emoji_10@2x.png","[å‡‹è°¢]":"emoji_11@2x.png","[åˆ€]":"emoji_12@2x.png","[åˆ é™¤]":"emoji_13@2x.png","[å‹¾å¼•]":"emoji_14@2x.png","[å‘å‘†]":"emoji_15@2x.png","[å‘æŠ–]":"emoji_16@2x.png","[å¯æ€œ]":"emoji_17@2x.png","[å¯çˆ±]":"emoji_18@2x.png","[å³å“¼å“¼]":"emoji_19@2x.png","[å³å¤ªæ]":"emoji_20@2x.png","[å³è½¦å¤´]":"emoji_21@2x.png","[å]":"emoji_22@2x.png","[å“]":"emoji_23@2x.png","[å’’éª‚]":"emoji_24@2x.png","[å’–å•¡]":"emoji_25@2x.png","[å•¤é…’]":"emoji_26@2x.png","[å˜˜]":"emoji_27@2x.png","[å›å¤´]":"emoji_28@2x.png","[å›°]":"emoji_29@2x.png","[åç¬‘]":"emoji_30@2x.png","[å¤šäº‘]":"emoji_31@2x.png","[å¤§å…µ]":"emoji_32@2x.png","[å¤§å“­]":"emoji_33@2x.png","[å¤ªé˜³]":"emoji_34@2x.png","[å¥‹æ–—]":"emoji_35@2x.png","[å¥¶ç“¶]":"emoji_36@2x.png","[å§”å±ˆ]":"emoji_37@2x.png","[å®³ç¾]":"emoji_38@2x.png","[å°´å°¬]":"emoji_39@2x.png","[å·¦å“¼å“¼]":"emoji_40@2x.png","[å·¦å¤ªæ]":"emoji_41@2x.png","[å·¦è½¦å¤´]":"emoji_42@2x.png","[å·®åŠ²]":"emoji_43@2x.png","[å¼±]":"emoji_44@2x.png","[å¼º]":"emoji_45@2x.png","[å½©å¸¦]":"emoji_46@2x.png","[å½©çƒ]":"emoji_47@2x.png","[å¾—æ„]":"emoji_48@2x.png","[å¾®ç¬‘]":"emoji_49@2x.png","[å¿ƒç¢äº†]":"emoji_50@2x.png","[å¿«å“­äº†]":"emoji_51@2x.png","[æ€„ç«]":"emoji_52@2x.png","[æ€’]":"emoji_53@2x.png","[æƒŠæ]":"emoji_54@2x.png","[æƒŠè®¶]":"emoji_55@2x.png","[æ†¨ç¬‘]":"emoji_56@2x.png","[æ‰‹æª]":"emoji_57@2x.png","[æ‰“å“ˆæ¬ ]":"emoji_58@2x.png","[æŠ“ç‹‚]":"emoji_59@2x.png","[æŠ˜ç£¨]":"emoji_60@2x.png","[æŠ é¼»]":"emoji_61@2x.png","[æŠ±æŠ±]":"emoji_62@2x.png","[æŠ±æ‹³]":"emoji_63@2x.png","[æ‹³å¤´]":"emoji_64@2x.png","[æŒ¥æ‰‹]":"emoji_65@2x.png","[æ¡æ‰‹]":"emoji_66@2x.png","[æ’‡å˜´]":"emoji_67@2x.png","[æ“¦æ±—]":"emoji_68@2x.png","[æ•²æ‰“]":"emoji_69@2x.png","[æ™•]":"emoji_70@2x.png","[æœˆäº®]":"emoji_71@2x.png","[æ£’æ£’ç³–]":"emoji_72@2x.png","[æ±½è½¦]":"emoji_73@2x.png","[æ²™å‘]":"emoji_74@2x.png","[æµæ±—]":"emoji_75@2x.png","[æµæ³ª]":"emoji_76@2x.png","[æ¿€åŠ¨]":"emoji_77@2x.png","[ç¯æ³¡]":"emoji_78@2x.png","[ç‚¸å¼¹]":"emoji_79@2x.png","[ç†ŠçŒ«]":"emoji_80@2x.png","[çˆ†ç­‹]":"emoji_81@2x.png","[çˆ±ä½ ]":"emoji_82@2x.png","[çˆ±å¿ƒ]":"emoji_83@2x.png","[çˆ±æƒ…]":"emoji_84@2x.png","[çŒªå¤´]":"emoji_85@2x.png","[çŒ«å’ª]":"emoji_86@2x.png","[çŒ®å»]":"emoji_87@2x.png","[ç«ç‘°]":"emoji_88@2x.png","[ç“¢è™«]":"emoji_89@2x.png","[ç–‘é—®]":"emoji_90@2x.png","[ç™½çœ¼]":"emoji_91@2x.png","[çš®çƒ]":"emoji_92@2x.png","[ç¡è§‰]":"emoji_93@2x.png","[ç£•å¤´]":"emoji_94@2x.png","[ç¤ºçˆ±]":"emoji_95@2x.png","[ç¤¼å“è¢‹]":"emoji_96@2x.png","[ç¤¼ç‰©]":"emoji_97@2x.png","[ç¯®çƒ]":"emoji_98@2x.png","[ç±³é¥­]":"emoji_99@2x.png","[ç³—å¤§äº†]":"emoji_100@2x.png","[çº¢åŒå–œ]":"emoji_101@2x.png","[çº¢ç¯ç¬¼]":"emoji_102@2x.png","[çº¸å·¾]":"emoji_103@2x.png","[èƒœåˆ©]":"emoji_104@2x.png","[è‰²]":"emoji_105@2x.png","[è¯]":"emoji_106@2x.png","[èœåˆ€]":"emoji_107@2x.png","[è›‹ç³•]":"emoji_108@2x.png","[èœ¡çƒ›]":"emoji_109@2x.png","[è¡—èˆ]":"emoji_110@2x.png","[è¡°]":"emoji_111@2x.png","[è¥¿ç“œ]":"emoji_112@2x.png","[è°ƒçš®]":"emoji_113@2x.png","[è±¡æ£‹]":"emoji_114@2x.png","[è·³ç»³]":"emoji_115@2x.png","[è·³è·³]":"emoji_116@2x.png","[è½¦å¢]":"emoji_117@2x.png","[è½¬åœˆ]":"emoji_118@2x.png","[é„™è§†]":"emoji_119@2x.png","[é…·]":"emoji_120@2x.png","[é’ç¥¨]":"emoji_121@2x.png","[é’»æˆ’]":"emoji_122@2x.png","[é—ªç”µ]":"emoji_123@2x.png","[é—­å˜´]":"emoji_124@2x.png","[é—¹é’Ÿ]":"emoji_125@2x.png","[é˜´é™©]":"emoji_126@2x.png","[éš¾è¿‡]":"emoji_127@2x.png","[é›¨ä¼]":"emoji_128@2x.png","[é’è›™]":"emoji_129@2x.png","[é¢æ¡]":"emoji_130@2x.png","[é­ç‚®]":"emoji_131@2x.png","[é£è½¦]":"emoji_132@2x.png","[é£å»]":"emoji_133@2x.png","[é£æœº]":"emoji_134@2x.png","[é¥¥é¥¿]":"emoji_135@2x.png","[é¦™è•‰]":"emoji_136@2x.png","[éª·é«…]":"emoji_137@2x.png","[éº¦å…‹é£]":"emoji_138@2x.png","[éº»å°†]":"emoji_139@2x.png","[é¼“æŒ]":"emoji_140@2x.png","[é¾‡ç‰™]":"emoji_141@2x.png"},Ee=["[é¾‡ç‰™]","[è°ƒçš®]","[æµæ±—]","[å·ç¬‘]","[å†è§]","[æ•²æ‰“]","[æ“¦æ±—]","[çŒªå¤´]","[ç«ç‘°]","[æµæ³ª]","[å¤§å“­]","[å˜˜]","[é…·]","[æŠ“ç‹‚]","[å§”å±ˆ]","[ä¾¿ä¾¿]","[ç‚¸å¼¹]","[èœåˆ€]","[å¯çˆ±]","[è‰²]","[å®³ç¾]","[å¾—æ„]","[å]","[å¾®ç¬‘]","[æ€’]","[å°´å°¬]","[æƒŠæ]","[å†·æ±—]","[çˆ±å¿ƒ]","[ç¤ºçˆ±]","[ç™½çœ¼]","[å‚²æ…¢]","[éš¾è¿‡]","[æƒŠè®¶]","[ç–‘é—®]","[å›°]","[ä¹ˆä¹ˆå“’]","[æ†¨ç¬‘]","[çˆ±æƒ…]","[è¡°]","[æ’‡å˜´]","[é˜´é™©]","[å¥‹æ–—]","[å‘å‘†]","[å³å“¼å“¼]","[æŠ±æŠ±]","[åç¬‘]","[é£å»]","[é„™è§†]","[æ™•]","[å¤§å…µ]","[å¯æ€œ]","[å¼º]","[å¼±]","[æ¡æ‰‹]","[èƒœåˆ©]","[æŠ±æ‹³]","[å‡‹è°¢]","[ç±³é¥­]","[è›‹ç³•]","[è¥¿ç“œ]","[å•¤é…’]","[ç“¢è™«]","[å‹¾å¼•]","[OK]","[çˆ±ä½ ]","[å’–å•¡]","[æœˆäº®]","[åˆ€]","[å‘æŠ–]","[å·®åŠ²]","[æ‹³å¤´]","[å¿ƒç¢äº†]","[å¤ªé˜³]","[ç¤¼ç‰©]","[çš®çƒ]","[éª·é«…]","[æŒ¥æ‰‹]","[é—ªç”µ]","[é¥¥é¥¿]","[å’’éª‚]","[æŠ˜ç£¨]","[æŠ é¼»]","[é¼“æŒ]","[ç³—å¤§äº†]","[å·¦å“¼å“¼]","[æ‰“å“ˆæ¬ ]","[å¿«å“­äº†]","[å“]","[ç¯®çƒ]","[ä¹’ä¹“]","[NO]","[è·³è·³]","[æ€„ç«]","[è½¬åœˆ]","[ç£•å¤´]","[å›å¤´]","[è·³ç»³]","[æ¿€åŠ¨]","[è¡—èˆ]","[çŒ®å»]","[å·¦å¤ªæ]","[å³å¤ªæ]","[é—­å˜´]","[çŒ«å’ª]","[çº¢åŒå–œ]","[é­ç‚®]","[çº¢ç¯ç¬¼]","[éº»å°†]","[éº¦å…‹é£]","[ç¤¼å“è¢‹]","[ä¿¡å°]","[è±¡æ£‹]","[å½©å¸¦]","[èœ¡çƒ›]","[çˆ†ç­‹]","[æ£’æ£’ç³–]","[å¥¶ç“¶]","[é¢æ¡]","[é¦™è•‰]","[é£æœº]","[å·¦è½¦å¤´]","[è½¦å¢]","[å³è½¦å¤´]","[å¤šäº‘]","[ä¸‹é›¨]","[é’ç¥¨]","[ç†ŠçŒ«]","[ç¯æ³¡]","[é£è½¦]","[é—¹é’Ÿ]","[é›¨ä¼]","[å½©çƒ]","[é’»æˆ’]","[æ²™å‘]","[çº¸å·¾]","[æ‰‹æª]","[é’è›™]"];function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se={name:"message-send-box",props:["scrollMessageListToButtom"],components:{ElInput:N.a,ElForm:_e.a,ElFormItem:we.a,ElDialog:A.a,ElPopover:c.a,ElRadioGroup:Ce.a,ElRadio:ye.a,ElTooltip:ve.a,ElRate:he.a},data:function(){return{callingList:[],callingType:"",showCallingMember:!1,colors:["#99A9BF","#F7BA2A","#FF9900"],messageContent:"",isSendCustomMessage:!1,sendCustomDialogVisible:!1,surveyDialogVisible:!1,showDiceUsageVisible:!1,form:{data:"",description:"",extension:""},rate:5,suggestion:"",file:"",emojiMap:Ie,emojiName:Ee,emojiUrl:je,showAtGroupMember:!1,atUserID:"",focus:!1}},computed:De(De({},Object(ue["b"])(["toAccount","currentConversationType"])),Object(ue["c"])({memberList:function(e){return e.group.currentMemberList},userID:function(e){return e.user.userID},groupProfile:function(e){return e.conversation.currentConversation.groupProfile}})),mounted:function(){this.$refs["text-input"].addEventListener("paste",this.handlePaste),this.$bus.$on("reEditMessage",this.reEditMessage)},beforeDestroy:function(){this.$refs["text-input"].removeEventListener("paste",this.handlePaste)},methods:{getList:function(e){this.callingList=e},cancelCalling:function(){this.showCallingMember=!1},callingHandler:function(){if(this.callingList.length<1)this.$store.commit("showMessage",{type:"warning",message:"è¯·é€‰æ‹©æˆå‘˜"});else{this.showCallingMember=!1;var e={memberList:this.callingList,type:this.TIM.TYPES.CONV_GROUP};this.$store.commit("setCallingList",e),"video"!==this.callingType?"audio"!==this.callingType||this.$bus.$emit("audio-call"):this.$bus.$emit("video-call")}},trtcCalling:function(e){if("video"===e&&(this.callingType="video"),"audio"===e&&(this.callingType="audio"),"C2C"===this.currentConversationType){var t=[this.toAccount],n={memberList:t,type:"C2C"};return this.$store.commit("setCallingList",n),void this.$bus.$emit("".concat(e,"-call"))}this.currentConversationType===this.TIM.TYPES.CONV_GROUP&&(this.showCallingMember=!0)},audioCall:function(){this.$bus.$emit("audio-call"),this.$store.commit("showAudioCall",!0)},handleEmojiShow:function(){this.emojiShow=!0,this.bigEmojiShow=!1},handleBigEmojiShow:function(e){var t=document.getElementById("bigEmojiBox");t&&(t.scrollTop=0),this.curItemIndex=e,this.curBigEmojiItemList=this.bigEmojiList[e].list,this.emojiShow=!1,this.bigEmojiShow=!0},chooseBigEmoji:function(e){var t=this;this.popoverVisible=!1;var n=this.tim.createFaceMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{index:this.curItemIndex+1,data:"".concat(e,"@2x")}});this.$store.commit("pushCurrentMessageList",n),this.$bus.$emit("scroll-bottom"),this._sendMessage(n).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})}))},reEditMessage:function(e){this.messageContent=e},handleSelectAtUser:function(){this.messageContent+=this.atUserID+" ",this.showAtGroupMember=!1},handleUp:function(){var e=this,t=this.memberList.findIndex((function(t){return t.userID===e.atUserID}));t-1<0||(this.atUserID=this.memberList[t-1].userID)},handleDown:function(){var e=this,t=this.memberList.findIndex((function(t){return t.userID===e.atUserID}));t+1>=this.memberList.length||(this.atUserID=this.memberList[t+1].userID)},handleEnter:function(){this.showAtGroupMember?this.handleSelectAtUser():this.sendTextMessage()},handleLine:function(){this.messageContent+="\n"},handlePaste:function(e){var t,n=this,s=e.clipboardData;if(s&&s.files&&s.files.length>0&&(t=s.files[0]),"undefined"!==typeof t){var r=this.tim.createImageMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:t},onProgress:function(e){n.$set(r,"progress",e)}});this.$store.commit("pushCurrentMessageList",r);var i=this._sendMessage(r);i.catch((function(e){n.$store.commit("showMessage",{type:"error",message:e.message})}))}},dropHandler:function(e){var t=this;e.preventDefault();var n=e.dataTransfer.files[0],s={};s="video/mp4"===n.type?this.tim.createVideoMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:n},onProgress:function(e){t.$set(s,"progress",e)}}):this.tim.createFileMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:n},onProgress:function(e){t.$set(s,"progress",e)}}),this.$store.commit("pushCurrentMessageList",s),this._sendMessage(s).then((function(){t.$refs.videoPicker.value=null})).catch((function(e){t.$store.commit("showMessage",{message:e.message,type:"error"})}))},sendTextMessage:function(){var e=this;if(""===this.messageContent||0===this.messageContent.trim().length)return this.messageContent="",void this.$store.commit("showMessage",{message:"ä¸èƒ½å‘é€ç©ºæ¶ˆæ¯å“¦ï¼",type:"info"});var t=this.tim.createTextMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{text:this.messageContent}});this.$store.commit("pushCurrentMessageList",t),this.$bus.$emit("scroll-bottom"),this._sendMessage(t).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})),this.messageContent=""},sendCustomMessage:function(){var e=this;if(0!==this.form.data.length||0!==this.form.description.length||0!==this.form.extension.length){var t=this.tim.createCustomMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{data:this.form.data,description:this.form.description,extension:this.form.extension}});this.$store.commit("pushCurrentMessageList",t),this._sendMessage(t).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})),Object.assign(this.form,{data:"",description:"",extension:""}),this.sendCustomDialogVisible=!1}else this.$store.commit("showMessage",{message:"ä¸èƒ½å‘é€ç©ºæ¶ˆæ¯",type:"info"})},random:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},sendSurvey:function(){var e=this,t=this.tim.createCustomMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{data:"survey",description:String(this.rate),extension:this.suggestion}});this.$store.commit("pushCurrentMessageList",t),Object.assign(this.form,{data:"",description:"",extension:""}),this._sendMessage(t).then((function(){Object.assign(e,{rate:5,suggestion:""})})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})),this.surveyDialogVisible=!1},chooseEmoji:function(e){this.messageContent+=e},handleSendImageClick:function(){this.$refs.imagePicker.click()},handleSendFileClick:function(){this.$refs.filePicker.click()},handleSendVideoClick:function(){this.$refs.videoPicker.click()},groupLive:function(){this.$store.commit("updateGroupLiveInfo",{groupID:this.toAccount,anchorID:this.userID}),this.$bus.$emit("open-group-live",{channel:1})},sendImage:function(){var e=this,t=this.tim.createImageMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:document.getElementById("imagePicker")},onProgress:function(n){e.$set(t,"progress",n)}});this.$store.commit("pushCurrentMessageList",t),this._sendMessage(t).then((function(){e.$refs.imagePicker.value=null})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},sendFile:function(){var e=this,t=this.tim.createFileMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:document.getElementById("filePicker")},onProgress:function(n){e.$set(t,"progress",n)}});this.$store.commit("pushCurrentMessageList",t),this._sendMessage(t).then((function(){e.$refs.filePicker.value=null})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},sendVideo:function(){var e=this,t=this.tim.createVideoMessage({to:this.toAccount,conversationType:this.currentConversationType,payload:{file:document.getElementById("videoPicker")},onProgress:function(n){e.$set(t,"progress",n)}});this.$store.commit("pushCurrentMessageList",t),this._sendMessage(t).then((function(){e.$refs.videoPicker.value=null})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},_sendMessage:function(e){var t=this;return this.tim.sendMessage(e).then((function(n){return t.$store.dispatch("insertGameLogs",[e]),n}))}}},xe=Se,ke=(n("93d0"),Object(ee["a"])(xe,me,fe,!1,null,"b51e9e60",null)),Ae=ke.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-wrapper",class:e.messagePosition},[e.currentConversationType===e.TIM.TYPES.CONV_C2C?n("div",{staticClass:"c2c-layout",class:e.messagePosition},[e.showAvatar?n("div",{staticClass:"col-1"},[n("avatar",{attrs:{src:e.avatar}})],1):e._e(),n("div",{staticClass:"col-2"},[n("div",{staticClass:"content-wrapper"},[e.isMine?n("message-status-icon",{attrs:{message:e.message}}):e._e(),e.message.type===e.TIM.TYPES.MSG_TEXT?n("text-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_IMAGE?n("image-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_FILE?n("file-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_SOUND?n("sound-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GRP_TIP?n("group-tip-element",{attrs:{payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GRP_SYS_NOTICE?n("group-system-notice-element",{attrs:{payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_CUSTOM?n("custom-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_FACE?n("face-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_VIDEO?n("video-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GEO?n("geo-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):n("span",[e._v("æš‚æœªæ”¯æŒçš„æ¶ˆæ¯ç±»å‹ï¼š"+e._s(e.message.type))])],1),e.showMessageHeader?n("message-footer",{attrs:{message:e.message}}):e._e()],1),n("div",{staticClass:"col-3"})]):e._e(),e.currentConversationType===e.TIM.TYPES.CONV_GROUP?n("div",{staticClass:"group-layout",class:e.messagePosition},[e.showAvatar?n("div",{staticClass:"col-1"},[n("avatar",{staticClass:"group-member-avatar",attrs:{src:e.avatar},nativeOn:{click:function(t){return e.showGroupMemberProfile(t)}}})],1):e._e(),n("div",{staticClass:"col-2"},[e.showMessageHeader?n("message-header",{attrs:{message:e.message}}):e._e(),n("div",{staticClass:"content-wrapper"},[e.isMine?n("message-status-icon",{attrs:{message:e.message}}):e._e(),e.message.type===e.TIM.TYPES.MSG_TEXT?n("text-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_IMAGE?n("image-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_FILE?n("file-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_SOUND?n("sound-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GRP_TIP?n("group-tip-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_CUSTOM?n("custom-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_FACE?n("face-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_VIDEO?n("video-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):e.message.type===e.TIM.TYPES.MSG_GEO?n("geo-element",{attrs:{isMine:e.isMine,payload:e.message.payload,message:e.message}}):n("span",[e._v("æš‚æœªæ”¯æŒçš„æ¶ˆæ¯ç±»å‹ï¼š"+e._s(e.message.type))])],1)],1),n("div",{staticClass:"col-3"})]):e._e(),e.currentConversationType===e.TIM.TYPES.CONV_SYSTEM?n("div",{staticClass:"system-layout"},[n("div",{staticClass:"col-1"},[n("avatar",{attrs:{src:e.avatar,type:e.currentConversationType}})],1),n("div",{staticClass:"col-2"},[n("message-header",{attrs:{message:e.message}}),n("group-system-notice-element",{attrs:{payload:e.message.payload,message:e.message}})],1)]):e._e()])},Le=[],Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.messageIconClass,staticStyle:{width:"16px",height:"16px"},on:{click:e.handleIconClick}},[e._v(e._s("message-send-fail"===e.messageIconClass?"!":""))])},Ne=[],Ue={name:"MessageStatusIcon",props:{message:{type:Object,required:!0}},computed:{messageIconClass:function(){switch(this.message.status){case"unSend":return"el-icon-loading";case"fail":return"message-send-fail";default:return""}}},methods:{handleIconClick:function(){var e=this;"message-send-fail"===this.messageIconClass&&this.tim.resendMessage(this.message).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))}}},$e=Ue,Be=(n("a86b"),Object(ee["a"])($e,Re,Ne,!1,null,"97210bde",null)),Ye=Be.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"base",class:[e.isMine?"right":"left"]},[n("div",{staticClass:"name text-ellipsis"},[e._v(e._s(e.from))]),n("div",{staticClass:"date"},[e._v(e._s(e.date))])])},Ve=[];function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=e.getFullYear(),s=e.getMonth()+1,r=e.getDate();return"".concat(n).concat(t).concat(Je(s)).concat(t).concat(Je(r))}function He(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getHours(),s=e.getMinutes(),r=e.getSeconds();return t?"".concat(Je(n),":").concat(Je(s),":").concat(Je(r)):"".concat(n,":").concat(Je(s))}function ze(e){return"".concat(qe(e)," ").concat(He(e))}function Ke(e){return e.toDateString()===(new Date).toDateString()}function Je(e){return e<10?"0".concat(e):e}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze={name:"MessageHeader",props:{message:{type:Object,required:!0}},computed:We(We({},Object(ue["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUserProfile:function(e){return e.user.currentUserProfile},currentMemberList:function(e){return e.group.currentMemberList}})),{},{date:function(){return ze(new Date(1e3*this.message.time))},from:function(){var e=this.currentConversation.type===this.TIM.TYPES.CONV_C2C;return this.isMine?this.currentUserProfile.nick||this.currentUserProfile.userID:e?this.currentConversation.userProfile.nick||this.currentConversation.userProfile.userID:this.currentConversation.type===this.TIM.TYPES.CONV_SYSTEM?this.message.type===this.TIM.TYPES.MSG_GRP_SYS_NOTICE?"ç¾¤ç³»ç»Ÿé€šçŸ¥":"ç³»ç»Ÿé€šçŸ¥":this.message.nick||this.message.from},isMine:function(){return"out"===this.message.flow}})},Xe=Ze,et=(n("6b14"),Object(ee["a"])(Xe,Fe,Ve,!1,null,"2cc0a061",null)),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"base",class:[e.isMine?"right":"left"]},[n("div",{staticClass:"date"},[e._v(e._s(e.date))])])},st=[];function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot={name:"MessageFooter",props:{message:{type:Object,required:!0}},computed:it(it({},Object(ue["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUserProfile:function(e){return e.user.currentUserProfile},currentMemberList:function(e){return e.group.currentMemberList}})),{},{date:function(){return ze(new Date(1e3*this.message.time))},from:function(){var e=this.currentConversation.type===this.TIM.TYPES.CONV_C2C;return this.isMine?this.currentUserProfile.nick||this.currentUserProfile.userID:e?this.currentConversation.userProfile.nick||this.currentConversation.userProfile.userID:this.message.nick||this.message.from},isMine:function(){return"out"===this.message.flow}})},at=ot,ct=(n("e017"),Object(ee["a"])(at,nt,st,!1,null,"11baf300",null)),ut=ct.exports,lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[n("div",{staticClass:"file-element-wrapper",attrs:{title:"å•å‡»ä¸‹è½½"},on:{click:e.downloadFile}},[n("div",{staticClass:"header"},[n("i",{staticClass:"el-icon-document file-icon"}),n("div",{staticClass:"file-element"},[n("span",{staticClass:"file-name"},[e._v(e._s(e.fileName))]),n("span",{staticClass:"file-size"},[e._v(e._s(e.size))])])]),e.showProgressBar?n("el-progress",{attrs:{percentage:e.percentage,color:function(e){return 100===e?"#67c23a":"#409eff"}}}):e._e()],1)])},pt=[],mt=(n("6b30"),n("c284")),ft=n.n(mt),dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-bubble",on:{mousedown:function(e){e.stopPropagation()},contextmenu:function(e){e.preventDefault()}}},[e.message.isRevoked?e._e():n("el-dropdown",{ref:"dropdown",attrs:{trigger:""},on:{command:e.handleCommand}},[n("div",{staticStyle:{display:"flex"}},[e.isMine&&e.messageReadByPeer?n("div",{staticClass:"message-status"},[n("span",[e._v(e._s(e.messageReadByPeer))])]):e._e(),n("div",{staticClass:"message-content",class:e.bubbleStyle},[e._t("default")],2)]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isMine?n("el-dropdown-item",{attrs:{command:"revoke"}},[e._v("æ’¤å›")]):e._e()],1)],1),e.message.isRevoked?n("div",{staticClass:"group-tip-element-wrapper"},[e._v("\n    "+e._s(e.text)+"\n    "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"edit-button",attrs:{type:"text",size:"mini"},on:{click:e.reEdit}},[e._v("Â é‡æ–°ç¼–è¾‘")])],1):e._e()],1)},ht=[],gt={name:"MessageBubble",data:function(){return{isTimeout:!1}},props:{isMine:{type:Boolean},isNew:{type:Boolean},message:{type:Object,required:!0}},created:function(){this.isTimeoutHandler()},mounted:function(){this.$refs.dropdown&&this.$refs.dropdown.$el&&this.$refs.dropdown.$el.addEventListener("mousedown",this.handleDropDownMousedown)},beforeDestroy:function(){this.$refs.dropdown&&this.$refs.dropdown.$el&&this.$refs.dropdown.$el.removeEventListener("mousedown",this.handleDropDownMousedown)},computed:{bubbleStyle:function(){var e="";return this.isMine?e+="message-send":e+="message-received",this.isNew&&(e+="new"),e},text:function(){return this.message.conversationType!==this.TIM.TYPES.CONV_C2C||this.isMine?this.message.conversationType!==this.TIM.TYPES.CONV_GROUP||this.isMine?"ä½ æ’¤å›äº†ä¸€æ¡æ¶ˆæ¯":"".concat(this.message.from,"æ’¤å›äº†ä¸€æ¡æ¶ˆæ¯"):"å¯¹æ–¹æ’¤å›äº†ä¸€æ¡æ¶ˆæ¯"},messageReadByPeer:function(){return"success"===this.message.status&&(this.message.conversationType===this.TIM.TYPES.CONV_C2C&&this.message.isPeerRead?"å·²è¯»":this.message.conversationType!==this.TIM.TYPES.CONV_C2C||this.message.isPeerRead?"":"æœªè¯»")},isEdit:function(){return!!this.isMine&&(this.message.type===this.TIM.TYPES.MSG_TEXT&&!this.isTimeout)}},methods:{handleDropDownMousedown:function(e){this.isMine&&!this.isTimeout&&2===e.buttons&&(this.$refs.dropdown.visible?this.$refs.dropdown.hide():this.$refs.dropdown.show())},handleCommand:function(e){var t=this;switch(e){case"revoke":this.tim.revokeMessage(this.message).then((function(){t.isTimeoutHandler()})).catch((function(e){t.$store.commit("showMessage",{message:e,type:"warning"})}));break;case"delete":break;default:break}},isTimeoutHandler:function(){var e=new Date;parseInt(e.getTime()/1e3)-this.message.time>120?this.isTimeout=!0:setTimeout(this.isTimeoutHandler,1e3)},reEdit:function(){this.$bus.$emit("reEditMessage",this.message.payload.text)}}},vt=gt,bt=(n("c8ad"),Object(ee["a"])(vt,dt,ht,!1,null,"5d538831",null)),yt=bt.exports,Ot={name:"FileElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:yt,ElProgress:ft.a},computed:{fileName:function(){return this.payload.fileName},fileUrl:function(){return this.payload.fileUrl},size:function(){var e=this.payload.fileSize;return e>1024?e/1024>1024?"".concat(this.toFixed(e/1024/1024)," Mb"):"".concat(this.toFixed(e/1024)," Kb"):"".concat(this.toFixed(e),"B")},showProgressBar:function(){return"unSend"===this.$parent.message.status},percentage:function(){return Math.floor(100*(this.$parent.message.progress||0))}},methods:{toFixed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toFixed(t)},downloadFile:function(){var e=this;if(window.fetch)fetch(this.fileUrl).then((function(e){return e.blob()})).then((function(t){var n=document.createElement("a"),s=window.URL.createObjectURL(t);n.href=s,n.download=e.fileName,n.click()}));else{var t=document.createElement("a");t.href=this.fileUrl,t.target="_blank",t.download=this.filename,t.click()}}}},Ct=Ot,Pt=(n("4d06"),Object(ee["a"])(Ct,lt,pt,!1,null,"96091f5a",null)),wt=Pt.exports,Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[n("div",{staticClass:"face-element-wrapper"},[n("img",{attrs:{src:e.url}})])])},_t=[],jt={name:"FaceElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:yt},computed:{url:function(){var e="";return e=this.payload.data.indexOf("@2x")>0?this.payload.data:this.payload.data+"@2x","https://webim-1252463788.file.myqcloud.com/assets/face-elem/".concat(e,".png")}}},It=jt,Et=(n("24c8"),Object(ee["a"])(It,Mt,_t,!1,null,"848acce2",null)),Tt=Et.exports,Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[n("img",{staticClass:"image-element",attrs:{src:e.imageUrl},on:{load:e.onImageLoaded,click:e.handlePreview}}),e.showProgressBar?n("el-progress",{attrs:{percentage:e.percentage,color:function(e){return 100===e?"#67c23a":"#409eff"}}}):e._e()],1)},St=[];function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var At={name:"ImageElemnt",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:yt,ElProgress:ft.a},computed:kt(kt({},Object(ue["b"])(["imgUrlList"])),{},{imageUrl:function(){var e=this.payload.imageInfoArray[0].url;return"string"!==typeof e?"":"//"===e.slice(0,2)?"https:".concat(e):e},showProgressBar:function(){return"unSend"===this.$parent.message.status},percentage:function(){return Math.floor(100*(this.$parent.message.progress||0))}}),methods:{onImageLoaded:function(e){this.$bus.$emit("image-loaded",e)},handlePreview:function(){this.$bus.$emit("image-preview",{url:this.payload.imageInfoArray[0].url})}}},Gt=At,Lt=(n("8810"),Object(ee["a"])(Gt,Dt,St,!1,null,"306e62ad",null)),Rt=Lt.exports,Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[e._l(e.contentList,(function(t,s){return["text"===t.name?n("span",{key:s},[e._v(e._s(t.text))]):"img"===t.name?n("img",{key:s,attrs:{src:t.src,width:"20px",height:"20px"}}):e._e()]}))],2)},Ut=[];function $t(e){var t=[],n=e.text,s=-1,r=-1;while(""!==n)switch(s=n.indexOf("["),r=n.indexOf("]"),s){case 0:if(-1===r)t.push({name:"text",text:n}),n="";else{var i=n.slice(0,r+1);Ie[i]?(t.push({name:"img",src:je+Ie[i]}),n=n.substring(r+1)):(t.push({name:"text",text:"["}),n=n.slice(1))}break;case-1:t.push({name:"text",text:n}),n="";break;default:t.push({name:"text",text:n.slice(0,s)}),n=n.substring(s);break}return t}var Bt={name:"TextElement",components:{MessageBubble:yt},props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},computed:{contentList:function(){return $t(this.payload)}}},Yt=Bt,Ft=(n("e6da"),Object(ee["a"])(Yt,Nt,Ut,!1,null,"748a76fd",null)),Vt=Ft.exports,qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[n("div",{staticClass:"sound-element-wrapper",attrs:{title:"å•å‡»æ’­æ”¾"},on:{click:e.play}},[n("i",{staticClass:"iconfont icon-voice"}),e._v("\n    "+e._s(e.second+'"')+"\n  ")])])},Ht=[],zt={name:"SoundElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:yt},data:function(){return{amr:null}},computed:{url:function(){return this.payload.url},size:function(){return this.payload.size},second:function(){return this.payload.second}},methods:{play:function(){var e=document.createElement("audio");e.addEventListener("error",this.tryPlayAMR),e.src=this.url;var t=e.play();t&&t.catch((function(){}))},tryPlayAMR:function(){try{var e=/MSIE|Trident|Edge/.test(window.navigator.userAgent);if(e)return void this.$store.commit("showMessage",{message:"æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯¥æ ¼å¼çš„è¯­éŸ³æ¶ˆæ¯æ’­æ”¾ï¼Œè¯·å°è¯•æ›´æ¢æµè§ˆå™¨ï¼Œå»ºè®®ä½¿ç”¨ï¼šè°·æ­Œæµè§ˆå™¨",type:"warning"});if(!window.BenzAMRRecorder){var t=document.createElement("script");t.addEventListener("load",this.playAMR),t.src="./BenzAMRRecorder.js";var n=document.getElementsByTagName("script")[0];return void n.parentNode.insertBefore(t,n)}this.playAMR()}catch(s){this.$store.commit("showMessage",{message:"æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯¥æ ¼å¼çš„è¯­éŸ³æ¶ˆæ¯æ’­æ”¾ï¼Œè¯·å°è¯•æ›´æ¢æµè§ˆå™¨ï¼Œå»ºè®®ä½¿ç”¨ï¼šè°·æ­Œæµè§ˆå™¨",type:"warning"})}},playAMR:function(){var e=this;!this.amr&&window.BenzAMRRecorder&&(this.amr=new window.BenzAMRRecorder),this.amr.isInit()?this.amr.play():this.amr.initWithUrl(this.url).then((function(){e.amr.play()}))}}},Kt=zt,Jt=(n("777c"),Object(ee["a"])(Kt,qt,Ht,!1,null,"7ab0530b",null)),Qt=Jt.exports,Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[n("video",{staticClass:"video",attrs:{src:e.payload.videoUrl,controls:""},on:{error:e.videoError}}),e.showProgressBar?n("el-progress",{attrs:{percentage:e.percentage,color:function(e){return 100===e?"#67c23a":"#409eff"}}}):e._e()],1)},Zt=[],Xt={name:"VideoElement",components:{MessageBubble:yt,ElProgress:ft.a},props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},computed:{showProgressBar:function(){return"unSend"===this.message.status},percentage:function(){return Math.floor(100*(this.$parent.message.progress||0))}},methods:{videoError:function(e){this.$store.commit("showMessage",{type:"error",message:"è§†é¢‘å‡ºé”™ï¼Œé”™è¯¯åŸå› ï¼š"+e.target.error.message})}}},en=Xt,tn=(n("e3ec"),Object(ee["a"])(en,Wt,Zt,!1,null,"6237ab78",null)),nn=tn.exports,sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group-tip-element-wrapper"},[e._v(e._s(e.text))])},rn=[];n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54");function on(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=an(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw i}}}}function an(e,t){if(e){if("string"===typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pn={name:"GroupTipElement",data:function(){return{callTips:256}},props:{payload:{type:Object,required:!0},message:{type:Object,required:!1}},computed:ln(ln({},Object(ue["c"])({currentUserProfile:function(e){return e.user.currentUserProfile},userID:function(e){return e.user.userID}})),{},{text:function(){return this.getGroupTipContent(this.message)}}),methods:{getGroupTipContent:function(e){var t=e.nick||e.from===this.userID&&this.currentUserProfile.nick||e.from,n=e.nick||e.payload.userIDList.join(",");switch(e.payload.operationType){case this.TIM.TYPES.GRP_TIP_MBR_JOIN:return"ç¾¤æˆå‘˜ï¼š".concat(n," åŠ å…¥ç¾¤ç»„");case this.TIM.TYPES.GRP_TIP_MBR_QUIT:return"ç¾¤æˆå‘˜ï¼š".concat(n," é€€å‡ºç¾¤ç»„");case this.TIM.TYPES.GRP_TIP_MBR_KICKED_OUT:return"ç¾¤æˆå‘˜ï¼š".concat(n," è¢«").concat(e.payload.operatorID,"è¸¢å‡ºç¾¤ç»„");case this.TIM.TYPES.GRP_TIP_MBR_SET_ADMIN:return"ç¾¤æˆå‘˜ï¼š".concat(n," æˆä¸ºç®¡ç†å‘˜");case this.TIM.TYPES.GRP_TIP_MBR_CANCELED_ADMIN:return"ç¾¤æˆå‘˜ï¼š".concat(n," è¢«æ’¤é”€ç®¡ç†å‘˜");case this.TIM.TYPES.GRP_TIP_GRP_PROFILE_UPDATED:return"ç¾¤èµ„æ–™ä¿®æ”¹";case this.callTips:return e.payload.text.indexOf("ç»“æŸç¾¤èŠ")>-1?'"'.concat(e.payload.text,'"'):'"'.concat(t,'" ').concat(e.payload.text);case this.TIM.TYPES.GRP_TIP_MBR_PROFILE_UPDATED:var s,r=on(e.payload.memberList);try{for(r.s();!(s=r.n()).done;){var i=s.value;return i.muteTime>0?"ç¾¤æˆå‘˜ï¼š".concat(i.userID,"è¢«ç¦è¨€").concat(i.muteTime,"ç§’"):"ç¾¤æˆå‘˜ï¼š".concat(i.userID,"è¢«å–æ¶ˆç¦è¨€")}}catch(o){r.e(o)}finally{r.f()}break;default:return"[ç¾¤æç¤ºæ¶ˆæ¯]"}}}},mn=pn,fn=(n("3763"),Object(ee["a"])(mn,sn,rn,!1,null,"7862d93a",null)),dn=fn.exports,hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("message-bubble",{attrs:{isMine:!1,message:e.message}},[n("div",{staticClass:"group-system-element-wrapper"},[e._v("\n    "+e._s(e.text)+"\n    "),e.isJoinGroupRequest?n("el-button",{attrs:{type:"text"},on:{click:function(t){e.showDialog=!0}}},[e._v("å¤„ç†")]):e._e(),n("el-dialog",{attrs:{title:"å¤„ç†åŠ ç¾¤ç”³è¯·",visible:e.showDialog,width:"30%"},on:{"update:visible":function(t){e.showDialog=t}}},[n("el-form",{ref:"form",attrs:{"label-width":"100px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("el-form-item",{attrs:{label:"å¤„ç†ç»“æœï¼š"}},[n("el-radio-group",{model:{value:e.form.handleAction,callback:function(t){e.$set(e.form,"handleAction",t)},expression:"form.handleAction"}},[n("el-radio",{attrs:{label:"Agree"}},[e._v("åŒæ„")]),n("el-radio",{attrs:{label:"Reject"}},[e._v("æ‹’ç»")])],1)],1),n("el-form-item",{attrs:{label:"é™„è¨€ï¼š"}},[n("el-input",{attrs:{type:"textarea",resize:"none",rows:3,placeholder:"è¯·è¾“å…¥é™„è¨€"},model:{value:e.form.handleMessage,callback:function(t){e.$set(e.form,"handleMessage",t)},expression:"form.handleMessage"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("å– æ¶ˆ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleGroupApplication}},[e._v("ç¡® å®š")])],1)],1)],1)])},gn=[];function vn(e){var t=e.payload.groupProfile.name||e.payload.groupProfile.groupID;switch(e.payload.operationType){case 1:return"".concat(e.payload.operatorID," ç”³è¯·åŠ å…¥ç¾¤ç»„ï¼š").concat(t);case 2:return"æˆåŠŸåŠ å…¥ç¾¤ç»„ï¼š".concat(t);case 3:return"ç”³è¯·åŠ å…¥ç¾¤ç»„ï¼š".concat(t,"è¢«æ‹’ç»");case 4:return"ä½ è¢«ç®¡ç†å‘˜".concat(e.payload.operatorID,"è¸¢å‡ºç¾¤ç»„ï¼š").concat(t);case 5:return"ç¾¤ï¼š".concat(t," å·²è¢«").concat(e.payload.operatorID,"è§£æ•£");case 6:return"".concat(e.payload.operatorID,"åˆ›å»ºç¾¤ï¼š").concat(t);case 7:return"".concat(e.payload.operatorID,"é‚€è¯·ä½ åŠ ç¾¤ï¼š").concat(t);case 8:return"ä½ é€€å‡ºç¾¤ç»„ï¼š".concat(t);case 9:return"ä½ è¢«".concat(e.payload.operatorID,"è®¾ç½®ä¸ºç¾¤ï¼š").concat(t,"çš„ç®¡ç†å‘˜");case 10:return"ä½ è¢«".concat(e.payload.operatorID,"æ’¤é”€ç¾¤ï¼š").concat(t,"çš„ç®¡ç†å‘˜èº«ä»½");case 255:return"è‡ªå®šä¹‰ç¾¤ç³»ç»Ÿé€šçŸ¥: "+e.payload.userDefinedField}}function bn(e){}var yn={name:"GroupSystemNoticeElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!1}},components:{ElDialog:A.a,ElForm:_e.a,ElFormItem:we.a,ElRadioGroup:Ce.a,ElRadio:ye.a,MessageBubble:yt},data:function(){return{showDialog:!1,form:{handleAction:"Agree",handleMessage:""}}},computed:{text:function(){return vn(this.message)},title:function(){return this.message.type===this.TIM.TYPES.MSG_GRP_SYS_NOTICE?"ç¾¤ç³»ç»Ÿé€šçŸ¥":"ç³»ç»Ÿé€šçŸ¥"},isJoinGroupRequest:function(){return 1===this.payload.operationType}},methods:{handleGroupApplication:function(){var e=this;this.tim.handleGroupApplication({handleAction:this.form.handleAction,handleMessage:this.form.handleMessage,message:this.message}).then((function(){e.showDialog=!1,e.$store.commit("removeMessage",e.message)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message}),e.showDialog=!1}))}}},On=yn,Cn=(n("4011"),Object(ee["a"])(On,hn,gn,!1,null,"8a49ee1a",null)),Pn=Cn.exports,wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group-tip-element-wrapper"},[e._v(e._s(e.text))])},Mn=[];function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var In={name:"CustomElement",props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},components:{MessageBubble:yt},computed:jn(jn({},Object(ue["c"])({currentUserProfile:function(e){return e.user.currentUserProfile}})),{},{text:function(){return this.translateCustomMessage(this.payload)}}),methods:{translateCustomMessage:function(e){return e.description}}},En=In,Tn=(n("ec25"),Object(ee["a"])(En,wn,Mn,!1,null,"3a2bf9c9",null)),Dn=Tn.exports,Sn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("message-bubble",{attrs:{isMine:e.isMine,message:e.message}},[n("a",{staticClass:"geo-element",attrs:{href:e.href,target:"_blank",title:"ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…"}},[n("span",{staticClass:"el-icon-location-outline"},[e._v(e._s(e.payload.description))]),n("img",{attrs:{src:e.url}})])])},xn=[],kn={name:"GeoElement",components:{MessageBubble:yt},props:{payload:{type:Object,required:!0},message:{type:Object,required:!0},isMine:{type:Boolean}},data:function(){return{url:""}},computed:{lon:function(){return this.payload.longitude.toFixed(6)},lat:function(){return this.payload.latitude.toFixed(6)},href:function(){return"https://map.qq.com/?type=marker&isopeninfowin=1&markertype=1&pointx=".concat(this.lon,"&pointy=").concat(this.lat,"&name=").concat(this.payload.description)}},mounted:function(){this.url="https://apis.map.qq.com/ws/staticmap/v2/?center=".concat(this.lat,",").concat(this.lon,"&zoom=10&size=300*150&maptype=roadmap&markers=size:large|color:0xFFCCFF|label:k|").concat(this.lat,",").concat(this.lon,"&key=UBNBZ-PTP3P-TE7DB-LHRTI-Y4YLE-VWBBD")}},An=kn,Gn=(n("daca"),Object(ee["a"])(An,Sn,xn,!1,null,"58085edc",null)),Ln=Gn.exports;function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Un={name:"MessageItem",props:{message:{type:Object,required:!0}},components:{MessageHeader:tt,MessageFooter:ut,MessageStatusIcon:Ye,FileElement:wt,FaceElement:Tt,ImageElement:Rt,TextElement:Vt,SoundElement:Qt,GroupTipElement:dn,GroupSystemNoticeElement:Pn,CustomElement:Dn,VideoElement:nn,GeoElement:Ln},data:function(){return{renderDom:[]}},computed:Nn(Nn({},Object(ue["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUserProfile:function(e){return e.user.currentUserProfile}})),{},{showAvatar:function(){return"C2C"===this.currentConversation.type&&!this.message.isRevoked||"GROUP"===this.currentConversation.type&&!this.message.isRevoked&&(this.message.type!==this.TIM.TYPES.MSG_GRP_TIP&&this.message.type!==this.TIM.TYPES.MSG_CUSTOM)},avatar:function(){return"C2C"===this.currentConversation.type?this.isMine?this.currentUserProfile.avatar:this.currentConversation.userProfile.avatar:"GROUP"===this.currentConversation.type?this.isMine?this.currentUserProfile.avatar:this.message.avatar:""},currentConversationType:function(){return this.currentConversation.type},isMine:function(){return"out"===this.message.flow},messagePosition:function(){return["TIMGroupTipElem","TIMGroupSystemNoticeElem",this.TIM.TYPES.MSG_CUSTOM].includes(this.message.type)||this.message.isRevoked?"position-center":this.isMine?"position-right":"position-left"},showMessageHeader:function(){return!["TIMGroupTipElem","TIMGroupSystemNoticeElem",this.TIM.TYPES.MSG_CUSTOM].includes(this.message.type)&&!this.message.isRevoked}}),methods:{showGroupMemberProfile:function(e){var t=this;this.tim.getGroupMemberProfile({groupID:this.message.to,userIDList:[this.message.from]}).then((function(n){var s=n.data.memberList;s[0]&&t.$bus.$emit("showMemberProfile",{event:e,member:s[0]})}))}}},$n=Un,Bn=(n("d874"),Object(ee["a"])($n,Ge,Le,!1,null,"0e0d40e0",null)),Yn=Bn.exports,Fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conversation-profile-wrapper"},[e.currentConversation.type===e.TIM.TYPES.CONV_C2C?n("user-profile",{attrs:{userProfile:e.currentConversation.userProfile}}):e.currentConversation.type===e.TIM.TYPES.CONV_GROUP?n("group-profile",{attrs:{groupProfile:e.currentConversation.groupProfile}}):e._e()],1)},Vn=[],qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("group-member-list",{attrs:{groupProfile:e.groupProfile}}),n("div",{staticClass:"group-info-content"},[n("div",{staticClass:"info-item"},[n("div",{staticClass:"label"},[e._v("\n          ç¾¤å¤´åƒ\n          "),e.editable?n("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditFaceUrl=!0,e.inputFocus("editFaceUrl")}}}):e._e()]),e.showEditFaceUrl?n("el-input",{ref:"editFaceUrl",staticStyle:{width:"60%"},attrs:{autofocus:"",size:"mini"},on:{blur:function(t){e.showEditFaceUrl=!1}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editFaceUrl(t)}},model:{value:e.avatar,callback:function(t){e.avatar=t},expression:"avatar"}}):n("div",{staticClass:"content"},[n("avatar",{attrs:{src:e.groupProfile.avatar}})],1)],1),n("div",{staticClass:"info-item"},[n("div",{staticClass:"label"},[e._v("\n          ç¾¤åç§°\n          "),e.editable?n("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditName=!0,e.inputFocus("editName")}}}):e._e()]),e.showEditName?n("el-input",{ref:"editName",staticStyle:{width:"60%"},attrs:{autofocus:"",size:"mini"},on:{blur:function(t){e.showEditName=!1}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editName(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):n("div",{staticClass:"content text-ellipsis",attrs:{title:e.groupProfile.name}},[e._v("\n          "+e._s(e.groupProfile.name||"æš‚æ— ")+"\n        ")])],1),n("div",{staticClass:"info-item"},[n("div",{staticClass:"label"},[e._v("\n          ç¾¤æ¶ˆæ¯æç¤ºç±»å‹\n          "),e.editable?n("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditMessageRemindType=!0,e.inputFocus("editMessageRemindType")}}}):e._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.showEditMessageRemindType,expression:"!showEditMessageRemindType"}],staticClass:"content"},[e._v("\n          "+e._s(e.messageRemindTypeMap[this.groupProfile.selfInfo.messageRemindType])+"\n        ")]),n("el-select",{directives:[{name:"show",rawName:"v-show",value:e.showEditMessageRemindType,expression:"showEditMessageRemindType"}],ref:"editMessageRemindType",attrs:{size:"mini","automatic-dropdown":""},on:{change:e.editMessageRemindType,blur:function(t){e.showEditMessageRemindType=!1}},model:{value:e.messageRemindType,callback:function(t){e.messageRemindType=t},expression:"messageRemindType"}},[n("el-option",{attrs:{label:"æ¥æ”¶æ¶ˆæ¯å¹¶æç¤º",value:"AcceptAndNotify"}}),n("el-option",{attrs:{label:"æ¥æ”¶æ¶ˆæ¯ä½†ä¸æç¤º",value:"AcceptNotNotify"}}),n("el-option",{attrs:{label:"å±è”½æ¶ˆæ¯",value:"Discard"}})],1)],1),n("div",{staticClass:"info-item"},[n("div",{staticClass:"label"},[e._v("\n          æˆ‘çš„ç¾¤åç‰‡\n          "),n("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditNameCard=!0,e.inputFocus("editNameCard")}}})]),e.showEditNameCard?n("el-input",{ref:"editNameCard",staticStyle:{width:"60%"},attrs:{autofocus:"",size:"mini"},on:{blur:function(t){e.showEditNameCard=!1}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editNameCard(t)}},model:{value:e.nameCard,callback:function(t){e.nameCard=t},expression:"nameCard"}}):n("div",{staticClass:"content cursor-pointer"},[e._v("\n          "+e._s(e.groupProfile.selfInfo.nameCard||"æš‚æ— ")+"\n        ")])],1),n("div",{staticClass:"info-item"},[n("div",{staticClass:"label"},[e._v("å…¨ä½“ç¦è¨€")]),n("el-switch",{on:{change:e.changeMuteStatus},model:{value:e.muteAllMembers,callback:function(t){e.muteAllMembers=t},expression:"muteAllMembers"}})],1),e.isOwner?n("div",{staticClass:"info-item"},[n("div",{staticClass:"label"},[e._v("å¯ç”¨æœºå™¨äºº")]),n("bot-switch")],1):e._e(),n("div",{staticClass:"info-item"},[n("div",{staticClass:"label"},[e._v("\n          ç¾¤å…¬å‘Š\n          "),e.editable?n("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","font-size":"14px"},on:{click:function(t){e.showEditNotification=!0,e.inputFocus("editNotification")}}}):e._e()]),e.showEditNotification?n("el-input",{ref:"editNotification",staticStyle:{width:"60%"},attrs:{autofocus:"",size:"mini"},on:{blur:function(t){e.showEditNotification=!1}},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editNotification(t)}},model:{value:e.notification,callback:function(t){e.notification=t},expression:"notification"}}):n("div",{staticClass:"long-content",attrs:{title:e.groupProfile.notification}},[e._v("\n          "+e._s(e.groupProfile.notification||"æš‚æ— ")+"\n        ")])],1)]),n("div",{staticClass:"action-btns"},[e.isOwner?n("kp-actions"):e._e(),n("div",[n("div",[n("el-button",{attrs:{type:"text"},on:{click:e.quitGroup}},[e._v("é€€å‡ºç¾¤ç»„")])],1),e.showDissmissGroup?n("div",[n("el-button",{attrs:{type:"text"},on:{click:e.dismissGroup}},[e._v("è§£æ•£ç¾¤ç»„")])],1):e._e()])],1)],1)},Hn=[],zn=(n("6611"),n("e772")),Kn=n.n(zn),Jn=(n("1f1a"),n("4e4b")),Qn=n.n(Jn),Wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group-member-list-wrapper"},[n("div",{staticClass:"header"},[n("span",{staticClass:"member-count text-ellipsis"},[e._v("ç¾¤æˆå‘˜ï¼š"+e._s(e.members.length))]),n("i",{staticClass:"el-icon-link",attrs:{title:"å¤åˆ¶é‚€è¯·é“¾æ¥"},on:{click:e.copyInviteLink}})]),n("div",{staticClass:"scroll-content"},[n("div",{staticClass:"group-member-list"},e._l(e.members,(function(t){return n("div",{key:t.userID},[n("div",{staticClass:"group-member",attrs:{slot:"reference"},on:{click:function(n){e.currentMemberID=t.userID}},slot:"reference"},[n("div",{staticClass:"info"},[n("avatar",{attrs:{title:e.getGroupMemberAvatarText(t.role),src:t.avatar}}),n("div",{staticClass:"names"},[n("div",{staticClass:"member-name text-ellipsis"},[e._v(e._s(e.getShowUserNick(t)))]),n("div",{staticClass:"member-id"},[e._v(e._s(e.getShowUserId(t)))])])],1),n("div",{staticClass:"actions"},[e.isOwner&&e.isBotOfThisGroup(t)?n("el-popover",{attrs:{title:"ä¿®æ”¹æœºå™¨äººå¤´åƒ",placement:"top",trigger:"click"}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥å¤´åƒ URL"},nativeOn:{keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.setBotAvatar(t.userID)}},model:{value:e.botAvatar,callback:function(t){e.botAvatar=t},expression:"botAvatar"}}),n("el-button",{staticClass:"action-btn",attrs:{slot:"reference",title:"ä¿®æ”¹æœºå™¨äººå¤´åƒ",icon:"el-icon-picture-outline",size:"mini",circle:""},slot:"reference"})],1):e._e(),e.isOwner?n("el-popover",{attrs:{title:"ä¿®æ”¹ç¾¤åç‰‡",placement:"top",trigger:"click"}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç¾¤åç‰‡"},nativeOn:{keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.setGroupMemberNameCard(t.userID)}},model:{value:e.nameCard,callback:function(t){e.nameCard=t},expression:"nameCard"}}),n("el-button",{staticClass:"action-btn",attrs:{slot:"reference",title:"ä¿®æ”¹ç¾¤åç‰‡",icon:"el-icon-edit",size:"mini",circle:""},slot:"reference"})],1):e._e(),e.isOwner&&"Owner"!==t.role?n("el-popconfirm",{attrs:{title:"å°†"+e.getShowUserNick(t)+"è¸¢å‡ºç¾¤ç»„ï¼Ÿ",placement:"top",trigger:"click"},on:{confirm:function(n){return e.kickoutGroupMember(t.userID)}}},[n("el-button",{staticClass:"action-btn",attrs:{slot:"reference",title:"è¸¢å‡ºç¾¤èŠ",type:"danger",icon:"el-icon-delete",size:"mini",circle:""},slot:"reference"})],1):e._e(),n("div",{staticClass:"coc-card",class:{isBot:t.userID.startsWith("bot")}},[n("div",[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.waitForSoon}},[e._v("æŸ¥çœ‹äººç‰©å¡")])],1),n("div",[e.isOwner?n("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.waitForSoon}},[e._v("å¯¼å…¥äººç‰©å¡")]):e._e()],1)])],1)])])})),0)])])},Zn=[],Xn=window.TIMC,es=Xn();delete window.TIMC;var ts=n("53a5");function ns(e,t){if(t.conversationType===es.TYPES.CONV_GROUP){var n=t.payload.text.trim();if(n.startsWith(".")||n.startsWith("ã€‚"))try{var s=n.substr(1).split(" "),r=Object(ae["a"])(s,2),i=r[0],o=r[1],a=new ts["DiceRoll"](i);ss(e,t.to,"".concat(t.nameCard||t.nick||t.from," ğŸ² ").concat(o||""," ").concat(a.output))}catch(c){}}}function ss(e,t,n){var s=e.createTextMessage({to:t,conversationType:es.TYPES.CONV_GROUP,payload:{text:n}});e.sendMessage(s)}var rs=n("3438"),is=n.n(rs),os=null,as=null,cs=null,us=new Proxy({},{get:function(e,t){if(os)return os[t];console.warn("use tim before init!!!")}}),ls=us;function ps(e,t){os||(as=e,cs=t,os=es.create({SDKAppID:e}),os.registerPlugin({"cos-js-sdk":is.a}))}function ms(){return btoa(as+"/"+cs.split("").reverse().join(""))}var fs={};function ds(e){fs[e]||vs(e);var t=fs[e],n=e.replace("@TGS#","bot_");return new Promise((function(s,r){t.login({userID:n,userSig:window.genTestUserSig(n,Number(as),cs).userSig}).then((function(){console.log("ç™»å½•æˆåŠŸ"),t.joinGroup({groupID:e}).then((function(e){return s(e.data)})).catch((function(e){return r(e)}))})).catch((function(e){console.log("ç™»å½•å¤±è´¥",e),r(e)}))}))}function hs(e){return fs[e]?fs[e].logout():new Promise((function(e){return e()}))}function gs(e,t){return fs[e]?fs[e].updateMyProfile({avatar:t}):new Promise((function(e,t){return t()}))}function vs(e){var t=fs[e]=Xn().create({SDKAppID:as});t.registerPlugin({"cos-js-sdk":is.a}),t.on(es.EVENT.SDK_NOT_READY,(function(){return console.log("sdk not ready")})),t.on(es.EVENT.ERROR,(function(e){return console.log(e.data)})),t.on(es.EVENT.KICKED_OUT,(function(e){console.log("sdk kick reason "+e.data.type)})),t.on(es.EVENT.SDK_READY,(function(){console.log("sdk ready"),t.updateMyProfile({nick:"bot"})})),t.on(es.EVENT.MESSAGE_RECEIVED,(function(e){e.data.forEach((function(e){return ns(t,e)}))}))}function bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Os={data:function(){return{addGroupMemberVisible:!1,currentMemberID:"",count:30,botAvatar:"",nameCard:""}},props:["groupProfile"],components:{Popover:c.a},computed:ys(ys({},Object(ue["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentMemberList:function(e){return e.group.currentMemberList}})),{},{showLoadMore:function(){return this.members.length<this.groupProfile.memberCount},members:function(){return this.currentMemberList},isOwner:function(){return this.groupProfile.selfInfo.role===this.TIM.TYPES.GRP_MBR_ROLE_OWNER}}),methods:{getGroupMemberAvatarText:function(e){switch(e){case"Owner":return"ç¾¤ä¸»";case"Admin":return"ç®¡ç†å‘˜";default:return"ç¾¤æˆå‘˜"}},getShowUserNick:function(e){return e.nameCard||e.nick||e.userID},getShowUserId:function(e){return e.userID.startsWith("bot")?"æœºå™¨äºº":e.nameCard||e.nick?e.userID:""},isBotOfThisGroup:function(e){return this.groupProfile.groupID.replace("@TGS#","bot_")===e.userID},loadMore:function(){var e=this;this.$store.dispatch("getGroupMemberList",this.groupProfile.groupID).then((function(){e.count+=30}))},copyInviteLink:function(){var e=this;this.$copyText("".concat(location.origin,"/#/?s=").concat(ms(),"&g=").concat(this.groupProfile.groupID.replace("@TGS#",""),"&d=\nç‚¹å‡»é“¾æ¥åŠ å…¥ç¾¤èŠä¸€èµ·ç©~")).then((function(){e.$store.commit("showMessage",{type:"success",message:"é‚€è¯·é“¾æ¥å¤åˆ¶æˆåŠŸï¼å¿«å‘ç»™å°ä¼™ä¼´ä»¬ä¸€èµ·ç©å§~"})})).catch((function(t){console.log("copy link error",t),e.$store.commit("showMessage",{type:"error",message:"é‚€è¯·é“¾æ¥å¤åˆ¶å¤±è´¥"})}))},waitForSoon:function(){this.$store.commit("showMessage",{type:"info",message:"æ•¬è¯·æœŸå¾…"})},setBotAvatar:function(){var e=this;gs(this.currentConversation.groupProfile.groupID,this.botAvatar).then((function(){e.botAvatar="",e.$store.commit("showMessage",{message:"ä¿®æ”¹æˆåŠŸ"})})).catch((function(t){console.log(t),e.$store.commit("showMessage",{type:"error",message:"ä¿®æ”¹å¤´åƒå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ˜¯å¦å¯ç”¨æœºå™¨äººï¼Œæœªå¯ç”¨çŠ¶æ€ä¸èƒ½ä¿®æ”¹"})}))},setGroupMemberNameCard:function(e){var t=this;this.tim.setGroupMemberNameCard({groupID:this.currentConversation.groupProfile.groupID,userID:e,nameCard:this.nameCard}).then((function(){t.nameCard="",t.$store.commit("showMessage",{message:"ä¿®æ”¹æˆåŠŸ"})})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})}))},kickoutGroupMember:function(e){var t=this;this.tim.deleteGroupMember({groupID:this.currentConversation.groupProfile.groupID,reason:"è¢«ç¾¤ä¸»è¸¢å‡º",userIDList:[e]}).then((function(){t.$store.commit("deleteGroupMemeber",e)})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})}))}}},Cs=Os,Ps=(n("54dd"),Object(ee["a"])(Cs,Wn,Zn,!1,null,"18cb53be",null)),ws=Ps.exports,Ms=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(t){e.sendBgmVisible=!0}}},[e._v("è®¾ç½®æ¸¸æˆ BGM")])],1),n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(t){e.sendTextVisible=!0}}},[e._v("å‘å¸ƒæ–‡å­—ç¬”è®°")])],1),n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$refs.noteImgPicker.click()}}},[e._v("å‘å¸ƒå›¾ç‰‡ç¬”è®°")])],1),n("input",{ref:"noteImgPicker",staticStyle:{display:"none"},attrs:{type:"file",id:"noteImgPicker",accept:".jpg, .jpeg, .png, .gif, .bmp"},on:{change:e.sendNoteImage}}),n("el-dialog",{attrs:{title:"ğŸµ è®¾ç½® BGM",visible:e.sendBgmVisible,width:"40%"},on:{"update:visible":function(t){e.sendBgmVisible=t}}},[n("div",{staticClass:"bgm-usage"},[n("div",[e._v("è®¾ç½® BGMï¼ŒBGM å°†å¯¹å…¨éƒ¨ç¾¤å‘˜å¯è§ã€‚å¦‚å¤šæ¬¡è®¾ç½®ï¼Œåˆ™ä¼šè¦†ç›–ä¹‹å‰è®¾ç½®çš„ BGMã€‚")]),n("div",[e._v("BGM é“¾æ¥éœ€ç¬¦åˆæŒ‡å®šçš„æ ¼å¼ã€‚")]),n("ul",[n("li",[e._v("ç½‘æ˜“äº‘éŸ³ä¹\n          "),n("ul",[n("li",[e._v("æ­Œå•ï¼š"),n("span",[e._v("https://music.163.com/#/playlist?id=xxxxxxx")])]),n("li",[e._v("å•æ›²ï¼š"),n("span",[e._v("https://music.163.com/#/song?id=xxxxxxx")])]),n("li",[e._v("ä¸“è¾‘ï¼š"),n("span",[e._v("https://music.163.com/#/album?id=xxxxxxx")])])])])])]),n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥éŸ³ä¹é“¾æ¥"},model:{value:e.bgmLink,callback:function(t){e.bgmLink=t},expression:"bgmLink"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.sendBgmVisible=!1}}},[e._v("å– æ¶ˆ")]),n("el-button",{attrs:{type:"primary",disabled:0===e.bgmLink.trim().length},on:{click:e.setBgm}},[e._v("ç¡® å®š")])],1)],1),n("el-dialog",{attrs:{title:"å‘å¸ƒæ–‡å­—ç¬”è®°",visible:e.sendTextVisible,width:"40%"},on:{"update:visible":function(t){e.sendTextVisible=t}}},[n("el-input",{attrs:{type:"textarea",rows:5,placeholder:"è¯·è¾“å…¥å†…å®¹"},model:{value:e.textContent,callback:function(t){e.textContent=t},expression:"textContent"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.sendTextVisible=!1}}},[e._v("å– æ¶ˆ")]),n("el-button",{attrs:{type:"primary",disabled:0===e.textContent.trim().length},on:{click:e.sendNoteText}},[e._v("ç¡® å®š")])],1)],1)],1)},_s=[];function js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?js(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):js(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Es={data:function(){return{sendBgmVisible:!1,bgmLink:"",sendTextVisible:!1,textContent:""}},computed:Is({},Object(ue["c"])({groupProfile:function(e){return e.conversation.currentConversation.groupProfile},currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{setBgm:function(){var e=this.bgmLink.match(/https:\/\/music\.163\.com\/#\/(playlist|song|album)\?id=(\d+)/);if(e){var t={platform:1,type:["playlist","album","song"].indexOf(e[1]),id:Number(e[2])},n=this.tim.createCustomMessage({to:this.groupProfile.groupID,conversationType:this.TIM.TYPES.CONV_GROUP,priority:this.TIM.TYPES.MSG_PRIORITY_HIGH,payload:{data:JSON.stringify({mtype:"bgm",mdata:t}),description:"ä¸»æŒäººè®¾ç½®äº†æ–°çš„ BGMï¼Œå¿«ç‚¹å‡»å³ä¾§ã€é‡è¦ç¬”è®°ã€‘é¢æ¿æŸ¥çœ‹å§"}});this._sendNoteMessage(n),this.bgmLink="",this.sendBgmVisible=!1}else this.$store.commit("showMessage",{type:"error",message:"é“¾æ¥æ ¼å¼ä¸æ­£ç¡®"})},sendNoteText:function(){var e=this.tim.createTextMessage({to:this.groupProfile.groupID,conversationType:this.TIM.TYPES.CONV_GROUP,priority:this.TIM.TYPES.MSG_PRIORITY_HIGH,payload:{text:this.textContent}});this._sendNoteMessage(e),this._sendGrayTipMessage("ä¸»æŒäººå‘å¸ƒäº†ä¸€æ¡æ–°çš„ç¬”è®°ï¼Œå¿«ç‚¹å‡»å³ä¾§ã€é‡è¦ç¬”è®°ã€‘é¢æ¿æŸ¥çœ‹å§"),this.textContent="",this.sendTextVisible=!1},sendNoteImage:function(){var e=this.tim.createImageMessage({to:this.groupProfile.groupID,conversationType:this.TIM.TYPES.CONV_GROUP,priority:this.TIM.TYPES.MSG_PRIORITY_HIGH,payload:{file:document.getElementById("noteImgPicker")}});this._sendNoteMessage(e),this._sendGrayTipMessage("ä¸»æŒäººå‘å¸ƒäº†ä¸€æ¡æ–°çš„ç¬”è®°ï¼Œå¿«ç‚¹å‡»å³ä¾§ã€é‡è¦ç¬”è®°ã€‘é¢æ¿æŸ¥çœ‹å§"),this.$refs.noteImgPicker.value=null},_sendNoteMessage:function(e){var t=this;this.$store.commit("pushCurrentMessageList",e),this.tim.sendMessage(e).then((function(){t.$store.dispatch("handleKPNote",[e])})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})}))},_sendGrayTipMessage:function(e){var t=this.tim.createCustomMessage({to:this.groupProfile.groupID,conversationType:this.TIM.TYPES.CONV_GROUP,payload:{data:JSON.stringify({mtype:"tip"}),description:e}});this.$store.commit("pushCurrentMessageList",t),this.tim.sendMessage(t)}}},Ts=Es,Ds=(n("8f40"),Object(ee["a"])(Ts,Ms,_s,!1,null,"2b33521c",null)),Ss=Ds.exports,xs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-switch",{attrs:{value:e.currentGame.botEnabled,disabled:e.botSwitchLoading},on:{change:e.onBotSwitch}})},ks=[];function As(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):As(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ls={data:function(){return{botSwitchLoading:!1}},computed:Gs({},Object(ue["c"])({groupID:function(e){return e.conversation.currentConversation.groupProfile.groupID},currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{onBotSwitch:function(e){var t=this;this.botSwitchLoading=!0,this.$store.dispatch("toggleBotEnabled",{groupId:this.groupID,enabled:e}).catch((function(e){t.$store.commit("showMessage",{type:"error",message:"åˆ‡æ¢æœºå™¨äººå¤±è´¥ï¼Œè¯·è”ç³»ç®¡ç†å‘˜"}),console.log("åˆ‡æ¢ bot å¤±è´¥",e)})).finally((function(){t.botSwitchLoading=!1}))}}},Rs=Ls,Ns=Object(ee["a"])(Rs,xs,ks,!1,null,null,null),Us=Ns.exports,$s={props:["groupProfile"],components:{GroupMemberList:ws,KpActions:Ss,BotSwitch:Us,ElSelect:Qn.a,ElOption:Kn.a,ElSwitch:l.a},data:function(){return{showEditName:!1,showEditFaceUrl:!1,showEditIntroduction:!1,showEditNotification:!1,showEditJoinOption:!1,showChangeGroupOwner:!1,showEditMessageRemindType:!1,showEditNameCard:!1,name:this.groupProfile.name,avatar:this.groupProfile.avatar,introduction:this.groupProfile.introduction,notification:this.groupProfile.notification,joinOption:this.groupProfile.joinOption,newOwnerUserID:"",messageRemindType:this.groupProfile.selfInfo.messageRemindType,nameCard:this.groupProfile.selfInfo.nameCard||"",muteAllMembers:this.groupProfile.muteAllMembers,messageRemindTypeMap:{AcceptAndNotify:"æ¥æ”¶æ¶ˆæ¯å¹¶æç¤º",AcceptNotNotify:"æ¥æ”¶æ¶ˆæ¯ä½†ä¸æç¤º",Discard:"å±è”½æ¶ˆæ¯"},joinOptionMap:{FreeAccess:"è‡ªç”±åŠ å…¥",NeedPermission:"éœ€è¦éªŒè¯",DisableApply:"ç¦æ­¢åŠ ç¾¤"},active:!1}},computed:{editable:function(){return this.groupProfile.type===this.TIM.TYPES.GRP_WORK||[this.TIM.TYPES.GRP_MBR_ROLE_OWNER,this.TIM.TYPES.GRP_MBR_ROLE_ADMIN].includes(this.groupProfile.selfInfo.role)},isOwner:function(){return this.groupProfile.selfInfo.role===this.TIM.TYPES.GRP_MBR_ROLE_OWNER},isAdmin:function(){return this.groupProfile.selfInfo.role===this.TIM.TYPES.GRP_MBR_ROLE_ADMIN},showDissmissGroup:function(){return this.isOwner&&this.groupProfile.type!==this.TIM.TYPES.GRP_WORK},groupType:function(){switch(this.groupProfile.type){case this.TIM.TYPES.GRP_WORK:return"å¥½å‹å·¥ä½œç¾¤ï¼ˆWorkï¼‰";case this.TIM.TYPES.GRP_PUBLIC:return"é™Œç”Ÿäººç¤¾äº¤ç¾¤ï¼ˆPublicï¼‰";case this.TIM.TYPES.GRP_CHATROOM:return"ä¸´æ—¶ä¼šè®®ç¾¤ï¼ˆMeetingï¼‰";case this.TIM.TYPES.GRP_AVCHATROOM:return"ç›´æ’­ç¾¤ï¼ˆAVChatRoomï¼‰";default:return""}}},watch:{groupProfile:function(e){Object.assign(this,{showEditName:!1,showEditFaceUrl:!1,showEditIntroduction:!1,showEditNotification:!1,showEditJoinOption:!1,showChangeGroupOwner:!1,showEditNameCard:!1,name:e.name,avatar:e.avatar,introduction:e.introduction,notification:e.notification,joinOption:e.joinOption,messageRemindType:e.messageRemindType,nameCard:e.selfInfo.nameCard||"",muteAllMembers:e.muteAllMembers})}},methods:{inputFocus:function(e){var t=this;this.$nextTick((function(){t.$refs[e].focus()}))},editName:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,name:this.name.trim()}).then((function(){e.showEditName=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editFaceUrl:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,avatar:this.avatar.trim()}).then((function(){e.showEditFaceUrl=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},changeMuteStatus:function(){var e=this;this.isOwner||this.isAdmin?this.tim.updateGroupProfile({muteAllMembers:this.muteAllMembers,groupID:this.groupProfile.groupID}).then((function(t){e.muteAllMembers=t.data.group.muteAllMembers,e.muteAllMembers?(e.active=!0,e.$store.commit("showMessage",{message:"å…¨ä½“ç¦è¨€"})):(e.active=!1,e.$store.commit("showMessage",{message:"å–æ¶ˆå…¨ä½“ç¦è¨€"}))})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})):(this.muteAllMembers=this.groupProfile.muteAllMembers,this.$store.commit("showMessage",{type:"error",message:"æ™®é€šç¾¤æˆå‘˜ä¸èƒ½å¯¹å…¨ä½“ç¦è¨€"}))},editIntroduction:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,introduction:this.introduction.trim()}).then((function(){e.showEditIntroduction=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editNotification:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,notification:this.notification.trim()}).then((function(){e.showEditNotification=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editJoinOption:function(){var e=this;this.tim.updateGroupProfile({groupID:this.groupProfile.groupID,joinOption:this.joinOption}).then((function(){e.showEditJoinOption=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},changeOwner:function(){var e=this;this.tim.changeGroupOwner({groupID:this.groupProfile.groupID,newOwnerID:this.newOwnerUserID}).then((function(){e.showChangeGroupOwner=!1,e.$store.commit("showMessage",{message:"è½¬è®©ç¾¤ä¸»æˆåŠŸï¼Œæ–°ç¾¤ä¸»IDï¼š".concat(e.newOwnerUserID)}),e.newOwnerUserID=""})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},quitGroup:function(){var e=this;this.tim.quitGroup(this.groupProfile.groupID).then((function(t){var n=t.data.groupID;e.$store.commit("showMessage",{message:"é€€ç¾¤æˆåŠŸ"}),n===e.groupProfile.groupID&&e.$store.commit("resetCurrentConversation")})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},dismissGroup:function(){var e=this;this.tim.dismissGroup(this.groupProfile.groupID).then((function(t){var n=t.data.groupID;e.$store.commit("showMessage",{message:"ç¾¤ï¼š".concat(e.groupProfile.name||e.groupProfile.groupID,"è§£æ•£æˆåŠŸï¼"),type:"success"}),n===e.groupProfile.groupID&&e.$store.commit("resetCurrentConversation")})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editMessageRemindType:function(){var e=this;this.tim.setMessageRemindType({groupID:this.groupProfile.groupID,messageRemindType:this.messageRemindType}).then((function(){e.showEditMessageRemindType=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},editNameCard:function(){var e=this;0!==this.nameCard.trim().length?this.tim.setGroupMemberNameCard({groupID:this.groupProfile.groupID,nameCard:this.nameCard.trim()}).then((function(){e.showEditNameCard=!1})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})):this.$store.commit("showMessage",{message:"ä¸èƒ½è®¾ç½®ç©ºçš„ç¾¤åç‰‡",type:"warning"})}}},Bs=$s,Ys=(n("0716"),Object(ee["a"])(Bs,qn,Hn,!1,null,null,null)),Fs=Ys.exports,Vs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile-user"},[n("avatar",{attrs:{title:e.userProfile.userID,src:e.userProfile.avatar}}),n("div",{staticClass:"nick-name text-ellipsis"},[e.userProfile.nick?n("span",{attrs:{title:e.userProfile.nick}},[e._v("\n      "+e._s(e.userProfile.nick)+"\n    ")]):n("span",{staticClass:"anonymous",attrs:{title:"è¯¥ç”¨æˆ·æœªè®¾ç½®æ˜µç§°"}},[e._v("\n      [Anonymous]\n    ")])]),e.genderClass?n("div",{staticClass:"gender"},[n("span",{staticClass:"iconfont",class:e.genderClass,attrs:{title:e.gender}})]):e._e(),e.isInBlacklist||e.userProfile.userID===e.myUserID?e.isInBlacklist?n("el-button",{attrs:{title:"å°†è¯¥ç”¨æˆ·ç§»å‡ºé»‘åå•",type:"text"},on:{click:e.removeFromBlacklist}},[e._v("ç§»å‡ºé»‘åå•")]):e._e():n("el-button",{staticClass:"btn-add-blacklist",attrs:{title:"å°†è¯¥ç”¨æˆ·åŠ å…¥é»‘åå•",type:"text"},on:{click:e.addToBlackList}},[e._v("åŠ å…¥é»‘åå•")])],1)},qs=[];function Hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ks={props:{userProfile:{type:Object,required:!0}},computed:zs(zs({},Object(ue["c"])({blacklist:function(e){return e.blacklist.blacklist},myUserID:function(e){return e.user.currentUserProfile.userID}})),{},{isInBlacklist:function(){var e=this;return this.blacklist.findIndex((function(t){return t.userID===e.userProfile.userID}))>=0},gender:function(){switch(this.userProfile.gender){case this.TIM.TYPES.GENDER_MALE:return"ç”·";case this.TIM.TYPES.GENDER_FEMALE:return"å¥³";default:return"æœªè®¾ç½®"}},genderClass:function(){switch(this.userProfile.gender){case this.TIM.TYPES.GENDER_MALE:return"icon-male";case this.TIM.TYPES.GENDER_FEMALE:return"icon-female";default:return""}}}),methods:{addToBlackList:function(){var e=this;this.tim.addToBlacklist({userIDList:[this.userProfile.userID]}).then((function(){e.$store.dispatch("getBlacklist")})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},removeFromBlacklist:function(){var e=this;this.tim.removeFromBlacklist({userIDList:[this.userProfile.userID]}).then((function(){e.$store.commit("removeFromBlacklist",e.userProfile.userID)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))}}},Js=Ks,Qs=(n("873f"),Object(ee["a"])(Js,Vs,qs,!1,null,"f157254a",null)),Ws=Qs.exports;function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var er={name:"ConversationProfile",components:{GroupProfile:Fs,UserProfile:Ws},data:function(){return{}},computed:Xs({},Object(ue["c"])({currentConversation:function(e){return e.conversation.currentConversation}}))},tr=er,nr=(n("a65e"),Object(ee["a"])(tr,Fn,Vn,!1,null,"7e59049a",null)),sr=nr.exports,rr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-fade-in"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"member-profile-card",staticClass:"member-profile-card-wrapper",style:{top:e.y+"px",left:e.x+"px"}},[n("div",{staticClass:"profile"},[n("avatar",{staticClass:"avatar",attrs:{src:e.member.avatar}}),n("div",{staticClass:"basic"},[n("span",[e._v("IDï¼š"+e._s(e.member.userID))]),n("span",[e._v("æ˜µç§°ï¼š"+e._s(e.member.nick||"æš‚æ— "))])])],1),n("el-divider",{staticClass:"divider"}),n("div",{staticClass:"member-profile"},[n("div",{staticClass:"item"},[n("span",{staticClass:"label"},[e._v("ç¾¤åç‰‡")]),e._v("\n        "+e._s(e.member.nameCard||"æš‚æ— ")+"\n      ")]),n("div",{staticClass:"item"},[n("span",{staticClass:"label"},[e._v("å…¥ç¾¤æ—¶é—´")]),e._v("\n        "+e._s(e.joinTime)+"\n      ")]),e.member.muteUntil?n("div",{staticClass:"item"},[n("span",{staticClass:"label"},[e._v("ç¦è¨€è‡³")]),e._v("\n        "+e._s(e.muteUntil)+"\n      ")]):e._e()]),n("el-button",{staticClass:"send-message-btn",attrs:{type:"primary",size:"mini",title:"å‘æ¶ˆæ¯",icon:"el-icon-message",circle:""},on:{click:e.handleSendMessage}})],1)])},ir=[],or=(n("e3ea"),n("7bc3")),ar=n.n(or),cr={name:"MemberProfileCard",components:{ElDivider:ar.a},data:function(){return{member:{},x:0,y:0,visible:!1}},mounted:function(){this.$bus.$on("showMemberProfile",this.handleShowMemberProfile,this)},computed:{joinTime:function(){return this.member.joinTime?ze(new Date(1e3*this.member.joinTime)):""},muteUntil:function(){return this.member.muteUntil?ze(new Date(1e3*this.member.muteUntil)):""}},methods:{handleSendMessage:function(){this.$store.dispatch("checkoutConversation","C2C".concat(this.member.userID)),this.hide()},handleShowMemberProfile:function(e){var t=e.event,n=e.member;this.member=n||{},this.x=t.x,this.y=t.y,this.show()},show:function(){this.visible||(window.addEventListener("click",this.handleClick,this),this.visible=!0)},hide:function(){this.visible&&(window.removeEventListener("click",this.handleClick,this),this.visible=!1)},handleClick:function(e){e.target!==this.$refs["member-profile-card"]&&this.hide()}}},ur=cr,lr=(n("29bd"),Object(ee["a"])(ur,rr,ir,!1,null,"1012cb30",null)),pr=lr.exports,mr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{value:e.currentGame.currentTab,type:"card"},on:{input:function(t){return e.$store.commit("setCurrentTab",{groupId:e.currentConversation.groupProfile.groupID,tab:t})},"tab-click":e.handleClick}},[n("el-tab-pane",{attrs:{label:"ç¾¤ä¿¡æ¯",name:"group"}},[n("group-profile",{attrs:{groupProfile:e.currentConversation.groupProfile}})],1),n("el-tab-pane",{attrs:{name:"note"}},[n("el-badge",{attrs:{slot:"label","is-dot":"",hidden:!e.currentGame.noteUnread},slot:"label"},[e._v("é‡è¦ç¬”è®°")]),n("note-panel",{attrs:{"group-profile":e.currentConversation.groupProfile}})],1),n("el-tab-pane",{attrs:{label:"Log å½•åˆ¶",name:"log"}},[n("log-panel",{attrs:{"group-profile":e.currentConversation.groupProfile}})],1)],1)},fr=[],dr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"log-switch"},[n("div",{staticClass:"label"},[e._v("å¯ç”¨ Log")]),n("el-switch",{attrs:{value:e.currentGame.logEnabled},on:{input:function(t){return e.$store.commit("toggleLogEnabled",{groupId:e.groupProfile.groupID,enabled:t})}}})],1),n("div",{staticClass:"btn-container"},[n("el-button-group",[n("el-button",{attrs:{size:"small"},on:{click:e.exportText}},[e._v("å¯¼å‡ºä¸ºæ–‡æœ¬")]),n("el-button",{attrs:{size:"small"},on:{click:e.exportHTML}},[e._v("å¯¼å‡ºä¸ºHTML")]),n("el-button",{attrs:{size:"small"},on:{click:e.exportJson}},[e._v("å¯¼å‡ºä¸ºJSON")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.clearAllLogs}},[e._v("æ¸…ç©º")])],1)],1),n("draggable",{staticClass:"log-container",attrs:{handle:".handle","ghost-class":"moving",value:e.currentGame.logs},on:{input:function(t){return e.$store.commit("updateLogs",{groupId:e.groupProfile.groupID,logs:t})}}},e._l(e.currentGame.logs,(function(t){return n("div",{key:t.id,staticClass:"log-item"},[n("div",[n("i",{staticClass:"el-icon-rank handle"}),n("div",{staticClass:"nick",attrs:{title:t.from}},[e._v(e._s(t.nick||t.from))]),n("div",{staticClass:"content",attrs:{title:e.formatTime(t.time)}},[e._v(e._s(t.content))])]),n("i",{staticClass:"el-icon-close delete",on:{click:function(n){return e.onDeleteLog(t.id)}}})])})),0)],1)},hr=[],gr=n("b76a"),vr=n.n(gr);function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Or="\n.chat-item {\n    padding: 4px;\n}\n\n.chat-item-name {\n    font-weight: bold;\n}\n\n.chat-user-bot {\n    background-color: #ffffe0;\n}\n/* xxx æ›¿æ¢æˆå®é™…çš„ userid */\n.chat-user-xxx {\n    background-color: #e0ffff;\n}",Cr={props:["groupProfile"],components:{ElSwitch:l.a,draggable:vr.a},computed:yr({},Object(ue["c"])({currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{formatTime:function(e){return ze(new Date(1e3*e))},onDeleteLog:function(e){this.$store.commit("updateLogs",{groupId:this.groupProfile.groupID,logs:this.currentGame.logs.filter((function(t){return t.id!==e}))})},clearAllLogs:function(){this.$store.commit("updateLogs",{groupId:this.groupProfile.groupID,logs:[]})},exportText:function(){var e=this,t="",n="";this.currentGame.logs.forEach((function(s){var r=s.nick||s.from;r!==t&&(n+="".concat(r," ").concat(e.formatTime(s.time),"\n")),n+=s.content,t=r})),this.download("text",n)},exportHTML:function(){var e=this,t="",n="";this.currentGame.logs.forEach((function(s){var r=s.nick||s.from;r!==t?(""!==n&&(n+="</div>"),n+="<div class='chat-item chat-user-".concat(s.from,"'>")+"<div class='meta'><span class='chat-item-name'>".concat(r,"</span>")+"<span class='chat-item-time'>".concat(e.formatTime(s.time),"</span>")+"</div><div class='content'>".concat(s.content,"</div>")):n+="<div class='content'>".concat(s.content,"</div>"),t=r})),""!==n&&(n+="</div>"),n+="<style>".concat(Or,"</style>"),this.download("html",n)},exportJson:function(){this.download("json",JSON.stringify(this.currentGame.logs))},download:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:".concat(e,"/plain;charset=utf-8,")+encodeURIComponent(t)),n.setAttribute("download","log.".concat("text"===e?"txt":e)),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},Pr=Cr,wr=(n("62fb"),Object(ee["a"])(Pr,dr,hr,!1,null,"349dc0d6",null)),Mr=wr.exports,_r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-alert",{attrs:{title:"ä¸»æŒäººå‘å¸ƒçš„é‡è¦ç¬”è®°å°†ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ",type:"info",description:"ä½ ä¹Ÿå¯ä»¥æŠŠè‡ªå·±è§‰å¾—é‡è¦çš„æ¶ˆæ¯æ”¶è—åœ¨è¿™é‡Œï¼ˆæ•¬è¯·æœŸå¾…ï¼‰","show-icon":""}}),n("bgm",{attrs:{bgm:e.currentGame.bgm}}),n("draggable",{staticClass:"card-list",attrs:{"ghost-class":"moving",value:e.currentGame.notes},on:{input:function(t){return e.$store.commit("updateNotes",{groupId:e.groupProfile.groupID,notes:t})}}},e._l(e.currentGame.notes,(function(t){return n("el-card",{key:t.id,staticClass:"card",attrs:{shadow:"hover"}},[t.type===e.TIM.TYPES.MSG_TEXT?n("div",{staticClass:"note-text"},[e._v(e._s(t.payload))]):t.type===e.TIM.TYPES.MSG_IMAGE?n("img",{staticClass:"note-img",attrs:{src:e.formatUrl(t.payload)},on:{click:function(n){return e.handlePreview(t.payload)}}}):e._e(),n("div",{staticClass:"tools"},[n("el-button",{attrs:{icon:"el-icon-copy-document",size:"mini",circle:""},on:{click:function(n){return e.handleCopyCard(t.payload)}}}),n("el-button",{attrs:{icon:"el-icon-close",size:"mini",circle:""},on:{click:function(n){return e.handleDelete(t.id)}}})],1)])})),1)],1)},jr=[],Ir=function(){var e=this,t=e.$createElement,n=e._self._c||t;return 1===e.bgm.platform?n("iframe",{key:e.bgm.id,staticClass:"player",attrs:{frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",height:2===e.bgm.type?110:235,src:"//music.163.com/outchain/player?type="+e.bgm.type+"&id="+e.bgm.id}}):e._e()},Er=[],Tr={props:["bgm"]},Dr=Tr,Sr=(n("831a"),Object(ee["a"])(Dr,Ir,Er,!1,null,"33e8d0dc",null)),xr=Sr.exports;function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gr={props:["groupProfile"],components:{bgm:xr,draggable:vr.a},computed:Ar({},Object(ue["c"])({currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{formatUrl:function(e){return"//"===e.slice(0,2)?"https:".concat(e):e},handlePreview:function(e){this.$bus.$emit("image-preview",{url:e})},handleCopyCard:function(e){var t=this;this.$copyText(e).then((function(){t.$store.commit("showMessage",{type:"success",message:"å¤åˆ¶æˆåŠŸ"})}))},handleDelete:function(e){var t=this.currentGame.notes.filter((function(t){return t.id!==e}));this.$store.commit("updateNotes",{groupId:this.groupProfile.groupID,notes:t})}}},Lr=Gr,Rr=(n("ec1e"),Object(ee["a"])(Lr,_r,jr,!1,null,"61e448c4",null)),Nr=Rr.exports;function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Br={name:"RightPanel",components:{LogPanel:Mr,NotePanel:Nr,GroupProfile:Fs},data:function(){return{activeName:"group"}},computed:$r({},Object(ue["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentGame:function(e){return e.game.list[e.conversation.currentConversation.groupProfile.groupID]}})),methods:{handleClick:function(e){"note"===e.name&&this.$store.commit("setNoteUnread",{groupId:this.currentConversation.groupProfile.groupID,unread:!1})}}},Yr=Br,Fr=(n("0e7c"),Object(ee["a"])(Yr,mr,fr,!1,null,"27e40606",null)),Vr=Fr.exports;function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zr={name:"CurrentConversation",components:{MessageSendBox:Ae,MessageItem:Yn,ConversationProfile:sr,MemberProfileCard:pr,RightPanel:Vr},data:function(){return{isShowScrollButtomTips:!1,preScrollHeight:0,showConversationProfile:!0,timeout:""}},computed:Hr(Hr(Hr({},Object(ue["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUnreadCount:function(e){return e.conversation.currentConversation.unreadCount},currentMessageList:function(e){return e.conversation.currentMessageList},isCompleted:function(e){return e.conversation.isCompleted}})),Object(ue["b"])(["toAccount","hidden"])),{},{showCurrentConversation:function(){return!!this.currentConversation.conversationID},name:function(){return"C2C"===this.currentConversation.type?this.currentConversation.userProfile.nick||this.toAccount:"GROUP"===this.currentConversation.type?this.currentConversation.groupProfile.name||this.toAccount:"@TIM#SYSTEM"===this.currentConversation.conversationID?"ç³»ç»Ÿé€šçŸ¥":this.toAccount},showMessageSendBox:function(){return this.currentConversation.type!==this.TIM.TYPES.CONV_SYSTEM}}),mounted:function(){if(this.$bus.$on("image-loaded",this.onImageLoaded),this.$bus.$on("scroll-bottom",this.scrollMessageListToButtom),"@TIM#SYSTEM"===this.currentConversation.conversationID)return!1},updated:function(){this.keepMessageListOnButtom()},watch:{currentUnreadCount:function(e){!this.hidden&&e>0&&this.tim.setMessageRead({conversationID:this.currentConversation.conversationID})},hidden:function(e){!e&&this.currentUnreadCount>0&&this.tim.setMessageRead({conversationID:this.currentConversation.conversationID})}},methods:{onScroll:function(e){var t=e.target.scrollTop,n=this.$refs["message-list"];n&&this.preScrollHeight-n.clientHeight-t<20&&(this.isShowScrollButtomTips=!1)},keepMessageListOnButtom:function(){var e=this.$refs["message-list"];e&&(this.preScrollHeight-e.clientHeight-e.scrollTop<20?(this.$nextTick((function(){e.scrollTop=e.scrollHeight})),this.isShowScrollButtomTips=!1):this.isShowScrollButtomTips=!0,this.preScrollHeight=e.scrollHeight)},scrollMessageListToButtom:function(){var e=this;this.$nextTick((function(){var t=e.$refs["message-list"];t&&(t.scrollTop=t.scrollHeight,e.preScrollHeight=t.scrollHeight,e.isShowScrollButtomTips=!1)}))},showMore:function(){this.showConversationProfile=!this.showConversationProfile},onImageLoaded:function(){this.keepMessageListOnButtom()}}},Kr=zr,Jr=(n("4c27"),Object(ee["a"])(Kr,le,pe,!1,null,"44982faf",null)),Qr=Jr.exports,Wr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"side-bar-wrapper"},[n("div",{staticClass:"bar-left"},[n("div",{staticClass:"tab-items",on:{click:e.handleClick}},[n("div",{staticClass:"iconfont icon-conversation",class:{active:e.showConversationList},attrs:{id:"conversation-list",title:"ä¼šè¯åˆ—è¡¨"}},[0!==e.totalUnreadCount?n("sup",{staticClass:"unread"},[e.totalUnreadCount>99?[e._v("99+")]:[e._v(e._s(e.totalUnreadCount))]],2):e._e()]),n("div",{staticClass:"iconfont icon-group",class:{active:e.showGroupList},attrs:{id:"group-list",title:"ç¾¤ç»„åˆ—è¡¨"}}),n("div",{staticClass:"iconfont icon-contact",class:{active:e.showFriendList},attrs:{id:"friend-list",title:"å¥½å‹åˆ—è¡¨"}}),n("div",{staticClass:"iconfont icon-blacklist",class:{active:e.showBlackList},attrs:{id:"black-list",title:"é»‘åå•åˆ—è¡¨"}})]),n("div",{staticClass:"bottom"},[n("div",{staticClass:"iconfont icon-tuichu",attrs:{title:"é€€å‡º"},on:{click:e.handleExit}})])]),n("div",{staticClass:"bar-right"},[n("conversation-list",{directives:[{name:"show",rawName:"v-show",value:e.showConversationList,expression:"showConversationList"}]}),n("group-list",{directives:[{name:"show",rawName:"v-show",value:e.showGroupList,expression:"showGroupList"}]}),n("friend-list",{directives:[{name:"show",rawName:"v-show",value:e.showFriendList,expression:"showFriendList"}]}),n("black-list",{directives:[{name:"show",rawName:"v-show",value:e.showBlackList,expression:"showBlackList"}]})],1)])},Zr=[],Xr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-container"},[n("div",{staticClass:"scroll-container"},e._l(e.conversationList,(function(e){return n("conversation-item",{key:e.conversationID,attrs:{conversation:e}})})),1)])},ei=[],ti=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conversation-item-container",class:{choose:e.conversation.conversationID===e.currentConversation.conversationID},on:{click:e.selectConversation}},[n("div",{staticClass:"close-btn"},[n("span",{staticClass:"tim-icon-close",attrs:{title:"åˆ é™¤ä¼šè¯"},on:{click:e.deleteConversation}})]),n("div",{staticClass:"warp"},[n("avatar",{attrs:{src:e.avatar,type:e.conversation.type}}),n("div",{staticClass:"content"},[n("div",{staticClass:"row-1"},[n("div",{staticClass:"name"},[n("div",{staticClass:"text-ellipsis"},[e.conversation.type===e.TIM.TYPES.CONV_C2C?n("span",{attrs:{title:e.conversation.userProfile.nick||e.conversation.userProfile.userID}},[e._v(e._s(e.conversation.userProfile.nick||e.conversation.userProfile.userID)+"\n            ")]):e.conversation.type===e.TIM.TYPES.CONV_GROUP?n("span",{attrs:{title:e.conversation.groupProfile.name||e.conversation.groupProfile.groupID}},[e._v(e._s(e.conversation.groupProfile.name||e.conversation.groupProfile.groupID)+"\n            ")]):e.conversation.type===e.TIM.TYPES.CONV_SYSTEM?n("span",[e._v("ç³»ç»Ÿé€šçŸ¥\n            ")]):e._e()])]),n("div",{staticClass:"unread-count"},[e.showUnreadCount?n("span",{staticClass:"badge"},[e._v("\n            "+e._s(e.conversation.unreadCount>99?"99+":e.conversation.unreadCount)+"\n          ")]):e._e()])]),n("div",{staticClass:"row-2"},[n("div",{staticClass:"summary"},[e.conversation.lastMessage?n("div",{staticClass:"text-ellipsis"},[e.hasMessageAtMe?n("span",{staticClass:"remind",staticStyle:{color:"red"}},[e._v("[æœ‰äººæåˆ°æˆ‘]")]):e._e(),n("span",{staticClass:"text",attrs:{title:e.conversation.lastMessage.messageForShow}},[e._v("\n              "+e._s(e.messageForShow)+"\n            ")])]):e._e()]),n("div",{staticClass:"date"},[e._v("\n          "+e._s(e.date)+"\n        ")])])])],1)])},ni=[];function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ii={name:"conversation-item",props:["conversation"],data:function(){return{popoverVisible:!1,hasMessageAtMe:!1}},computed:ri(ri({showUnreadCount:function(){return(this.$store.getters.hidden||this.currentConversation.conversationID!==this.conversation.conversationID)&&this.conversation.unreadCount>0},date:function(){if(!this.conversation.lastMessage||!this.conversation.lastMessage.lastTime)return"";var e=new Date(1e3*this.conversation.lastMessage.lastTime);return Ke(e)?He(e):qe(e)},avatar:function(){switch(this.conversation.type){case"GROUP":return this.conversation.groupProfile.avatar;case"C2C":return this.conversation.userProfile.avatar;default:return""}},conversationName:function(){return this.conversation.type===this.TIM.TYPES.CONV_C2C?this.conversation.userProfile.nick||this.conversation.userProfile.userID:this.conversation.type===this.TIM.TYPES.CONV_GROUP?this.conversation.groupProfile.name||this.conversation.groupProfile.groupID:this.conversation.type===this.TIM.TYPES.CONV_SYSTEM?"ç³»ç»Ÿé€šçŸ¥":""},showGrayBadge:function(){return this.conversation.type===this.TIM.TYPES.CONV_GROUP&&"AcceptNotNotify"===this.conversation.groupProfile.selfInfo.messageRemindType},messageForShow:function(){return this.conversation.lastMessage.isRevoked?this.conversation.lastMessage.fromAccount===this.currentUserProfile.userID?"ä½ æ’¤å›äº†ä¸€æ¡æ¶ˆæ¯":this.conversation.type===this.TIM.TYPES.CONV_C2C?"å¯¹æ–¹æ’¤å›äº†ä¸€æ¡æ¶ˆæ¯":"".concat(this.conversation.lastMessage.fromAccount,"æ’¤å›äº†ä¸€æ¡æ¶ˆæ¯"):this.conversation.lastMessage.messageForShow}},Object(ue["c"])({currentConversation:function(e){return e.conversation.currentConversation},currentUserProfile:function(e){return e.user.currentUserProfile}})),Object(ue["b"])(["toAccount"])),mounted:function(){var e=this;this.$bus.$on("new-messsage-at-me",(function(t){t.data.conversationID===e.conversation.conversationID&&e.conversation.conversationID!==e.currentConversation.conversationID&&(e.hasMessageAtMe=!0)}))},methods:{selectConversation:function(){this.conversation.conversationID!==this.currentConversation.conversationID&&this.$store.dispatch("checkoutConversation",this.conversation.conversationID)},deleteConversation:function(e){var t=this;e.stopPropagation(),this.tim.deleteConversation(this.conversation.conversationID).then((function(){t.$store.commit("showMessage",{message:"ä¼šè¯ã€".concat(t.conversationName,"ã€‘åˆ é™¤æˆåŠŸ!"),type:"success"}),t.popoverVisible=!1,t.$store.commit("resetCurrentConversation")})).catch((function(e){t.$store.commit("showMessage",{message:"ä¼šè¯ã€".concat(t.conversationName,"ã€‘åˆ é™¤å¤±è´¥!, error=").concat(e.message),type:"error"}),t.popoverVisible=!1}))},showContextMenu:function(){this.popoverVisible=!0}},watch:{currentConversation:function(e){e.conversationID===this.conversation.conversationID&&(this.hasMessageAtMe=!1)}}},oi=ii,ai=(n("15aa"),Object(ee["a"])(oi,ti,ni,!1,null,"1e828726",null)),ci=ai.exports;function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pi={name:"ConversationList",components:{ConversationItem:ci},data:function(){return{showDialog:!1,userID:"",isCheckouting:!1,timeout:null}},computed:li({},Object(ue["c"])({conversationList:function(e){return e.conversation.conversationList},currentConversation:function(e){return e.conversation.currentConversation}})),mounted:function(){window.addEventListener("keydown",this.handleKeydown)},destroyed:function(){window.removeEventListener("keydown",this.handleKeydown)},methods:{handleRefresh:function(){this.refreshConversation()()},refreshConversation:function(){var e=this;return function(){e.timeout||(e.timeout=setTimeout((function(){e.timeout=null,e.tim.getConversationList().then((function(){e.$store.commit("showMessage",{message:"åˆ·æ–°æˆåŠŸ",type:"success"})}))}),1e3))}},handleAddButtonClick:function(){this.showDialog=!0},handleKeydown:function(e){var t=this;if(!(38!==e.keyCode&&40!==e.keyCode||this.isCheckouting)){var n=this.conversationList.findIndex((function(e){return e.conversationID===t.currentConversation.conversationID}));38===e.keyCode&&n-1>=0&&this.checkoutPrev(n),40===e.keyCode&&n+1<this.conversationList.length&&this.checkoutNext(n)}},checkoutPrev:function(e){var t=this;this.isCheckouting=!0,this.$store.dispatch("checkoutConversation",this.conversationList[e-1].conversationID).then((function(){t.isCheckouting=!1})).catch((function(){t.isCheckouting=!1}))},checkoutNext:function(e){var t=this;this.isCheckouting=!0,this.$store.dispatch("checkoutConversation",this.conversationList[e+1].conversationID).then((function(){t.isCheckouting=!1})).catch((function(){t.isCheckouting=!1}))}}},mi=pi,fi=(n("c16a"),Object(ee["a"])(mi,Xr,ei,!1,null,"ce3bcfe8",null)),di=fi.exports,hi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-container"},[n("div",{staticClass:"group-container"},e._l(e.groupList,(function(e){return n("group-item",{key:e.groupID,attrs:{group:e}})})),1)])},gi=[],vi=(n("96cf"),n("3b8d")),bi=(n("3db2"),n("58b8")),yi=n.n(bi),Oi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"createGroupForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"ç¾¤åç§°",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"ç¾¤å¤´åƒåœ°å€"}},[n("el-input",{model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1)],1),n("div",{staticClass:"dialog-footer",style:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.closeCreateGroupModel}},[e._v("å– æ¶ˆ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("createGroupForm")}}},[e._v("ç«‹å³åˆ›å»º")])],1)],1)},Ci=[];function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mi={components:{ElForm:_e.a,ElFormItem:we.a,ElInput:N.a,ElSelect:Qn.a,ElOption:Kn.a,ElRadioGroup:Ce.a,ElRadio:ye.a},data:function(){return{form:{groupID:"",name:"",type:this.TIM.TYPES.GRP_PUBLIC,avatar:"",introduction:"",notification:"",joinOption:"FreeAccess",memberList:[]},options:[],loading:!1,rules:{name:[{required:!0,message:"è¯·è¾“å…¥ç¾¤åç§°",trigger:"blur"}]}}},computed:{joinOptionDisabled:function(){return[this.TIM.TYPES.GRP_WORK,this.TIM.TYPES.GRP_MEETING,this.TIM.TYPES.GRP_AVCHATROOM].includes(this.form.type)}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.createGroup()}))},closeCreateGroupModel:function(){this.$store.commit("updateCreateGroupModelVisible",!1)},createGroup:function(){var e=this;this.tim.createGroup(this.getOptions()).then((function(t){e.$store.commit("showMessage",{message:"ç¾¤ç»„ï¼šã€".concat(t.data.group.name,"ã€‘åˆ›å»ºæˆåŠŸ"),type:"success"}),e.closeCreateGroupModel()})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},getOptions:function(){var e=wi(wi({},this.form),{},{memberList:this.form.memberList.map((function(e){return{userID:e}}))});return[this.TIM.TYPES.GRP_WORK,this.TIM.TYPES.GRP_AVCHATROOM].includes(this.form.type)&&delete e.joinOption,e},handleSearchUser:function(e){var t=this;""!==e&&(this.loading=!0,this.tim.getUserProfile({userIDList:[e]}).then((function(e){var n=e.data;t.options=n.map((function(e){return e.userID})),t.loading=!1})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})})))}}},_i=Mi,ji=Object(ee["a"])(_i,Oi,Ci,!1,null,"50ee1526",null),Ii=ji.exports,Ei=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scroll-container",on:{click:e.handleGroupClick}},[n("div",{staticClass:"group-item"},[n("avatar",{attrs:{src:e.group.avatar}}),n("div",{staticClass:"group-name text-ellipsis"},[e._v(e._s(e.group.name))])],1)])},Ti=[],Di={props:["group"],data:function(){return{visible:!1,options:[{text:"é€€å‡ºç¾¤ç»„",handler:this.quitGroup}]}},methods:{handleGroupClick:function(){var e="GROUP".concat(this.group.groupID);this.$store.dispatch("checkoutConversation",e)},quitGroup:function(){var e=this;this.tim.quitGroup(this.group.groupID).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))}}},Si=Di,xi=(n("2054"),Object(ee["a"])(Si,Ei,Ti,!1,null,"64a02b1a",null)),ki=xi.exports;function Ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Li={data:function(){return{groupID:"",hideSearchLoading:!0}},components:{GroupItem:ki,ElDialog:A.a,CreateGroup:Ii,ElAutocomplete:yi.a},computed:Gi({groupList:function(){return this.$store.state.group.groupList}},Object(ue["c"])({createGroupModelVisible:function(e){return e.group.createGroupModelVisible}})),methods:{onGroupUpdated:function(e){this.$store.dispatch("updateGroupList",e)},createGroup:function(){},closeCreateGroupModel:function(){this.$store.commit("updateCreateGroupModelVisible",!1)},searchGroupByID:function(e,t){var n=this;e.trim().length>0?(this.hideSearchLoading=!1,this.tim.searchGroupByID(e).then((function(e){var n=e.data.group;t([n])})).catch((function(){n.$store.commit("showMessage",{message:"æ²¡æœ‰æ‰¾åˆ°è¯¥ç¾¤",type:"error"})}))):this.hideSearchLoading=!0},showCreateGroupModel:function(){this.$store.commit("updateCreateGroupModelVisible",!0)},applyJoinGroup:function(e){var t=this;this.tim.joinGroup({groupID:e.groupID}).then(function(){var e=Object(vi["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=n.data.status,e.next=e.t0===t.TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL?3:e.t0===t.TIM.TYPES.JOIN_STATUS_SUCCESS?5:e.t0===t.TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP?9:11;break;case 3:return t.$store.commit("showMessage",{message:"ç”³è¯·æˆåŠŸï¼Œç­‰å¾…ç¾¤ç®¡ç†å‘˜ç¡®è®¤ã€‚",type:"info"}),e.abrupt("break",12);case 5:return e.next=7,t.$store.dispatch("checkoutConversation","GROUP".concat(n.data.group.groupID));case 7:return t.$store.commit("showMessage",{message:"åŠ ç¾¤æˆåŠŸ",type:"success"}),e.abrupt("break",12);case 9:return t.$store.commit("showMessage",{message:"æ‚¨å·²ç»æ˜¯ç¾¤æˆå‘˜äº†ï¼Œè¯·å‹¿é‡å¤åŠ ç¾¤å“¦ï¼",type:"info"}),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$store.commit("showMessage",{message:e.message,type:"error"})}))}}},Ri=Li,Ni=(n("7ba6"),Object(ee["a"])(Ri,hi,gi,!1,null,"4dedbdfc",null)),Ui=Ni.exports,$i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friend-list-container",class:{default:!e.hasFriend}},[e.hasFriend?n("div",e._l(e.friendList,(function(e){return n("friend-item",{key:e.userID,attrs:{friend:e}})})),1):n("div",{staticStyle:{color:"gray"}},[e._v("æš‚æ— å¥½å‹")])])},Bi=[],Yi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"friend-item-container"},[n("el-col",{attrs:{span:6}},[n("avatar",{attrs:{src:e.friend.profile.avatar}})],1),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"friend-name"},[e._v(e._s(e.friend.profile.nick||e.friend.userID))])])],1)],1)},Fi=[],Vi={props:{friend:{type:Object,required:!0}},methods:{handleFriendClick:function(){var e=this;this.tim.getConversationProfile("C2C".concat(this.friend.userID)).then((function(t){var n=t.data;e.$store.commit("updateCurrentConversation",n)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))}}},qi=Vi,Hi=Object(ee["a"])(qi,Yi,Fi,!1,null,"0e5cffba",null),zi=Hi.exports;function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qi={components:{FriendItem:zi},computed:Ji(Ji({},Object(ue["c"])({friendList:function(e){return e.friend.friendList}})),{},{hasFriend:function(){return this.friendList.length>0}})},Wi=Qi,Zi=(n("47b1"),Object(ee["a"])(Wi,$i,Bi,!1,null,null,null)),Xi=Zi.exports,eo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"blacklist-wrapper",class:{default:!e.hasBlacklist}},[e.hasBlacklist?n("div",e._l(e.blacklist,(function(e){return n("blacklist-item",{key:e.userID,attrs:{profile:e}})})),1):n("span",{staticStyle:{color:"gray"}},[e._v("é»‘åå•è¿˜æ˜¯ç©ºçš„")])])},to=[],no=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"blacklist-item-wrapper"},[n("img",{staticClass:"avatar",attrs:{src:e.profile.avatar?e.profile.avatar:"http://imgcache.qq.com/open/qcloud/video/act/webim-avatar/avatar-2.png"}}),n("div",{staticClass:"item"},[e._v(e._s(e.profile.nick||e.profile.userID))]),n("el-button",{attrs:{type:"text"},on:{click:e.removeFromBlacklist}},[e._v("å–æ¶ˆæ‹‰é»‘")])],1)},so=[],ro={name:"BlacklistItem",props:{profile:{type:Object,required:!0}},methods:{removeFromBlacklist:function(){var e=this;this.tim.removeFromBlacklist({userIDList:[this.profile.userID]}).then((function(){e.$store.commit("removeFromBlacklist",e.profile.userID)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))}}},io=ro,oo=(n("b849"),Object(ee["a"])(io,no,so,!1,null,"6763cfe2",null)),ao=oo.exports;function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lo={name:"Blacklist",components:{BlacklistItem:ao},computed:uo(uo({},Object(ue["c"])({blacklist:function(e){return e.blacklist.blacklist}})),{},{hasBlacklist:function(){return this.blacklist.length>0}})},po=lo,mo=(n("86b5"),Object(ee["a"])(po,eo,to,!1,null,"00ad617d",null)),fo=mo.exports;function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vo={CONVERSATION_LIST:"conversation-list",GROUP_LIST:"group-list",FRIEND_LIST:"friend-list",BLACK_LIST:"black-list"},bo={name:"SideBar",components:{ConversationList:di,GroupList:Ui,FriendList:Xi,BlackList:fo},data:function(){return{active:vo.CONVERSATION_LIST,activeName:vo}},computed:go(go(go({},Object(ue["b"])(["totalUnreadCount"])),Object(ue["c"])({userID:function(e){return e.user.userID}})),{},{showConversationList:function(){return this.active===vo.CONVERSATION_LIST},showGroupList:function(){return this.active===vo.GROUP_LIST},showFriendList:function(){return this.active===vo.FRIEND_LIST},showBlackList:function(){return this.active===vo.BLACK_LIST},showAddButton:function(){return[vo.CONVERSATION_LIST,vo.GROUP_LIST].includes(this.active)}}),methods:{checkoutActive:function(e){this.active=e},handleClick:function(e){switch(e.target.id){case vo.CONVERSATION_LIST:this.checkoutActive(vo.CONVERSATION_LIST);break;case vo.GROUP_LIST:this.checkoutActive(vo.GROUP_LIST);break;case vo.FRIEND_LIST:this.checkoutActive(vo.FRIEND_LIST);break;case vo.BLACK_LIST:this.checkoutActive(vo.BLACK_LIST);break}},handleRefresh:function(){var e=this;switch(this.active){case vo.CONVERSATION_LIST:this.tim.getConversationList().catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}));break;case vo.GROUP_LIST:this.getGroupList();break;case vo.FRIEND_LIST:this.getFriendList();break;case vo.BLACK_LIST:this.$store.dispatch("getBlacklist");break}},getGroupList:function(){var e=this;this.tim.getGroupList().then((function(t){var n=t.data;e.$store.dispatch("updateGroupList",n)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},getFriendList:function(){var e=this;this.tim.getFriendList().then((function(t){var n=t.data;e.$store.commit("upadteFriendList",n)})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})})).catch((function(t){e.$store.commit("showMessage",{type:"error",message:t.message})}))},handleExit:function(){var e=this;this.$confirm("ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ").then((function(){e.$store.dispatch("logout")}))}}},yo=bo,Oo=(n("0510"),Object(ee["a"])(yo,Wr,Zr,!1,null,"9c1ef4de",null)),Co=Oo.exports,Po=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile-container"},[n("my-profile"),n("div",{staticClass:"base-info"},[n("div",{staticClass:"nick"},[e._v(e._s(e.currentUserProfile.nick||e.currentUserProfile.userID))]),n("div",{staticClass:"uid"},[e._v(e._s(e.currentUserProfile.userID))])]),n("div",{staticClass:"header-bar"},[n("button",{attrs:{title:"åˆ·æ–°åˆ—è¡¨"},on:{click:e.handleRefresh}},[n("i",{staticClass:"tim-icon-refresh"})]),n("el-dropdown",{on:{command:e.handleCreateChat}},[n("button",{staticClass:"btn2",attrs:{title:"åˆ›å»ºä¼šè¯"}},[n("i",{staticClass:"tim-icon-add"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"group"}},[e._v("åˆ›å»ºç¾¤èŠ")]),n("el-dropdown-item",{attrs:{command:"c2c"}},[e._v("å‘èµ·å•èŠ")])],1)],1)],1),n("el-dialog",{attrs:{title:"å‘èµ·ä¼šè¯",visible:e.showC2CDialog,width:"40%"},on:{"update:visible":function(t){e.showC2CDialog=t}}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç”¨æˆ·ID(QQå·)"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleCreateC2C(t)}},model:{value:e.userID,callback:function(t){e.userID=t},expression:"userID"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.showC2CDialog=!1}}},[e._v("å– æ¶ˆ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateC2C}},[e._v("ç¡® å®š")])],1)],1),n("el-dialog",{attrs:{title:"åˆ›å»ºç¾¤ç»„",visible:e.createGroupModelVisible,width:"40%"},on:{close:function(t){return e.$store.commit("updateCreateGroupModelVisible",!1)}}},[n("create-group")],1)],1)},wo=[],Mo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-profile-wrapper"},[n("el-dialog",{attrs:{title:"ç¼–è¾‘ä¸ªäººèµ„æ–™",visible:e.showEditMyProfile,width:"40%"},on:{"update:visible":function(t){e.showEditMyProfile=t}}},[n("el-form",{attrs:{"label-width":"60px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("el-form-item",{staticClass:"avatar-edit",attrs:{label:"å¤´åƒ"}},[n("el-input",{attrs:{placeholder:"å¤´åƒåœ°å€(URL)"},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}}),n("el-button",{attrs:{type:"primary"},on:{click:e.useQQAvatar}},[e._v("ä½¿ç”¨æˆ‘çš„QQå¤´åƒ")])],1),n("el-form-item",{attrs:{label:"æ˜µç§°"}},[n("el-input",{attrs:{placeholder:"æ˜µç§°"},model:{value:e.form.nick,callback:function(t){e.$set(e.form,"nick",t)},expression:"form.nick"}})],1),n("el-form-item",{attrs:{label:"æ€§åˆ«"}},[n("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[n("el-radio",{attrs:{label:e.TIM.TYPES.GENDER_MALE}},[e._v("ç”·")]),n("el-radio",{attrs:{label:e.TIM.TYPES.GENDER_FEMALE}},[e._v("å¥³")]),n("el-radio",{attrs:{label:e.TIM.TYPES.GENDER_UNKNOWN}},[e._v("ä¸æ˜¾ç¤º")])],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.showEditMyProfile=!1}}},[e._v("å– æ¶ˆ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.editMyProfile}},[e._v("ç¡® å®š")])],1)],1),n("div",{on:{click:e.handleEdit}},[n("avatar",{staticClass:"my-avatar",attrs:{src:e.currentUserProfile.avatar}})],1)],1)},_o=[],jo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile-card-wrapper"},[n("div",{staticClass:"content"},[n("avatar",{attrs:{src:e.profile.avatar}}),n("div",{staticClass:"basic"},[n("span",{staticClass:"nick text-ellipsis"},[e._v(e._s(e.profile.nick||e.profile.userID))]),n("span",{staticClass:"iconfont",class:e.genderClass})])],1)])},Io=[],Eo={name:"ProfileCard",props:{profile:{type:Object,required:!0}},computed:{genderClass:function(){switch(this.profile.gender){case this.TIM.TYPES.GENDER_MALE:return"icon-male";case this.TIM.TYPES.GENDER_FEMALE:return"icon-female";default:return"æš‚æ— "}}}},To=Eo,Do=(n("8127"),Object(ee["a"])(To,jo,Io,!1,null,null,null)),So=Do.exports;function xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ao={name:"MyProfile",components:{ElPopover:c.a,ProfileCard:So,ElForm:_e.a,ElFormItem:we.a,ElRadioGroup:Ce.a,ElRadio:ye.a},data:function(){return{showEditMyProfile:!1,form:{avatar:"",nick:"",gender:""}}},computed:ko(ko({},Object(ue["c"])({currentUserId:function(e){return e.user.userID},currentUserProfile:function(e){return e.user.currentUserProfile},currentConversation:function(e){return e.conversation.currentConversation}})),{},{gender:function(){switch(this.currentUserProfile.gender){case this.TIM.TYPES.GENDER_MALE:return"ç”·";case this.TIM.TYPES.GENDER_FEMALE:return"å¥³";default:return"æš‚æ— "}}}),methods:{editMyProfile:function(){var e=this;if(this.form.avatar&&-1===this.form.avatar.indexOf("http"))return this.$store.commit("showMessage",{message:"å¤´åƒåº”è¯¥æ˜¯ Url åœ°å€",type:"warning"}),void(this.form.avatar="");var t={};Object.keys(this.form).forEach((function(n){e.form[n]&&(t[n]=e.form[n])})),this.tim.updateMyProfile(t).then((function(){e.$store.commit("showMessage",{message:"ä¿®æ”¹æˆåŠŸ"}),e.showEditMyProfile=!1})).catch((function(t){e.$store.commit("showMessage",{message:t.message,type:"error"})}))},handleEdit:function(){var e=this.currentUserProfile,t=e.avatar,n=e.nick,s=e.gender;Object.assign(this.form,{avatar:t,nick:n,gender:s}),this.showEditMyProfile=!0},useQQAvatar:function(){this.form.avatar="https://q.qlogo.cn/g?b=qq&nk=".concat(this.currentUserId,"&s=100")}}},Go=Ao,Lo=(n("96b9"),Object(ee["a"])(Go,Mo,_o,!1,null,"680fcfff",null)),Ro=Lo.exports;function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $o={components:{MyProfile:Ro,CreateGroup:Ii},data:function(){return{showC2CDialog:!1,userID:"",timeout:null}},computed:Uo({},Object(ue["c"])({currentUserId:function(e){return e.user.userID},currentUserProfile:function(e){return e.user.currentUserProfile},createGroupModelVisible:function(e){return e.group.createGroupModelVisible}})),methods:{handleRefresh:function(){this.refreshConversation()()},refreshConversation:function(){var e=this;return function(){e.timeout||(e.timeout=setTimeout((function(){e.timeout=null,e.tim.getConversationList().then((function(){e.$store.commit("showMessage",{message:"åˆ·æ–°æˆåŠŸ",type:"success"})}))}),1e3))}},handleCreateChat:function(e){console.log(e),"c2c"===e?this.showC2CDialog=!0:this.$store.commit("updateCreateGroupModelVisible",!0)},handleCreateC2C:function(){var e=this;"@TIM#SYSTEM"!==this.userID?this.$store.dispatch("checkoutConversation","C2C".concat(this.userID)).then((function(){e.showC2CDialog=!1})).catch((function(){e.$store.commit("showMessage",{message:"æ²¡æœ‰æ‰¾åˆ°è¯¥ç”¨æˆ·",type:"warning"})})):this.$store.commit("showMessage",{message:"æ²¡æœ‰æ‰¾åˆ°è¯¥ç”¨æˆ·",type:"warning"}),this.userID=""}}},Bo=$o,Yo=(n("01d9"),Object(ee["a"])(Bo,Po,wo,!1,null,"7daf9235",null)),Fo=Yo.exports,Vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-wrapper"},[n("img",{staticClass:"logo",attrs:{src:e.logo}}),n("el-form",{ref:"login",staticStyle:{width:"100%"},attrs:{"label-position":"left","label-width":"80px",rules:e.rules,model:e.form},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}}},[n("el-form-item",{attrs:{label:"APPID",prop:"appid"}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥APPID",type:"text",clearable:""},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),n("el-form-item",{attrs:{label:"Secret",prop:"secret"}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥secret","show-password":""},model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)},expression:"form.secret"}})],1),n("el-form-item",{attrs:{label:"QQ",prop:"userID"}},[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥QQå·ï¼Œè¯·å‹¿å†’ç”¨",type:"text",clearable:""},model:{value:e.form.userID,callback:function(t){e.$set(e.form,"userID",t)},expression:"form.userID"}})],1)],1),n("el-button",{staticStyle:{width:"100%","margin-top":"6px"},attrs:{plain:"",type:"info"},on:{click:e.submit}},[e._v("ç™»å½•\n  ")])],1)},qo=[],Ho=n("a1d8"),zo=n.n(Ho),Ko=n("a78e"),Jo=n.n(Ko),Qo={name:"Login",components:{ElForm:_e.a,ElFormItem:we.a},props:["initialAppid","initialSecret"],data:function(){var e=function(e,t,n){/^[0-9]{5,15}$/.test(t)?n():n(new Error("æ ¼å¼ä¸æ­£ç¡®"))};return{form:{appid:this.initialAppid,secret:this.initialSecret,userID:Jo.a.get("uin")},rules:{userID:[{required:!0,message:"è¯·è¾“å…¥ QQ",trigger:"blur"},{validator:e,trigger:"blur"}],appid:[{required:!0,message:"è¯·è¾“å…¥ APPID",trigger:"blur"}],secret:[{required:!0,message:"è¯·è¾“å…¥ secret",trigger:"blur"}]},logo:zo.a}},methods:{submit:function(){var e=this;this.$refs["login"].validate((function(t){t&&e.$emit("submit",e.form)}))}}},Wo=Qo,Zo=(n("bde2"),Object(ee["a"])(Wo,Vo,qo,!1,null,"0a88b536",null)),Xo=Zo.exports,ea=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPreviewer,expression:"showPreviewer"}],staticClass:"image-previewer-wrapper",on:{mousewheel:e.handleMouseWheel}},[n("div",{staticClass:"image-wrapper"},[n("img",{staticClass:"image-preview",style:{transform:"scale("+e.zoom+") rotate("+e.rotate+"deg)"},attrs:{src:e.previewUrl},on:{click:e.close}})]),n("i",{staticClass:"el-icon-close close-button",on:{click:e.close}}),n("i",{staticClass:"el-icon-back prev-button",on:{click:e.goPrev}}),n("i",{staticClass:"el-icon-right next-button",on:{click:e.goNext}}),n("div",{staticClass:"actions-bar"},[n("i",{staticClass:"el-icon-zoom-out",on:{click:e.zoomOut}}),n("i",{staticClass:"el-icon-zoom-in",on:{click:e.zoomIn}}),n("i",{staticClass:"el-icon-refresh-left",on:{click:e.rotateLeft}}),n("i",{staticClass:"el-icon-refresh-right",on:{click:e.rotateRight}}),n("span",{staticClass:"image-counter"},[e._v(e._s(e.index+1)+" / "+e._s(e.imgUrlList.length))])])])},ta=[];function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ra={name:"ImagePreviewer",data:function(){return{url:"",index:0,visible:!1,zoom:1,rotate:0,minZoom:.1}},computed:sa(sa({},Object(ue["b"])(["imgUrlList"])),{},{showPreviewer:function(){return this.url.length>0&&this.visible},imageStyle:function(){return{transform:"scale(".concat(this.zoom,");")}},previewUrl:function(){return this.formatUrl(this.imgUrlList[this.index])}}),mounted:function(){this.$bus.$on("image-preview",this.handlePreview)},methods:{handlePreview:function(e){var t=e.url;this.url=t,this.index=this.imgUrlList.findIndex((function(e){return e===t})),this.visible=!0},handleMouseWheel:function(e){e.wheelDelta>0?this.zoomIn():this.zoomOut()},zoomIn:function(){this.zoom+=.1},zoomOut:function(){this.zoom=this.zoom-.1>this.minZoom?this.zoom-.1:this.minZoom},close:function(){Object.assign(this,{zoom:1}),this.visible=!1},rotateLeft:function(){this.rotate-=90},rotateRight:function(){this.rotate+=90},goNext:function(){this.index=(this.index+1)%this.imgUrlList.length},goPrev:function(){this.index=this.index-1>=0?this.index-1:this.imgUrlList.length-1},formatUrl:function(e){return e?"//"===e.slice(0,2)?"https:".concat(e):e:""}}},ia=ra,oa=(n("2425"),Object(ee["a"])(ia,ea,ta,!1,null,"c65b876c",null)),aa=oa.exports;function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach((function(t){Object(ce["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var la={title:"paotuan",data:function(){return{loading:!0,initialAppid:"",initialSecret:"",invitedGroup:""}},components:{Login:Xo,SideBar:Co,CurrentConversation:Qr,ImagePreviewer:aa,ProfileBar:Fo},computed:ua({},Object(ue["c"])({currentUserProfile:function(e){return e.user.currentUserProfile},currentConversation:function(e){return e.conversation.currentConversation},videoCall:function(e){return e.conversation.videoCall},audioCall:function(e){return e.conversation.audioCall},isLogin:function(e){return e.user.isLogin},isSDKReady:function(e){return e.user.isSDKReady},isBusy:function(e){return e.video.isBusy},userID:function(e){return e.user.userID},userSig:function(e){return e.user.userSig},sdkAppID:function(e){return e.user.sdkAppID}})),mounted:function(){var e=new URLSearchParams(location.hash.startsWith("#/")?location.hash.substr(2):""),t=e.get("s")||Jo.a.get("s");this.invitedGroup=e.get("g")||"";var n=Jo.a.get("uin");try{var s=atob(t).split("/").map((function(e,t){return 0===t?e:e.split("").reverse().join("")})),r=Object(ae["a"])(s,2);this.initialAppid=r[0],this.initialSecret=r[1]}catch(i){console.log("invalid sig",t)}this.initialAppid&&this.initialSecret&&n?this.doLogin({appid:this.initialAppid,secret:this.initialSecret,userID:n}):this.loading=!1,location.hash=""},methods:{initListener:function(){this.tim.on(this.TIM.EVENT.SDK_READY,this.onReadyStateUpdate,this),this.tim.on(this.TIM.EVENT.SDK_NOT_READY,this.onReadyStateUpdate,this),this.tim.on(this.TIM.EVENT.KICKED_OUT,this.onKickOut),this.tim.on(this.TIM.EVENT.ERROR,this.onError),this.tim.on(this.TIM.EVENT.MESSAGE_RECEIVED,this.onReceiveMessage),this.tim.on(this.TIM.EVENT.CONVERSATION_LIST_UPDATED,this.onUpdateConversationList),this.tim.on(this.TIM.EVENT.GROUP_LIST_UPDATED,this.onUpdateGroupList),this.tim.on(this.TIM.EVENT.NET_STATE_CHANGE,this.onNetStateChange),this.tim.on(this.TIM.EVENT.MESSAGE_READ_BY_PEER,this.onMessageReadByPeer)},onReceiveMessage:function(e){var t=e.data;this.handleAt(t),this.handleAddGroupTip(t),this.handleQuitGroupTip(t),this.$store.commit("pushCurrentMessageList",t),this.$store.dispatch("insertGameLogs",t),this.$store.dispatch("handleKPNote",t)},onError:function(e){var t=e.data;"Network Error"!==t.message&&this.$store.commit("showMessage",{message:t.message,type:"error"})},onMessageReadByPeer:function(){},onReadyStateUpdate:function(e){var t=this,n=e.name,s=n===this.TIM.EVENT.SDK_READY;this.$store.commit("toggleIsSDKReady",s),s&&(this.tim.getMyProfile().then((function(e){var n=e.data;t.$store.commit("updateCurrentUserProfile",n)})).catch((function(e){t.$store.commit("showMessage",{type:"error",message:e.message})})),this.$store.dispatch("getBlacklist"),this.invitedGroup?this.tim.joinGroup({groupID:"@TGS#"+this.invitedGroup}).then((function(){t.$store.commit("showMessage",{type:"success",message:"é‚€è¯·å…¥ç¾¤æˆåŠŸ"})})).catch((function(e){console.log("invited failed",e),t.$store.commit("showMessage",{type:"error",message:"é‚€è¯·å…¥ç¾¤å¤±è´¥"})})).finally((function(){t.loading=!1})):this.loading=!1)},kickedOutReason:function(e){switch(e){case this.TIM.TYPES.KICKED_OUT_MULT_ACCOUNT:return"ç”±äºå¤šå®ä¾‹ç™»å½•";case this.TIM.TYPES.KICKED_OUT_MULT_DEVICE:return"ç”±äºå¤šè®¾å¤‡ç™»å½•";case this.TIM.TYPES.KICKED_OUT_USERSIG_EXPIRED:return"ç”±äº userSig è¿‡æœŸ";default:return""}},checkoutNetState:function(e){switch(e){case this.TIM.TYPES.NET_STATE_CONNECTED:return{message:"å·²æ¥å…¥ç½‘ç»œ",type:"success"};case this.TIM.TYPES.NET_STATE_CONNECTING:return{message:"å½“å‰ç½‘ç»œä¸ç¨³å®š",type:"warning"};case this.TIM.TYPES.NET_STATE_DISCONNECTED:return{message:"å½“å‰ç½‘ç»œä¸å¯ç”¨",type:"error"};default:return""}},onNetStateChange:function(e){this.$store.commit("showMessage",this.checkoutNetState(e.data.state))},onKickOut:function(e){this.$store.commit("showMessage",{message:"".concat(this.kickedOutReason(e.data.type),"è¢«è¸¢å‡ºï¼Œè¯·é‡æ–°ç™»å½•ã€‚"),type:"error"}),this.$store.commit("toggleIsLogin",!1),this.$store.commit("reset")},onUpdateConversationList:function(e){this.$store.commit("updateConversationList",e.data)},onUpdateGroupList:function(e){this.$store.commit("updateGroupList",e.data)},onReceiveGroupSystemNotice:function(e){var t=this,n=4===e.data.type,s="GROUP".concat(e.data.message.payload.groupProfile.groupID)===this.currentConversation.conversationID;n&&s&&this.$store.commit("resetCurrentConversation"),oe()({title:"æ–°ç³»ç»Ÿé€šçŸ¥",message:vn(e.data.message),duration:3e3,onClick:function(){var e="@TIM#SYSTEM";t.$store.dispatch("checkoutConversation",e)}})},handleAt:function(e){for(var t=this,n=e.filter((function(e){return e.type===t.TIM.TYPES.MSG_TEXT&&e.payload.text.includes("@")})),s=0;s<n.length;s++){var r=n[s],i=r.payload.text.match(/@\w+/g);i&&(i.includes("@".concat(this.currentUserProfile.userID))&&(this.$store.getters.hidden&&this.notifyMe(r),oe()({title:"æœ‰äººåœ¨ç¾¤".concat(r.conversationID.slice(5),"æåˆ°äº†ä½ "),message:r.payload.text,duration:3e3}),this.$bus.$emit("new-messsage-at-me",{data:{conversationID:r.conversationID}})))}},selectConversation:function(e){e!==this.currentConversation.conversationID&&this.$store.dispatch("checkoutConversation",e)},isJsonStr:function(e){try{return JSON.parse(e),!0}catch(t){return!1}},notifyMe:function(e){var t=this;"Notification"in window&&("granted"===window.Notification.permission?this.handleNotify(e):"denied"!==window.Notification.permission&&window.Notification.requestPermission().then((function(n){"granted"===n&&t.handleNotify(e)})))},handleNotify:function(e){var t=this,n=new window.Notification("æœ‰äººæåˆ°äº†ä½ ",{icon:"https://webim-1252463788.file.myqcloud.com/demo/img/logo.dc3be0d4.png",body:e.payload.text});n.onclick=function(){window.focus(),t.$store.dispatch("checkoutConversation",e.conversationID),n.close()}},handleAddGroupTip:function(e){var t=this,n=e.filter((function(e){return t.currentConversation.conversationID===e.conversationID&&e.type===t.TIM.TYPES.MSG_GRP_TIP&&e.payload.operationType===t.TIM.TYPES.GRP_TIP_MBR_JOIN}));n.length>0&&this.$store.dispatch("getGroupMemberList",this.currentConversation.conversationID.replace("GROUP",""))},handleQuitGroupTip:function(e){var t=this,n=e.filter((function(e){return t.currentConversation.conversationID===e.conversationID&&e.type===t.TIM.TYPES.MSG_GRP_TIP&&(e.payload.operationType===t.TIM.TYPES.GRP_TIP_MBR_QUIT||e.payload.operationType===t.TIM.TYPES.GRP_TIP_MBR_KICKED_OUT)}));n.length>0&&n.forEach((function(e){(Array.isArray(e.payload.userIDList)||e.payload.userIDList.length>0)&&t.$store.commit("deleteGroupMemberList",e.payload.userIDList)}))},doLogin:function(e){var t=this,n=e.appid,s=e.secret,r=e.userID;ps(n,s),this.initListener();var i=Number(n);if(i>0){this.loading=!0;var o=window.genTestUserSig(r,i,s).userSig;this.tim.login({userID:r,userSig:o}).then((function(){t.$store.commit("toggleIsLogin",!0),t.$store.commit("startComputeCurrent"),t.$store.commit({type:"GET_USER_INFO",userID:r,userSig:o,sdkAppID:n}),t.$store.commit("showMessage",{type:"success",message:"ç™»å½•æˆåŠŸ"}),Jo.a.set("s",btoa(n+"/"+s.split("").reverse().join("")),{expires:7}),Jo.a.set("uin",r,{expires:7})})).catch((function(e){t.loading=!1,t.$store.commit("showMessage",{message:"ç™»å½•å¤±è´¥ï¼š"+e.message,type:"error"})}))}else this.$store.commit("showMessage",{message:"ç™»å½•å¤±è´¥ï¼šå‚æ•°ä¸åˆæ³•",type:"error"})}}},pa=la,ma=(n("b79f"),n("f849"),Object(ee["a"])(pa,se,re,!1,null,"45d41972",null)),fa=ma.exports,da=(n("0fb7"),n("f529")),ha=n.n(da),ga=n("75fc");n("386d");function va(e){var t=e>0;t?document.title.search(/\((.*?)\)/)>=0?document.title=document.title.replace(/\((.*?)\)/,"(".concat(e>99?"99+":e,")")):document.title="(".concat(e,")").concat(document.title):document.title=document.title.replace(/\((.*?)\)/,"")}var ba={state:{currentConversation:{},currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[],callingInfo:{memberList:[],type:"C2C"},audioCall:!1},getters:{toAccount:function(e){if(!e.currentConversation||!e.currentConversation.conversationID)return"";switch(e.currentConversation.type){case"C2C":return e.currentConversation.conversationID.replace("C2C","");case"GROUP":return e.currentConversation.conversationID.replace("GROUP","");default:return e.currentConversation.conversationID}},currentConversationType:function(e){return e.currentConversation&&e.currentConversation.type?e.currentConversation.type:""},totalUnreadCount:function(e){var t=e.conversationList.reduce((function(t,n){return xa.getters.hidden||e.currentConversation.conversationID!==n.conversationID?t+n.unreadCount:t}),0);return va(t),t},imgUrlList:function(e){return e.currentMessageList.filter((function(e){return e.type===es.TYPES.MSG_IMAGE&&!e.isRevoked})).map((function(e){return e.payload.imageInfoArray[0].url}))}},mutations:{setCallingList:function(e,t){e.callingInfo.memberList=t.memberList,e.callingInfo.type=t.type},showAudioCall:function(e,t){e.audioCall=t},updateCurrentConversation:function(e,t){e.currentConversation=t,e.currentMessageList=[],e.nextReqMessageID="",e.isCompleted=!1},updateConversationList:function(e,t){e.conversationList=t},resetCurrentConversation:function(e){e.currentConversation={}},pushCurrentMessageList:function(e,t){if(e.currentConversation.conversationID)if(Array.isArray(t)){var n=t.filter((function(t){return t.conversationID===e.currentConversation.conversationID}));e.currentMessageList=[].concat(Object(ga["a"])(e.currentMessageList),Object(ga["a"])(n)),bn(e.currentMessageList)}else t.conversationID===e.currentConversation.conversationID&&(e.currentMessageList=[].concat(Object(ga["a"])(e.currentMessageList),[t]),bn(e.currentMessageList))},removeMessage:function(e,t){var n=e.currentMessageList.findIndex((function(e){var n=e.ID;return n===t.ID}));n>=0&&e.currentMessageList.splice(n,1)},reset:function(e){Object.assign(e,{currentConversation:{},currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[]})}},actions:{getMessageList:function(e,t){if(e.state.isCompleted)e.commit("showMessage",{message:"å·²ç»æ²¡æœ‰æ›´å¤šçš„å†å²æ¶ˆæ¯äº†å“¦",type:"info"});else{var n=e.state,s=n.nextReqMessageID,r=n.currentMessageList;ls.getMessageList({conversationID:t,nextReqMessageID:s,count:15}).then((function(t){e.state.nextReqMessageID=t.data.nextReqMessageID,e.state.isCompleted=t.data.isCompleted,e.state.currentMessageList=[].concat(Object(ga["a"])(t.data.messageList),Object(ga["a"])(r)),bn(e.state.currentMessageList)}))}},checkoutConversation:function(e,t){if(e.commit("resetCurrentMemberList"),e.state.currentConversation.conversationID){var n=e.state.currentConversation.conversationID;ls.setMessageRead({conversationID:n})}return ls.setMessageRead({conversationID:t}),ls.getConversationProfile(t).then((function(n){var s=n.data;return e.commit("updateCurrentConversation",s.conversation),e.dispatch("getMessageList",t),s.conversation.type===es.TYPES.CONV_GROUP?(e.dispatch("initGame",s.conversation.groupProfile.groupID),e.dispatch("getGroupMemberList",s.conversation.groupProfile.groupID)):Promise.resolve()}))}}},ya=ba,Oa={state:{groupList:[],currentMemberList:[],createGroupModelVisible:!1},getters:{hasGroupList:function(e){return e.groupList.length>0}},mutations:{updateGroupList:function(e,t){e.groupList=t},updateCreateGroupModelVisible:function(e,t){e.createGroupModelVisible=t},updateCurrentMemberList:function(e,t){e.currentMemberList=[].concat(Object(ga["a"])(e.currentMemberList),Object(ga["a"])(t))},deleteGroupMemeber:function(e,t){e.currentMemberList=e.currentMemberList.filter((function(e){return e.userID!==t}))},deleteGroupMemberList:function(e,t){e.currentMemberList=e.currentMemberList.filter((function(e){return!t.includes(e.userID)}))},resetCurrentMemberList:function(e){e.currentMemberList=[]},reset:function(e){Object.assign(e,{groupList:[],currentMemberList:[],createGroupModelVisible:!1})}},actions:{updateGroupList:function(e,t){e.commit("updateGroupList",t)},getGroupMemberList:function(e,t){return ls.getGroupMemberList({groupID:t,offset:e.state.currentMemberList.length,count:30}).then((function(t){return e.commit("updateCurrentMemberList",t.data.memberList),t}))}}},Ca=Oa,Pa={state:{currentUserProfile:{},isLogin:!1,isSDKReady:!1,userID:0,userSig:"",sdkAppID:0},mutations:{updateCurrentUserProfile:function(e,t){e.currentUserProfile=t},toggleIsLogin:function(e,t){e.isLogin="undefined"===typeof t?!e.isLogin:t},toggleIsSDKReady:function(e,t){e.isSDKReady="undefined"===typeof t?!e.isSDKReady:t},reset:function(e){Object.assign(e,{currentUserProfile:{},isLogin:!1,isSDKReady:!1})},GET_USER_INFO:function(e,t){e.userID=t.userID,e.userSig=t.userSig,e.sdkAppID=t.sdkAppID}},actions:{logout:function(e){e.rootState.conversation.currentConversation.conversationID&&ls.setMessageRead({conversationID:e.rootState.conversation.currentConversation.conversationID}),ls.logout().then((function(){e.commit("toggleIsLogin"),e.commit("stopComputeCurrent"),e.commit("reset")}))}}},wa=Pa,Ma={state:{friendList:[],createGroupModelVisible:!1},mutations:{upadteFriendList:function(e,t){e.friendList=t},reset:function(e){Object.assign(e,{friendList:[],createGroupModelVisible:!1})}}},_a=Ma,ja={state:{blacklist:[]},mutations:{updateBlacklist:function(e,t){e.blacklist=t},removeFromBlacklist:function(e,t){e.blacklist=e.blacklist.filter((function(e){return e.userID!==t}))},reset:function(e){Object.assign(e,{blacklist:[]})}},actions:{getBlacklist:function(e){ls.getBlacklist().then((function(t){var n=t.data;n.length>0&&ls.getUserProfile({userIDList:n}).then((function(t){var n=t.data;e.commit("updateBlacklist",n)}))}))}}},Ia=ja,Ea={currentTab:"group",botEnabled:!1,logEnabled:!1,logs:[],bgm:{},notes:[],noteUnread:!1},Ta=function(e){return Da.state.list[e]||z["default"].set(Da.state.list,e,JSON.parse(JSON.stringify(Ea))),Da.state.list[e]},Da={state:{list:{}},mutations:{initGame:function(e,t){z["default"].set(e.list,t,JSON.parse(JSON.stringify(Ea)))},toggleBotEnabled:function(e,t){var n=t.groupId,s=t.enabled;Ta(n).botEnabled=s},toggleLogEnabled:function(e,t){var n=t.groupId,s=t.enabled;Ta(n).logEnabled=s},insertLog:function(e,t){var n=t.groupId,s=t.log;Ta(n).logs.push(s)},updateLogs:function(e,t){var n=t.groupId,s=t.logs;Ta(n).logs=s},setGameBgm:function(e,t){var n=t.groupId,s=t.bgm;Ta(n).bgm=s},addNote:function(e,t){var n=t.groupId,s=t.note;Ta(n).notes.push(s)},updateNotes:function(e,t){var n=t.groupId,s=t.notes;Ta(n).notes=s},setNoteUnread:function(e,t){var n=t.groupId,s=t.unread;Ta(n).noteUnread=s},setCurrentTab:function(e,t){var n=t.groupId,s=t.tab;Ta(n).currentTab=s}},actions:{initGame:function(e,t){e.state.list[t]||e.commit("initGame",t)},toggleBotEnabled:function(e,t){var n=t.groupId,s=t.enabled;return(s?ds:hs)(n).then((function(t){return e.commit("toggleBotEnabled",{groupId:n,enabled:s}),t}))},insertGameLogs:function(e,t){t.filter((function(t){return t.conversationType===es.TYPES.CONV_GROUP&&t.type===es.TYPES.MSG_TEXT&&e.state.list[t.to]&&e.state.list[t.to].logEnabled})).forEach((function(t){var n={id:t.ID,from:t.from,nick:t.nameCard||t.nick,time:t.time,content:t.payload.text};n.content.startsWith(".")||n.content.startsWith("ã€‚")||e.commit("insertLog",{groupId:t.to,log:n})}))},handleKPNote:function(e,t){t.filter((function(e){return e.conversationType===es.TYPES.CONV_GROUP&&e.priority===es.TYPES.MSG_PRIORITY_HIGH})).forEach((function(t){if(t.type===es.TYPES.MSG_CUSTOM){var n=JSON.parse(t.payload.data);"bgm"===n.mtype&&(e.commit("setGameBgm",{groupId:t.to,bgm:n.mdata}),e.dispatch("handleNoteUnread",t.to))}else t.type===es.TYPES.MSG_TEXT?(e.commit("addNote",{groupId:t.to,note:{id:t.ID,type:t.type,payload:t.payload.text}}),e.dispatch("handleNoteUnread",t.to)):t.type===es.TYPES.MSG_IMAGE&&(e.commit("addNote",{groupId:t.to,note:{id:t.ID,type:t.type,payload:t.payload.imageInfoArray[0].url}}),e.dispatch("handleNoteUnread",t.to))}))},handleNoteUnread:function(e,t){"note"!==Ta(t).currentTab&&e.commit("setNoteUnread",{groupId:t,unread:!0})}}},Sa=Da;z["default"].use(ue["a"]);var xa=new ue["a"].Store({state:{current:Date.now(),intervalID:0,message:void 0},getters:{hidden:function(e){e.current;return"function"!==typeof document.hasFocus?document.hidden:!document.hasFocus()}},mutations:{startComputeCurrent:function(e){e.intervalID=setInterval((function(){e.current=Date.now()}),500)},stopComputeCurrent:function(e){clearInterval(e.intervalID),e.intervalID=0},showMessage:function(e,t){e.message&&e.message.close(),e.message=ha()({message:t.message,type:t.type||"success",duration:t.duration||2e3,offset:40})}},modules:{conversation:ya,group:Ca,friend:_a,blacklist:Ia,user:wa,game:Sa}}),ka=n("4eb5"),Aa=n.n(ka);n("ed2c"),n("8e84");window.store=xa,z["default"].prototype.$bus=new z["default"],z["default"].prototype.tim=ls,z["default"].prototype.TIM=es,z["default"].prototype.$store=xa,z["default"].prototype.$confirm=H.a.confirm,z["default"].use(V.a),z["default"].use(Y.a),z["default"].use($.a),z["default"].use(N.a),z["default"].use(L.a),z["default"].use(A.a),z["default"].use(x.a),z["default"].use(D.a),z["default"].use(E.a),z["default"].use(Aa.a),z["default"].use(j.a),z["default"].use(M.a),z["default"].use(P.a),z["default"].use(O.a),z["default"].use(b.a),z["default"].use(g.a),z["default"].use(d.a),z["default"].use(m.a),z["default"].use(l.a),z["default"].use(c.a),z["default"].use(o.a),z["default"].use(r.a),z["default"].component("avatar",ne),new z["default"]({render:function(e){return e(fa)}}).$mount("#app")},5968:function(e,t,n){},"5bcc":function(e,t,n){},6:function(e,t){},6044:function(e,t,n){},"62fb":function(e,t,n){"use strict";n("4b30")},"691c":function(e,t,n){"use strict";n("5406")},"6b14":function(e,t,n){"use strict";n("54c0")},7:function(e,t){},"76e5":function(e,t,n){},"777c":function(e,t,n){"use strict";n("c1f9")},"7a62":function(e,t,n){},"7ba6":function(e,t,n){"use strict";n("5bcc")},8:function(e,t){},8127:function(e,t,n){"use strict";n("12d4")},"831a":function(e,t,n){"use strict";n("12a8")},"852a":function(e,t,n){},"854e":function(e,t,n){},"86b5":function(e,t,n){"use strict";n("b8dc")},"873f":function(e,t,n){"use strict";n("a396")},8810:function(e,t,n){"use strict";n("2158")},"8aaf":function(e,t,n){},"8d6e":function(e,t,n){},"8e84":function(e,t,n){},"8f40":function(e,t,n){"use strict";n("8aaf")},9:function(e,t){},"93d0":function(e,t,n){"use strict";n("980d")},"96b9":function(e,t,n){"use strict";n("a7a6")},"980d":function(e,t,n){},9908:function(e,t,n){},"9c8e":function(e,t,n){},a1d8:function(e,t,n){e.exports=n.p+"img/logo.7ea2a7d2.png"},a359:function(e,t,n){},a396:function(e,t,n){},a65e:function(e,t,n){"use strict";n("e78d")},a7a6:function(e,t,n){},a86b:function(e,t,n){"use strict";n("854e")},b322:function(e,t,n){},b79f:function(e,t,n){"use strict";n("eb35")},b849:function(e,t,n){"use strict";n("fbe1")},b8dc:function(e,t,n){},bde2:function(e,t,n){"use strict";n("fdb7")},bec9:function(e,t,n){},c16a:function(e,t,n){"use strict";n("9c8e")},c1f9:function(e,t,n){},c8ad:function(e,t,n){"use strict";n("852a")},c964:function(e,t,n){},d4e4:function(e,t,n){},d874:function(e,t,n){"use strict";n("5968")},daca:function(e,t,n){"use strict";n("d4e4")},e017:function(e,t,n){"use strict";n("76e5")},e3ec:function(e,t,n){"use strict";n("53b9")},e6da:function(e,t,n){"use strict";n("a359")},e78d:function(e,t,n){},e8d4:function(e,t,n){},eb35:function(e,t,n){},ec1e:function(e,t,n){"use strict";n("f700")},ec25:function(e,t,n){"use strict";n("6044")},ed2c:function(e,t,n){},eeff:function(e,t,n){},f293:function(e,t,n){},f6e3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACpCAMAAAHy0MbyAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJYUExURQrBYAvBYRPDZhzGbCXIcSrJdSHHbxjFaQ7CYwzBYSnJdEzSi3bcpqLnw87z3+X47uj58Ov68uz68+n58ef579/36rzu05Djt2TYmz7OghnFai/KeIHfrcPw2OP47fz+/f////P8+Nb15K7ry1vVlBrFaw7CYlDTjqrqyPP899j15YrhsxDCZFfUksDv1vr+/C7KdyzKdq3qynLbo2HXmf7//rTszhTDZo/jtk7SjCjJc7nt0fX9+THLes3y3/3//oXgsA3CYjTMe5HjuA/CY8/z4IDfrRbEaLft0GbYnO779Pb9+cLv1x3GbNL04ub575zmv5flvEDPgzDLeaXoxIzitPD79TXMfB7GbeL47F7WlhLDZavqyfj9+03SjN326YvitEbQh3jdqO/79CLHcLHrzE/TjSPHcOT47vH79rHrzUvSivf9+vn++8zy3lXUkdf15SDHblnVk+D36ybIclrVlGfZnHjdpznNf1HTjhfEadv26I3itUfRiMfx26Pow0HPhJPkuZjlvMHv1zjNfkTQhWnZnhvFa8ry3TLLepXkurbt0Gvan4LfrknRiV/Wl9X05HHbo7/v1Z3mv8jx24jhskjRiTrNf8nx3Mvy3WLXmUfQh0XQhu3681LTj9n15ljVk2XYm6/ry+H37Or68bXsz2PYmjfMfW3aoLvu0zbMfTPLe77u1S7KeErRirDrzNr253fcpkPPhSvJdafpxr3u1N736n/frPL89o7itW/boWDXl3ndqJvmvvv+/Xveqsbx2tz26fT8+BHDZD3OgYTgr4fhsQAAAKRC35oAAADIdFJOU/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8A9ppxxwAAAAlwSFlzAAAXEQAAFxEByibzPwAABVpJREFUaEPt2zuP2koUB3BaN1dCLikwols5fVb5Cim3QaxEtNomDdJKaHWbbaBASPcTUKVBShv6NNH6e2Uefxs/5u0H7NX5NXiOzwwjY+yxPR4N422MhYqEw/KFiDbiZ3UY0V7D1ThizDMiAmIcIkIURaycxlGEQCFLRvUvlDJ8/j+MP2OhTGymxoqxCDc2ioz6/mgo5hB1C39BtBZGkEFAQIiLERKiKN2xtc0ffpSkD1MsVhzxSZxgoydLlA2QKfyLmA7S4Buiaitk5RBWQ04BYTXkFBBWQ04BYTXkFA6IqyCl5AvWNGB9DVbWYW3NGWvVZGOZsb8X8i+MAiHe5rOFeYfMbcSuliQzlA3WSGUQ0fqGPAExHWRJvxFUwzk2h6gacnKIqiEnt0VYCTm5FcJKyMlVzrB1yMl9tFzTBn5ASgFxFWRc6I+YSCjDmoZGDzisq8PaKuWQR52qaTi/BKjB2jo28mZjb7k2TkRRLGv9lCcgTUdrkiQbpbZTVk5003VYH2X3lo4SQkiAN3EokhYbBNuqDFWkN6xqoTRWKmt5d2SJZhSQESQfAyohJwRa0ECSvzka0LhHmrcZGtBYI80b6usYR1kG7ARuRO1KH63d0D8GausFdfiAykbI9fAdNS0+Id2RU2cl1HCivHrQ8bgPihpuvqOSi/RxFRd4XSwyU1bEIndKUcVbym8fYplhBeNlswfWVIJuTXh35WIH7lhjvEHhAcEuRO9/ZKOrPSKEEEIIIVey+e+f8Wy8e3V4yuxuWb4AV02QCFO/rH9CvB3FLRPlbB5P6lsmWBnuBQ3VYXUwNNPg8NTPhA+o1Vr9eKb7UUgJUnt8WDFHTgDDXTkGSQHM97ncHt6ooAGN4NtctstZZHnbo74O0rxpHsgVkObtHvV1Qq+4be2G3hCndiVqV6J2pb7afUJ9HbcpYk316Xx15smAeqiuhzxPW9TWq8xQdmW9u+53J7VQ3Dc0CJgCa98KHJLd2c5tOaQ7QzUr46yoJpeNK3ndY85QyYXPcApV3KCOA9cfTZqglp1fu+7/utT9Z9NNoFJLj2s8nuBYZSxx1dKd919OTKxixLOiNC+OnnkJBdtUKzN+ALo8gub/byy2xVq6bMRKoR3WxekjllfsJw1+fl7H+pjEfHd65ztKV90did/q8hynw+lmomEIfi6mdEKr284nx02y7GlPU+4IIYQQQgghhBBisVxuNptOp4j0YpOt60/wF/MfN9nvHzt0UGH2OfTJUT9eTdMipPmt9Hhj2K4Vr6hwTYcFOuOiu3lUYZauWzZ31S3s90hD2F3vQKF4xdBudq3/3G90wFfoc+t2grYtN75Gf1/x5QEWaGJAL7YpBSah0w3C2SZWGI0HPzzoJ0+66GZ2rDuPV+tUWkyvDGKbvGOx7vbxn9UnfG+g1cDnirbdfUE7A6Hu9om62yfqbp+ou336YN1tMTjn4oFPwm5TR/U6m+flJOCKvSr8vZQA5ZlggQa8/jn7TMTU8ZpZ20ary7SLfMpiv9J2V2klsfuE3WBHfFcnMjTal32buwsKcfgbcQ463bRSfxeZ6Rpf0a2A9xtcTLo4fKn0soH3fAp6P/o4xfWw3+amPfzhetpzuR2+olv3fMp89+56HJ1F+4kCdpQTihVnuc/HB5TLDpOB75VJE9GjZKX6cow1Bx0xWkR4A+AB5ZIU58Gejq5hnnGUaxxCMdacnlC+EZP8qHwqvwyB/ZZF0xt7RSJdF4eN6Wl7PP7asoHmFNv2J5JuyVk3Wnu8yt/fKkq32Jwlq/tbflMmet/e/ZEdncZfj0Gvvw4s35ztXpkjhBBCCCGkrdHoLzv9X1u4OdoGAAAAAElFTkSuQmCC"},f700:function(e,t,n){},f849:function(e,t,n){"use strict";n("f955")},f955:function(e,t,n){},fbe1:function(e,t,n){},fc3e:function(e,t,n){},fdb7:function(e,t,n){},fe90:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAAHfgQuIAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAOKADAAQAAAABAAAAOAAAAAAun0ppAAAG3UlEQVRoBdWav4tcVRTHJ667EIkiK1opDLFQEWxCUoQ0FissgnYWYhO2sVibNOIfsEGwNRbaWWxhUkQhVUBIsBDBRlglNltEFxYWIqwgwR/x+3n7vi9n7tz3Y+bNTJIDZ++5556f98e5d14yGIzCTXU/H2UNBvspQ/1h5H0cOiumMZWFx8W9VY7cSySOxT6Dxp/iwDB2cvSSmHdzAxcTZuXfhMN3SuYnekfdtcdKtqOM7cuMWT0OwP+NP4AFjnrj/YK/XgquWapsL5X8hD0YoJCmOiZUMqoImLTogQFPg5VTXqGcnWlr1LSe5wE5AD8IsVaH3hmFRxSA2Hmr7NtAIVD+iXKRX3kjb0LaFCJcrY/oWrigkQPhrvB0rVQYwPLt0IdcFsLfoZMDBpuAiRmTGWM0WKhkP5LQ8SC4F2iTkVelUlkopdI+7JT3R45Z6jc293zoGqVyg1HxfQkQUhNWNjzF2T1YSd0nLHcZFjP6YTn2lNo6j6XI6ESls/ZPMHDDGmrfFW6FfkGivJoyQ/9r0SN1NYwNNtTBwLbwGeFJIWsGj0oxEbCzUOyCnKi4Czs7ulo6uDOFARbIwZ1o82hHZ9sEO47/VTr3thlRIyoymjWwMbDNOlcAozrVFfeI8PTECpCIFN0mOU4g428jSfmkM29gBxd+2FmLcMhxKarUYSa1b8sgCKQPRtNPu8MthFEulQh9HKF7LRoT7UJQsOumdVqnnyXOzqs/lhTXJcz0zFCaujr+RLIpUBPRz5Y4KgODHNi+QMXG1kgBjjcUDv4UkuETQmfF+UzlxMqCpw7dV4XYei0r2cLkwHrRHUjaXpFMuvFazDYPs5v5MbIr5I3JRrsppHBk10f8iYGrxjs4zSjX5yqbGrxrMXxJ2DRdaxpnrR3EuujO4J2Ksh8fXZWZEW4cdLnqWmEoCUeZnsdW5SBwsbSzH3hjJA5wNosziHEu8cZMnRnCswJnOramG/KAQ27nWYPXdMQuzthlKayIsSdMfwBOIsdGwn51ZKgiMHLlC2eMgU3QJucjU9hwycoZJLMuDtvkOKfYWcIJxDbEnAE/lMHCIRHMG3BI7S0c8sCZN+CQulw4XJm3t9LPXe/M5xOHRNMXefmlsGeHb6YjM+h/lbFxHR6ZcDQiXFOnb4bRHlcb9rjEB1fKDrTBhXxap3wwisB9iq0C7P28GWXL23Jah4mpwk6xQz3AR6MqAjPV8sSb1ClfCiJwiWODmloBJQcmj9YUeNx2dVqUrmDAS7MTeBW5VRrmAZuDG2LmHPPpgm90ObB8bqzgeQrrnNYqZgZ4OeCQN1Ij2GluehsVy8FVtc5s2EUBGU8viunurbNBEfG9hx7rNxGwAbx7MUBx2BSeFFJ7KfhrQq42Z0S7IewFnFMXh2g40gTDy2FhQFA4vCz0CyIG1JVGFxvYwuYDA5aXpYpLHJMgUJb2A+EbQpadJWfpQegXhYwhsy2smxh84AufcwU2+ZYwJgJ9W8jB8c0qsjdgC5vYTv0Rw8QHTjq1MNSIS4+dUYIoJ4sCfPlTiGMgpmGfACi4MTEK8SwKep+Y0CUGXwokS4ytl4NkRiDdig9DYiMBqkNMXk1aYm4FDjIPASuyLWa631sjmEyAsxq3LrHXFiOeU7Eq8sx6VIBYvSjkMPI0JIll4YHQQlSwLhB/8Vq37TtAk90+9ojZMZALOVVwRZQHP6247cRe0LM+vGmhrz3/dCEWHgwFnNFfB8dlO5L5kUjt3xWNMOsEBkLDmxb62iP2+GA4TSBfCJ3gJoxHHMjB+ZBb8d3aDJ5UjzqQg/PZJRk+ypvRZ3th62EAcnA+xaegwxDVk4FOyd+Dog08qJZY6iDmcMhF+XOQPBXolPwmZTzAflMsMYcitwsK1Cux3RD0cxr7O8haZ9EtMTzbECc5OCZyK542sbSuNSi/E5RtZNEtMdQBsTsecqqebf6HAwb5DcbWrYMzGvhPaEOLavGJ7zogZmJ3PGOfNPhnEg8iOPaeE8+wLOK60PLzbvGFzzog1phc9U8+qcKGGA72jujVVCDpcxZm9V8m7De22G46b4RDjMRqPXJohHWNWpj2YqP0/cHXRX4vjLrT0NjAVhcgtuiD2DvBMUldFVqZX9BnO2neF+LD0nvCL4U3hL8KuXNBaHiMIYPsJEAs8Vc9sRLzxDCUxr7QidIya1MZk14fwGe6YsQ27GPUuidExBUlUfY9PzSPC+cF2MZHPGP4JhZimgusy+qOMK4qNFWM35LcRU0VT8NZQAddbMSKaD/4xPdCgRmmJB8IHcisWmxiGx9TwzzO0pKiOSU8J3xF+JLwBSGPYD+EXWxYqVvCX4TfCX8U/iucGfwPlkqurjfJdY8AAAAASUVORK5CYII="}});